<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Getting Started &#183; Arquillian Guides</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="プロジェクトのテストスイートへArquillianを追加し、最初のArquillianテストの書き方を学びます。" name="description" />
    <link href="/blog/atom.xml" rel="alternate" title="Arquillian blog Atom feed" type="application/atom+xml" />
    <link href="/stylesheets/screen.css?0e37e0c96bdb29499b3d12aff4b9a4b3f556c4da" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/r29/html5.js"></script>
    <![endif]-->
    <link href="/favicon.ico" rel="shortcut icon" />
  </head>
  <body class="guide">
    <header class="navbar navbar-fixed-top" id="banner" role="banner">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <div class="g-plusone-slot">
            <div class="g-plusone" data-annotation="none"></div>
          </div>
          <a class="brand" href="/">
            <span class="logo"></span>
            <span class="name">Arquillian</span>
          </a>
          <nav class="nav-collapse" role="navigation">
            <ul class="nav">
              <li><a href="/invasion/">Invasion!</a></li>
              <li><a href="/features/">Features</a></li>
              <li class="active"><a href="/guides/">Guides</a></li>
              <li><a href="/docs/">Docs</a></li>
              <li><a href="/blog/">Blog</a></li>
              <li><a href="/community/">Community</a></li>
              <li><a href="/modules/">Modules</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </header>
    <div id="main" role="main">
      <div id="content-header">
        <div class="container">
          <div class="headline">
            <h1>
              <a href="/guides/">Arquillian Guides</a>
              <small>Designed exclusively to teach you how to use Arquillian to write real tests.</small>
            </h1>
            <div class="directory">
              <a class="guides_menu" href="./" id="guides_menu">
                Guides Index
                <i class="icon-menu-closed"></i>
              </a>
              <div id="guides" style="display: none">
                <a class="guides_menu" href="./">
                  Guides Index
                  <i class="icon-menu-open"></i>
                </a>
                <hr class="clear" />
                <dl class="beg">
                  <dt>First Steps</dt>
                  <dd><a href="/guides/getting_started/">Getting Started</a>
                  <br />
                  <a href="/guides/getting_started/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/getting_started_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/getting_started_el_gr/"><img class="flag" rel="tooltip" src="/images/flags/el_gr.png" title="Ελληνικά (el_gr)" /></a>
                  <a href="/guides/getting_started_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/getting_started_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/getting_started_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/getting_started_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/getting_started_nl/"><img class="flag" rel="tooltip" src="/images/flags/nl.png" title="Nederlands (nl)" /></a>
                  <a href="/guides/getting_started_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/getting_started_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/getting_started_sk/"><img class="flag" rel="tooltip" src="/images/flags/sk.png" title="Slovenčina (sk)" /></a>
                  <a href="/guides/getting_started_sv_se/"><img class="flag" rel="tooltip" src="/images/flags/sv_se.png" title="Svenska (sv_se)" /></a>
                  <a href="/guides/getting_started_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/getting_started_rinse_and_repeat/">Getting Started: Rinse and Repeat</a>
                  <br />
                  <a href="/guides/getting_started_rinse_and_repeat/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/get_started_faster_with_forge/">Get Started Faster with Forge</a></dd>
                  <dd><a href="/guides/shrinkwrap_introduction/">Creating Deployable Archives with ShrinkWrap</a>
                  <br />
                  <a href="/guides/shrinkwrap_introduction/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/shrinkwrap_introduction_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/shrinkwrap_introduction_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/shrinkwrap_introduction_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/shrinkwrap_introduction_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/shrinkwrap_introduction_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/shrinkwrap_introduction_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/shrinkwrap_introduction_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                </dl>
                <dl class="int">
                  <dt>More Coverage</dt>
                  <dd><a href="/guides/testing_java_persistence/">Testing Java Persistence</a>
                  <br />
                  <a href="/guides/testing_java_persistence/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/testing_java_persistence_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/testing_java_persistence_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/testing_java_persistence_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/testing_java_persistence_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/testing_java_persistence_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/functional_testing_using_graphene/">Functional Testing using Drone and Graphene</a></dd>
                  <dd><a href="/guides/testing_in_the_cloud/">Testing in the Cloud</a></dd>
                </dl>
                <dl class="adv">
                  <dt>Enhance</dt>
                  <dd><a href="/guides/developing_a_container_adapter/">Developing a Container Adapter</a></dd>
                </dl>
                <dl class="ref">
                  <dt>Reference</dt>
                  <dd><a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Reference Guide</a></dd>
                  <dd><a href="http://docs.jboss.org/arquillian/aggregate/latest">API &amp; SPI Docs</a></dd>
                  <dd><a href="http://community.jboss.org/wiki/ArquillianMigrationGuides">Migration Guides</a></dd>
                  <dd><a href="http://community.jboss.org/en/arquillian/faq">FAQs</a></dd>
                </dl>
              </div>
            </div>
            <script>$(function() { activateGuideMenuControl() })</script>
          </div>
        </div>
      </div>
      <div class="container" id="guide">
        <div id="content" lang="ja">
            <div class="header">
            <div class="titlebar">
            <h2>Getting Started</h2>
            <div class="btn-group">
              <a class="btn" href="https://github.com/arquillian/arquillian.github.io/edit/develop/guides/getting_started_ja.textile">Edit this file</a>
            </div>
          </div>
            <div class="authors"><strong>Author:</strong>
          <a href="/community/mojavelinux">Dan Allen</a>  <strong style="padding-left: 10px;">Translator:</strong>
          <a href="/community/leathersole">Takayuki Konishi</a>  <strong style="padding-left: 10px;">Language:</strong>
          <img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" />
          <br />
          <strong style="padding-left: 0px;">Tags:</strong>
          cdi, weld, maven, forge, eclipse  <strong style="padding-left: 10px;">Last Update:</strong>Feb 21, 2017</div>
            <p>このガイドではArquillianを紹介します。このガイドを読むと、以下のことができるようになります：</p>
            <ul>
          	<li>MavenベースのJavaプロジェクトに、Arquillianインフラストラクチャを追加する</li>
          	<li><acronym title="Contexts and Dependency Injection">CDI</acronym> beanの振る舞いを検証するArquillianのテストを書く</li>
          	<li>MavenとEclipseから、互換性のある複数のコンテナ上でArquillianのテストを実行する</li>
          </ul>
            <p>これらのスキルを、MavenでビルドされるJava EEアプリケーションのテストスイートにArquillianを組み込むことによって学びます。このガイドは、読者がさっと始められるように、 <em>速く読めるよう</em> デザインされています！</p>
            </div>
            <h3 id="&#21069;&#25552;">前提</h3>
          <p>Arquillianを始める最もシンプルな方法は、依存性の管理をしているプロジェクトのテストスイートに組み込むことです。今日、このカテゴリで最も広く利用されているビルドツールは、 <a href="http://maven.apache.org">Apache Maven</a> です。このガイドでは、サンプルのMavenプロジェクトを使って、最初の <strong class="greenbar">グリーンバー</strong> へ案内します。</p>
          <p class="info"><span>ArquillianはMavenには、もっと言えばどんな特定のビルドツールにも依存しません。それはAntやGradleでビルドするプロジェクトで使っても&#8212;より優れているとは言わないまでも&#8212;同じように機能します。理想的には、ビルドツールは、 <a href="http://search.maven.org">Maven Central repository</a> で配布されているArquillianライブラリをプロジェクトに追加するタスクを単純化できる、依存性管理を提供している物がいいでしょう。</span></p>
          <p>このガイドは、読者がコマンドシェルとIDE(Integrated Development Environment:統合開発環境)からMavenを利用できると仮定しています。もしそうでなければ、 <a href="http://maven.apache.org/download.html">Mavenをダウンロードしてインストールしてください</a> 。 また、 <a href="http://www.oracle.com/technetwork/java/javase/downloads"><acronym title="Java Development Kit">JDK</acronym> 1.5</a> 以降のインストールが必要で、JDK 1.6を推奨します。</p>
          <h3 id="&#26032;&#12375;&#12356;&#12503;&#12525;&#12472;&#12455;&#12463;&#12488;&#12434;&#20316;&#25104;&#12377;&#12427;">新しいプロジェクトを作成する</h3>
          <p>新しいプロジェクトを作成する際に、お勧めの方法が2つあります：</p>
          <ol>
          	<li><a href="#generate_project_from_archetype">Maven archetypeからプロジェクトを生成する</a></li>
          	<li><a href="#create_project_using_forge">JBoss Forgeでプロジェクトを作成、カスタマイズする</a></li>
          </ol>
          <p>間違いなく、 <a href="http://jboss.org/forge">JBoss Forge</a> はより簡単なやり方ですが、このガイドではJBoss Forgeをまだ受け入れられないことを考慮して、両方のオプションを示します。上で示した二つのオプションからどちらかを選んで、次の説明に飛んでください。</p>
          <p class="info"><span>既存のMavenプロジェクトがあれば、この章を、次章に進む前に正しい依存性の設定になっているかのレビューとして使うことができます。</span></p>
          <h4 id="generate_project_from_archetype">Maven Archetypeからプロジェクトを生成する</h4>
          <p>まず、以下のコマンドでMavenベースのJavaプロジェクトを生成します：</p>
          <pre class="command"><code class="command">$ mvn archetype:generate -DarchetypeGroupId=net.avh4.mvn.archetype \&#x000A;-DarchetypeArtifactId=java-1.6-archetype</code></pre>
          <p><em><code>$</code> 以降のテキストをコピーして、コマンドシェルにペーストしてください。</em> プロンプトでは、それぞれ、コロン2つの後に示している値を入力してください。（ <code>&lt;ENTER&gt;</code> で示しているように）各行でエンターキーを押してください。</p>
          <pre class="output"><code class="output">Define value for property 'groupId': : org.arquillian.example &lt;ENTER&gt;&#x000A;Define value for property 'artifactId': : arquillian-tutorial &lt;ENTER&gt;&#x000A;Define value for property 'version': : &lt;ENTER&gt;&#x000A;Define value for property 'package': : &lt;ENTER&gt;&#x000A;Confirm properties configuration:&#x000A;groupId: org.arquillian.example&#x000A;artifactId: arquillian-tutorial&#x000A;version: 1.0-SNAPSHOT&#x000A;package: org.arquillian.example&#x000A;Y: : &lt;ENTER&gt;</code></pre>
          <p>このコマンドは、カレントディレクトリに <code>arquillian-tutorial</code> という新しいフォルダを作り、そこにMavenベースのJavaプロジェクトを生成します。このプロジェクトのファイル構成は、次のようになります：</p>
          <ul class="filetree">
          	<li>src/
          	<ul>
          		<li>main/
          		<ul>
          			<li>java/ &#8211; アプリケーションのすべてのJavaソースファイルをここに置きます。（Javaパッケージの下に置きます）</li>
          			<li>resources/ &#8211; アプリケーションの設定ファイルをここに置きます。</li>
          		</ul></li>
          		<li>test/
          		<ul>
          			<li>java/ &#8211; すべてのテスト用のJavaソースコードをここに置きます。（Javaパッケージの下に置きます）</li>
          			<li>resources/ &#8211; すべてのテスト用の設定ファイルをここに置きます。（例：arquillian.xml）</li>
          		</ul></li>
          	</ul></li>
          	<li>pom.xml &#8211; Mavenのビルドファイルです。Mavenでどのようにプロジェクトをビルドするか定義します。</li>
          </ul>
          <p>プロジェクトジェネレータはまた、2つの <code>java</code> フォルダの下に、 <code>org.arquillian.example</code> というJavaパッケージを作成しています。 <code>java</code> フォルダ直下ではなく、このパッケージの下にJavaソースファイルを置いてください。</p>
          <p>さて、エディタで <code>pom.xml</code> を開いてください。XMLファイルには、基本的なプロジェクト情報、ビルドセクション、依存セクションが含まれているのが分かります。</p>
          <p class="info"><span>このプロジェクトは、Arquillianがそれぞれ最低限要求するバージョンであるJava 1.6とJUnit 4.8を使用するようにあらかじめ設定されていることに気づくでしょう。</span></p>
          <p class="warning"><span>Arquillianはまた、TestNG 5をサポートしています。しかしこのガイドでは、JUnitを使用します。</span></p>
          <p><strong>JUnitのdependencyより下の <code>&lt;dependency&gt;</code> 要素は、不要なので削除してもかまいません。</strong> 編集が終わったら、以下のようになっているはずです（少し整形しています）：</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#x000A;&lt;project xmlns="http://maven.apache.org/POM/4.0.0"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#x000A;    xsi:schemaLocation="&#x000A;        http://maven.apache.org/POM/4.0.0&#x000A;        http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;&#x000A;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</code>&#x000A;&#x000A;<code class="prettify">    &lt;groupId&gt;org.arquillian.example&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;arquillian-tutorial&lt;/artifactId&gt;&#x000A;    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;&#x000A;    &lt;packaging&gt;jar&lt;/packaging&gt;</code>&#x000A;&#x000A;<code class="prettify">    &lt;name&gt;arquillian-tutorial&lt;/name&gt;&#x000A;    &lt;url&gt;http://arquillian.org&lt;/url&gt;</code>&#x000A;&#x000A;<code class="prettify">    &lt;properties&gt;&#x000A;        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;&#x000A;    &lt;/properties&gt;</code>&#x000A;&#x000A;<code class="prettify">    &lt;build&gt;&#x000A;        &lt;plugins&gt;&#x000A;            &lt;plugin&gt;&#x000A;                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#x000A;                &lt;version&gt;2.3.2&lt;/version&gt;&#x000A;                &lt;configuration&gt;&#x000A;                    &lt;source&gt;1.6&lt;/source&gt;&#x000A;                    &lt;target&gt;1.6&lt;/target&gt;&#x000A;                &lt;/configuration&gt;&#x000A;            &lt;/plugin&gt;&#x000A;        &lt;/plugins&gt;&#x000A;    &lt;/build&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;junit&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;junit&lt;/artifactId&gt;&#x000A;            &lt;version&gt;4.12&lt;/version&gt;&#x000A;            &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/project&gt;</code></pre>
          <p>これからJava EE 7コンポーネントを書きます。そのため、Java EE 7 APIをクラスパスに追加する必要があります。そうすれば、これらのコンポーネントをコンパイルできます。</p>
          <p><code>pom.xml</code> ファイルをもう一度開き、そのXMLフラグメントを <code>&lt;dependencies&gt;</code> 要素の下に追加してください。 <code>&lt;dependencies&gt;</code> 要素追加後は、以下のようになります：</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependencies&gt;&#x000A;    &lt;dependency&gt;&#x000A;        &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;        &lt;version&gt;1.0.3.Final&lt;/version&gt;&#x000A;        &lt;type&gt;pom&lt;/type&gt;&#x000A;        &lt;scope&gt;provided&lt;/scope&gt;&#x000A;    &lt;/dependency&gt;&#x000A;    &lt;dependency&gt;&#x000A;        &lt;groupId&gt;junit&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;junit&lt;/artifactId&gt;&#x000A;        &lt;version&gt;4.12&lt;/version&gt;&#x000A;        &lt;scope&gt;test&lt;/scope&gt;&#x000A;    &lt;/dependency&gt;&#x000A;&lt;/dependencies&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>プロジェクトの基本は準備できました！ <a href="#open_the_project_in_eclipse">プロジェクトをEclipseで開く</a> に進んでください。コードを書きはじめます！</p>
          <h4 id="create_project_using_forge">Forgeでプロジェクトを生成する</h4>
          <p><a href="http://jboss.org/forge">JBoss Forge</a> は、標準ベースの環境で高速アプリケーション開発をするためのコマンドシェルです。別の見方をすれば、ドーピングしたMaven Archetypeのようなものです。</p>
          <p>Forgeのインストールは、比較的短い手順であり、このガイドでは、基礎を体験します。以下の簡単なステップに従ってインストールしてください：</p>
          <ol>
          	<li><a href="http://downloads.jboss.org/forge/releases/3.4.0.Final/forge-distribution-3.4.0.Final-offline.zip">Forgeをダウンロード</a></li>
          	<li>ダウンロードしたディストリビューションをディスクの任意の場所に展開します。展開されたフォルダを <code>$FORGE_HOME</code> と呼びます。<br />
            ホームディレクトリの <code>forge</code> というフォルダに配布物を展開したと仮定します。</li>
          	<li><code>$FORGE_HOME/bin</code> を（WindowsやLinux、Mac OSXの）パスに追加します。</li>
          </ol>
          <p>Unixベースのオペレーティングシステムでは、Forgeをパスに追加するというのは、一般的には、ユーザの$HOME/.bashrcまたは、$HOME/.profileを編集することになります。以下の環境変数をセットしてください：</p>
          <pre class="command"><code class="command">$ export FORGE_HOME=$HOME/forge/&#x000A;$ export PATH=$PATH:$FORGE_HOME/bin</code></pre>
          <p class="info"><span>Windowsでは、“コントロールパネル”を開き、右クリックして“システムのプロパティ”をクリックします。“詳細設定”タブを開き、“環境変数”をクリックします。そして、これらの二つのエントリを追加します。展開した配布物をすべてのユーザーがアクセスできる場所に置いていない限り、ユーザー変数にForgeを設定することをおすすめします。</span></p>
          <p>これでForgeがインストール（つまり、展開）されたので、コマンドプロンプト（シェル）を開き、 <code>forge</code> コマンドを実行してください：</p>
          <pre class="command"><code class="command">$ forge&#x000A;   _____&#x000A;  |  ___|__  _ __ __ _  ___&#x000A;  | |_ / _ \| `__/ _` |/ _ \  \\&#x000A;  |  _| (_) | | | (_| |  __/  //&#x000A;  |_|  \___/|_|  \__, |\___|&#x000A;                  |___/</code>&#x000A;&#x000A;<code class="command">[no project] ~ $</code></pre>
          <p>これだけです！Forgeが起動しました。さあ、プロジェクトを作る時です。</p>
          <p>Forgeシェル上で、新しいプロジェクトを生成するために、以下のコマンドを実行してください。これは、上で、Maven Archetypeで作成したプロジェクトとそっくりです：</p>
          <pre class="command"><code class="command">$ project-new --named arquillian-tutorial --topLevelPackage org.arquillian.example</code></pre>
          <p>このコマンドは、 <code>arquillian-tutorial</code> という MavenベースのJavaプロジェクトをカレントディレクトリの新規フォルダの下に生成します。</p>
          <p>Forgeが生成したこのプロジェクトのファイル構成を以下に示します：</p>
          <ul class="filetree">
          	<li>src/
          	<ul>
          		<li>main/
          		<ul>
          			<li>java/ &#8211; アプリケーションのすべてのJavaソースファイルをここに置きます。（Javaパッケージの下に置きます）</li>
          			<li>resources/ &#8211; アプリケーションの設定ファイルをここに置きます。
          			<ul>
          				<li>META-INF/
          				<ul>
          					<li>forge.xml &#8211; 空のForge設定ファイルです。</li>
          				</ul></li>
          			</ul></li>
          		</ul></li>
          		<li>test/
          		<ul>
          			<li>java/ &#8211; すべてのテスト用のJavaソースコードをここに置きます。（Javaパッケージの下に置きます）</li>
          			<li>resources/ &#8211; すべてのテスト用の設定ファイルをここに置きます。（例：arquillian.xml）</li>
          		</ul></li>
          	</ul></li>
          	<li>pom.xml &#8211; Mavenのビルドファイルです。Mavenでどのようにプロジェクトをビルドするか定義します。</li>
          </ul>
          <p>また、ForgeはプロジェクトフォルダをForgeシェルのカレントディレクトリにします。</p>
          <pre class="command"><code class="command">[arquillian-tutorial] arquillian-tutorial $</code></pre>
          <p>次に追加する必要があるのは、Java EE APIです。以下の <code>project add-dependency</code> コマンドでできます：</p>
          <pre class="command"><code class="command">$ project-add-dependencies org.jboss.spec:jboss-javaee-7.0:1.0.3.Final:provided:pom</code></pre>
          <p>また、Arquillianが最低限要求するバージョンである、JUnit 4.12をテストスコープの依存性として追加する必要があります：</p>
          <pre class="command"><code class="command">$ project-add-dependencies junit:junit:4.12:test</code></pre>
          <p>Forgeは、JBoss Communityリポジトリをpom.xmlファイルに追加します。このリポジトリはArquillianに関しては不要です。（しかし、JBoss Commuityリポジトリにしかない他のライブラリを利用しているならば、残しておくこともできます。）リポジトリを削除すると決めれば、以下のForgeのコマンドで簡単に実行できます：</p>
          <pre class="command"><code class="command">$ project-remove-repository --url http://repository.jboss.org/nexus/content/groups/public</code></pre>
          <p>Forgeが生成したpom.xmlを以下に示します：</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#x000A;&lt;project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;&#x000A;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#x000A;    &lt;groupId&gt;org.arquillian.tutorial&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;arquillian-tutorial&lt;/artifactId&gt;&#x000A;    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;&#x000A;    &lt;packaging&gt;war&lt;/packaging&gt;&#x000A;    &lt;properties&gt;&#x000A;    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;&#x000A;    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;&#x000A;    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;&#x000A;    &lt;/properties&gt;&#x000A;    &lt;dependencyManagement&gt;&#x000A;      &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;          &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;          &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;          &lt;version&gt;1.0.3.Final&lt;/version&gt;&#x000A;          &lt;type&gt;pom&lt;/type&gt;&#x000A;          &lt;scope&gt;provided&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;        &lt;dependency&gt;&#x000A;          &lt;groupId&gt;junit&lt;/groupId&gt;&#x000A;          &lt;artifactId&gt;junit&lt;/artifactId&gt;&#x000A;          &lt;version&gt;4.12&lt;/version&gt;&#x000A;          &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;      &lt;/dependencies&gt;&#x000A;    &lt;/dependencyManagement&gt;&#x000A;    &lt;dependencies&gt;&#x000A;      &lt;dependency&gt;&#x000A;        &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;        &lt;type&gt;pom&lt;/type&gt;&#x000A;        &lt;scope&gt;provided&lt;/scope&gt;&#x000A;      &lt;/dependency&gt;&#x000A;      &lt;dependency&gt;&#x000A;        &lt;groupId&gt;junit&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;junit&lt;/artifactId&gt;&#x000A;        &lt;scope&gt;test&lt;/scope&gt;&#x000A;      &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;    &lt;build&gt;&#x000A;      &lt;finalName&gt;arquillian-tutorial&lt;/finalName&gt;&#x000A;      &lt;plugins&gt;&#x000A;        &lt;plugin&gt;&#x000A;          &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;&#x000A;          &lt;version&gt;2.4&lt;/version&gt;&#x000A;          &lt;configuration&gt;&#x000A;            &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;&#x000A;          &lt;/configuration&gt;&#x000A;        &lt;/plugin&gt;&#x000A;      &lt;/plugins&gt;&#x000A;    &lt;/build&gt;&#x000A;&lt;/project&gt;</code></pre>
          <p>プロジェクトの基本は準備できました！Eclipseでプロジェクトを開きましょう。コードを書きはじめます！</p>
          <h3 id="&#12503;&#12525;&#12472;&#12455;&#12463;&#12488;&#12434;eclipse&#12391;&#38283;&#12367;">プロジェクトをEclipseで開く</h3>
          <p>Javaプロジェクトで開発するときは、EclipseのようなIDEを使うでしょう。だから、Arquillianは、IDEフレンドリーに設計されています。特別な設定をしなくてもArquillianテストをIDEから実行できます。IDEの利点をすぐに活用しましょう。</p>
          <p>Eclipseの起動から始めます。これはMavenプロジェクトなので、プロジェクトを開くには  <a href="http://eclipse.org/m2e">Maven Integration for Eclipse</a> (m2e)のインストールが必要です。</p>
          <h4>m2eプラグインのインストール</h4>
          <p>もしまだインストールしていなければ、簡単な方法は、 <a href="http://jboss.org/tools">JBoss Tools</a> をインストールすることです。次のステップに従ってEclipseマーケットプレイス（Eclipseのアプリケーションストアのようなもの）からインストールしてください。</p>
          <ol>
          	<li>メインメニューから、 <code>Help &gt; Eclipse Marketplace...</code> を選択</li>
          	<li>検索フィールドに&quot;jboss tools&quot;（引用符は除く）と入力し、Enterを押す</li>
          	<li>JBoss Tools (Indigo)のインストールボタンをクリック</li>
          	<li>インストールウィザードを完了して、再起動のプロンプトが表示されたら再起動する</li>
          </ol>
          <p>JBoss Tools はJava EEアプリケーション開発の快適な環境を提供します。心配しないで、これはそんなに重いプラグインではありません。</p>
          <p>しかし、余分なJBoss ToolsなしでMavenの統合をしたい場合は、下のステップに従ってください：</p>
          <ol>
          	<li>メインメニューから、 <code>Help &gt; Eclipse Marketplace...</code> を選択</li>
          	<li>検索フィールドに&quot;maven&quot;と入力し（引用符を除く）、Enterを押す</li>
          	<li>Maven Integration for Eclipseのインストールボタンをクリック</li>
          	<li>インストールウィザードを完了して、再起動のプロンプトが表示されたら再起動する</li>
          	<li>Maven Integration for Eclipse WTPについてステップを繰り返す</li>
          </ol>
          <h4>m2eを使ってプロジェクトをインポートする</h4>
          <p>Maven Integrationプラグインをインストールしたら、以下のステップでプロジェクトを開きます：</p>
          <ol>
          	<li>メインメニューから、 <code>File &gt; Import...</code> を選択</li>
          	<li>input sourceフィールドで&quot;existing maven&quot;（引用符を除く）と入力する</li>
          	<li>Existing Maven Projectsオプションを選択し、Nextボタンをクリックする</li>
          	<li>Browse&#8230;ボタンをクリックする</li>
          	<li>ファイルブラウザでプロジェクトフォルダへ移動して選択し、OKボタンをクリックする</li>
          	<li>Finishボタンをクリックして、プロジェクトを開く</li>
          </ol>
          <p>EclipseはMavenプロジェクトを認識し、プロジェクトナビゲータビューで開きます。プロジェクトを展開したら、次の画像と同様に見えるでしょう：</p>
          <p><img src="/images/guides/arquillian_tutorial_eclipse_project.png" alt="" /></p>
          <p>これで、ついに本題にたどり着きました！</p>
          <h3 id="&#12467;&#12531;&#12509;&#12540;&#12493;&#12531;&#12488;&#12434;&#20316;&#12427;">コンポーネントを作る</h3>
          <p>Arquillianテストを書くために、テスト対象のコードが必要です。余計なものがないところでArquillianテストをどのように実行するか学ぶために、ビジネスコンポーネントの作成から始めましょう。だんだん複雑なシナリオに進みます。</p>
          <p>IDEで、新しくJavaの <code>Greeter</code> クラスを <code>org.arquillian.example</code> パッケージに作成してください。内容を以下のように挨拶するロジックで置き換えてください：</p>
          <div class="filename">src/main/java/org/arquillian/example/Greeter.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import java.io.PrintStream;</code>&#x000A;&#x000A;<code class="prettify">/**&#x000A; * A component for creating personal greetings.&#x000A; */&#x000A;public class Greeter {&#x000A;    public void greet(PrintStream to, String name) {&#x000A;        to.println(createGreeting(name));&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    public String createGreeting(String name) {&#x000A;        return "Hello, " + name + "!";&#x000A;    }&#x000A;}</code></pre>
          <p>このクラスがCDI(Contexts and Dependency Injection) beanとして注入された際に、正しく振る舞うことを検証したいと考えています。もちろん、簡単にユニットテストを書くこともできます。しかしこのbeanは依存性注入やメッセージングのようなエンタープライズサービスを使用していて、コンテナ内で使用されなければならないということにしましょう（加えて、それに成長の機会を与えます ~;) ）。</p>
          <p>このクラスをCDI beanとして使うために、 <code>@Inject</code> アノテーションでテストに注入します。これはArquillianテストを必要とします！つまり、Arquillian APIをプロジェクトに追加する時です！</p>
          <h3 id="arquillian_api&#12434;&#36861;&#21152;&#12377;&#12427;">Arquillian APIを追加する</h3>
          <p>もう一度、プロジェクト直下にある <code>pom.xml</code> をエディタで開きます。Mavenにどのバージョンのアーティファクトを使うかを示します。Arquillianの推移的な依存性のためのBOM(Bill of Materials)またはバージョンマトリックスをインポートするため、以下のXMLフラグメントを、 <code>&lt;build&gt;</code> 要素の上に追加してください。</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependencyManagement&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.arquillian&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;arquillian-bom&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.1.13.Final&lt;/version&gt;&#x000A;            &lt;scope&gt;import&lt;/scope&gt;&#x000A;            &lt;type&gt;pom&lt;/type&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/dependencyManagement&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>次に、Arquillian-JUnitインテグレーションを加えるために、次のXMLフラグメントを最後の <code>&lt;dependency&gt;</code> 要素の下に追加してください：</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.arquillian.junit&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;arquillian-junit-container&lt;/artifactId&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>Arquillian-JUnitインテグレーションアーティファクトは、Arquillian CoreとShrinkWrapのAPIもテストクラスパスに追加します。これらの全ライブラリは、JUnit Arquillianテストを書き、コンパイルする際に必要です。</p>
          <p class="info"><span>JUnitの代わりにTestNGを使うためには、Arquillian JUnitインテグレーションをArquillian TestNGインテグレーションで置き換えてください。</span></p>
          <p>（オプション） <a href="https://community.jboss.org/wiki/WhatVersionOfSurefireShouldIUseToRunMyArquillianTestsInAMavenBuild">このFAQ</a> で説明しているように、MavenのSurefireプラグインをデフォルトのバージョンからアップグレードすることをお勧めします。Surefire Pluginのバージョンは、 <code>&lt;plugins&gt;</code> 要素内の、Maven Compiler Pluginの下に、以下の <code>&lt;plugin&gt;</code> 要素を加えると設定できます：</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;plugin&gt;&#x000A;    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;&#x000A;    &lt;version&gt;2.17&lt;/version&gt;&#x000A;&lt;/plugin&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>ここまでで、pom.xmlになにか問題があれば、 <a href="https://raw.github.com/arquillian/arquillian-examples/master/arquillian-tutorial/pom-no-container-profiles.xml">pom-no-container-profiles.xml</a> ファイルを <a href="https://github.com/arquillian/arquillian-examples/tree/master/arquillian-tutorial">サンプルプロジェクト</a> からダウンロードできるので、pom.xmlにリネームしてください。</p>
          <p><strong>最初のArquillianテストを書く準備ができました！</strong></p>
          <h3 id="arquillian&#12486;&#12473;&#12488;&#12434;&#26360;&#12367;">Arquillianテストを書く</h3>
          <p>Arquillianテストは、すこし余分なフレアのある、単なるユニットテストのように見えます。IDEに戻って一つ作成しましょう。</p>
          <p class="warning"><span>もし&quot;Project configuration is out of date with pom.xml&quot;というメッセージが表示されたら、プロジェクトを再同期するために右クリックしてProject &gt; Maven &gt; Update Project Configurationを選択してください.</span></p>
          <p>src/test/javaにて、@GreeterTest@ という新しいJUnitテストケースを作成し、パッケージ名を <code>org.arquillian.example</code> として始めます。力仕事はほとんどArquillianがやるので、よくあるsetupとtearDownメソッドは不要です。今のところ、次のようになります：</p>
          <div class="filename">src/test/java/org/arquillian/example/GreeterTest.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import org.junit.Assert;&#x000A;import org.junit.Test;</code>&#x000A;&#x000A;<code class="prettify">public class GreeterTest {&#x000A;    @Test&#x000A;    public void should_create_greeting() {&#x000A;        Assert.fail("Not yet implemented");&#x000A;    }&#x000A;}</code></pre>
          <p>では、フレアについてです。Arquillianテストケースは、以下の3点が必要です：</p>
          <ol>
          	<li>クラスへの <code>@RunWith(Arquillian.class)</code> アノテーションの付加</li>
          	<li><code>@Deployment</code> でアノテートされ、ShrinkWrapアーカイブを返すパブリックなスタティックメソッド</li>
          	<li><code>@Test</code> でアノテートされた、少なくとも一つのメソッド</li>
          </ol>
          <p><code>@RunWith</code> アノテーションは、JUnitに、Arquillianをテストコントローラとして使用することを伝えます。Arquillianはテストアーカイブ（つまり、マイクロデプロイメント）を受け取るために <code>@Deployment</code> アノテーションのついたパブリックなスタティックメソッドを探します。そしてマジックが起きて、それぞれの <code>@Test</code> メソッドはコンテナ環境内で実行されます。</p>
          <h4>テストアーカイブとは？</h4>
          <p>テストアーカイブの目的は、テストに必要なクラスとリソースを、クラスパスにあるそれ以外から隔離することです。通常のユニットテストとは異なり、Arquillianは単純にクラスパス上のすべてをタップしたりしません。その代わり、テストに必要なもの（もしクラスパス上のすべてと決めれば、それかもしれません）だけを含めます。このアーカイブは、 <a href="http://jboss.org/shrinkwrap">ShrinkWrap</a> を使って定義されます。これはアーカイブ（つまり、jar、war、ear）作成用のJava APIです。マイクロデプロイメントストラテジーにより、明確にテストしたいクラスにフォーカスできます。その結果として、テストは無駄のない状態のまま保たれます。</p>
          <p>一度ShrinkWrapアーカイブがサーバーにデプロイされると、それは現実のアーカイブになります。そのコンテナのデプロイヤーはそのアーカイブがShrinkWrapによってアーカイブされたことについてはまったく知りません。ShrinkWrapについては、一つだけ例外的な部分のあるJavaベースのビルドツールと考えることもできます。最適なケースでは、ディスクにアーカイブを書き込むことなくサーバーに送ります。それでもそれが作るのは、本物のアーカイブです。</p>
          <p class="info"><span>また、ShrinkWrapはアーティファクト（ライブラリ）の解決をサポートします。プログラム的に設定ファイルを作成し、テストアーカイブに追加します。ShrinkWrapのより詳細な説明は、 <a href="/guides/shrinkwrap_introduction">ShrinkWrap introduction</a> を参照してください。</span></p>
          <p>コードを下記のように置き換えて、Arquillianのフレアをテストに加えましょう：</p>
          <div class="filename">src/test/java/org/arquillian/example/GreeterTest.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import org.jboss.arquillian.container.test.api.Deployment;&#x000A;import org.jboss.arquillian.junit.Arquillian;&#x000A;import org.jboss.shrinkwrap.api.ShrinkWrap;&#x000A;import org.jboss.shrinkwrap.api.asset.EmptyAsset;&#x000A;import org.jboss.shrinkwrap.api.spec.JavaArchive;&#x000A;import org.junit.Assert;&#x000A;import org.junit.Test;&#x000A;import org.junit.runner.RunWith;</code>&#x000A;&#x000A;<code class="prettify">@RunWith(Arquillian.class)&#x000A;public class GreeterTest {</code>&#x000A;&#x000A;<code class="prettify">    @Deployment&#x000A;    public static JavaArchive createDeployment() {&#x000A;        return ShrinkWrap.create(JavaArchive.class)&#x000A;            .addClass(Greeter.class)&#x000A;            .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @Test&#x000A;    public void should_create_greeting() {&#x000A;        Assert.fail("Not yet implemented");&#x000A;    }&#x000A;}</code></pre>
          <p>ShrinkWrapを使って、Javaアーカイブ（jar）をデプロイメントとして定義しました。このアーカイブは、テスト対象の <code>Greeter</code> クラスと、META-INFディレクトリ内にこのアーカイブでCDIを有効にするための空のbeans.xmlファイルを含みます。</p>
          <p>もしテスト実行時にShrinkWrapが作成したアーカイブの内容を見たければ、アーカイブを返す前に内容を標準出力（つまり、コンソール）に出力することができます。</p>
          <pre class="prettify"><code class="prettify">@Deployment&#x000A;public static JavaArchive createDeployment() {&#x000A;    JavaArchive jar = ShrinkWrap.create(JavaArchive.class)&#x000A;        .addClass(Greeter.class)&#x000A;        .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");&#x000A;    System.out.println(jar.toString(true));&#x000A;    return jar;&#x000A;}</code></pre>
          <p>このコードは、テスト実行時に以下のように出力します：</p>
          <pre class="output"><code class="output">2ac9cd28-a71a-479a-a785-750b40221766.jar:&#x000A;/META-INF/&#x000A;/META-INF/beans.xml&#x000A;/org/&#x000A;/org/arquillian/&#x000A;/org/arquillian/example/&#x000A;/org/arquillian/example/Greeter.class</code></pre>
          <p>明示的に指定しなかったので、ShrinkWrapは、このアーカイブにランダムな名前を割り当てています。別の <a href="/guides/getting_started_rinse_and_repeat/#export_the_deployment">Getting Started: Rinse and Repeat</a> ガイドで、アーカイブを特定する他の方法を説明します。</p>
          <p>ここでやるべきことは、テストメソッドの上で <code>Greeter</code> インスタンスを直接フィールドに注入し、未実装のテストメソッドをそのbeanの振る舞いを検証するものに置き換えることです。読者に和んでもらえるように、コンソールにも挨拶を出力します。テストメソッドを以下のように置き換えて <code>javax.inject.Inject</code> のインポート文を追加してください。</p>
          <div class="filename">src/test/java/org/arquillian/example/GreeterTest.java</div>
          <pre class="prettify"><code class="prettify">// clip&#x000A;import javax.inject.Inject;&#x000A;// clip</code>&#x000A;&#x000A;<code class="prettify">@Inject&#x000A;Greeter greeter;</code>&#x000A;&#x000A;<code class="prettify">@Test&#x000A;public void should_create_greeting() {&#x000A;    Assert.assertEquals("Hello, Earthling!",&#x000A;        greeter.createGreeting("Earthling"));&#x000A;    greeter.greet(System.out, "Earthling");&#x000A;}</code></pre>
          <p>編集が終わったらどのようにテストがどうなっているかというと：</p>
          <div class="filename">src/test/java/org/arquillian/example/GreeterTest.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import javax.inject.Inject;&#x000A;import org.jboss.arquillian.container.test.api.Deployment;&#x000A;import org.jboss.arquillian.junit.Arquillian;&#x000A;import org.jboss.shrinkwrap.api.ShrinkWrap;&#x000A;import org.jboss.shrinkwrap.api.asset.EmptyAsset;&#x000A;import org.jboss.shrinkwrap.api.spec.JavaArchive;&#x000A;import org.junit.Test;&#x000A;import org.junit.Assert;&#x000A;import org.junit.runner.RunWith;</code>&#x000A;&#x000A;<code class="prettify">@RunWith(Arquillian.class)&#x000A;public class GreeterTest {</code>&#x000A;&#x000A;<code class="prettify">    @Deployment&#x000A;    public static JavaArchive createDeployment() {&#x000A;        return ShrinkWrap.create(JavaArchive.class)&#x000A;            .addClass(Greeter.class)&#x000A;            .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @Inject&#x000A;    Greeter greeter;</code>&#x000A;&#x000A;<code class="prettify">    @Test&#x000A;    public void should_create_greeting() {&#x000A;        Assert.assertEquals("Hello, Earthling!",&#x000A;            greeter.createGreeting("Earthling"));&#x000A;        greeter.greet(System.out, "Earthling");&#x000A;    }&#x000A;}</code></pre>
          <p>最初のArquillianテストが書けました！</p>
          <p>ああ、でもどのように動かすのか、疑問に思ってるかもしれませんね ~:S “ユニットテストみたいに”と思っているなら、それは正解です！しかし、クラスパスにコンテナアダプタを追加する必要があります。</p>
          <h3 id="&#12467;&#12531;&#12486;&#12490;&#12450;&#12480;&#12503;&#12479;&#12434;&#36861;&#21152;&#12377;&#12427;">コンテナアダプタを追加する</h3>
          <p>これまで、コンテナでテストすることについて数多く語ってきましたが、今のところどれを使うかは検討しませんでした。それは、実行時に決定することだからです。</p>
          <p>Arquillianは、テストクラスパスで利用可能なコンテナの中からターゲットコンテナを選択します。 <em>コンテナアダプタ</em> は、コンテナをコントロールし、通信するものです（コンテナそのものではありません）。だから、プロジェクトにもっとライブラリを追加します。</p>
          <p>Arquillianのテストは、テストで使用するプログラミングモデルと互換性があるならば（つまり、コンテナ用のArquillianアダプタがあるならば）どんなコンテナでも実行できます。私達のテストは、CDIプログラミングモデルを使用しているので、CDIをサポートするコンテナを使う必要があります。開発中は高速にターンアラウンドしたいので、Weld EEエンベデッドコンテナから始めましょう。</p>
          <p>また <code>pom.xml</code> を開き、他の <code>&lt;dependency&gt;</code> 要素の下に、 以下の依存性のグループを追加してください：</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.arquillian.container&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;arquillian-weld-ee-embedded-1.1&lt;/artifactId&gt;&#x000A;    &lt;version&gt;1.0.0.CR9&lt;/version&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.weld&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;weld-core&lt;/artifactId&gt;&#x000A;    &lt;version&gt;2.3.5.Final&lt;/version&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;&#x000A;    &lt;version&gt;1.6.4&lt;/version&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>まとめると、Arquillianを使うには、（JUnitと共に）以下の3つのライブラリが必要です：</p>
          <ol>
          	<li>Arquillian JUnit インテグレーション</li>
          	<li>ターゲットコンテナ向けのArquillianコンテナアダプタ</li>
          	<li>コンテナのランタイム（エンベデッドコンテナ向け）または、コンテナのクライアント（リモートコンテナ向け）</li>
          </ol>
          <p>このサンプルでは、エンベデッドコンテナを使っています。それで、コンテナのランタイムであるWeldが必要です。</p>
          <p>さて、テストに戻ります。</p>
          <h3 id="arquillian&#12486;&#12473;&#12488;&#12398;&#23455;&#34892;">Arquillianテストの実行</h3>
          <p>Arquillianに必要なすべてのライブラリをクラスパスに追加したら、ユニットテストのようにArquillianテストを実行できます。IDEから実行することも、ビルドスクリプトやどんなテストプラグインから実行することもできます。Eclipseから実行してみましょう。</p>
          <p>IDEのウィンドウから、Package Explorer（またはエディタ）のGreeterTest.javaを右クリックしてコンテキストメニューからRun As &gt; JUnit Testを選択します。</p>
          <p><img src="/images/guides/arquillian_tutorial_run_junit_test.png" alt="" /></p>
          <p>テストを実行したら、以下の行がコンソールに出力されるでしょう：</p>
          <pre class="output"><code class="output">21 [main] INFO org.jboss.weld.Version - WELD-000900 2.3.5 (Final)&#x000A;Hello, Earthling!</code></pre>
          <p>それから、JUnitビューが表示され、 <strong class="greenbar">グリーンバー</strong> が現れます！</p>
          <p><img src="/images/guides/arquillian_tutorial_junit_green_bar.png" alt="" /></p>
          <p>コマンドラインから、Mavenでテストを実行することもできます：</p>
          <pre class="command"><code class="command">$ mvn test</code></pre>
          <p>以下の行がコンソールに出力されるでしょう：</p>
          <pre class="output"><code class="output">-------------------------------------------------------&#x000A;T E S T S&#x000A;-------------------------------------------------------&#x000A;Running org.arquillian.example.GreeterTest&#x000A;19 [main] INFO org.jboss.weld.Version - WELD-000900 2.3.5 (Final)&#x000A;Hello, Earthling!&#x000A;Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.907 sec</code></pre>
          <p><strong>おめでとう！</strong> Arquillianを使って、最初の <strong class="greenbar">グリーンバー</strong> に到達しました！</p>
          <h3 id="&#35443;&#12375;&#12367;&#35211;&#12427;">詳しく見る</h3>
          <p>CDIが実際にはどのように動作しているかわかりますか？わかっていることは、Arquillianは、 <code>Greeter</code> クラスの新しいインスタンスを作成し、CDIとは無関係にテストに注入することだけです。そこを調べてみましょう。</p>
          <p><code>org.arquillian.example</code> パッケージに <code>PhraseBuilder</code> という新しいCDI beanを作成します。これは、テンプレートからフレーズを生成します。</p>
          <div class="filename">src/main/java/org/arquillian/example/PhraseBuilder.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import java.text.MessageFormat;&#x000A;import java.util.HashMap;&#x000A;import java.util.Map;&#x000A;import javax.annotation.PostConstruct;</code>&#x000A;&#x000A;<code class="prettify">public class PhraseBuilder {&#x000A;    private Map&lt;String, String&gt; templates;</code>&#x000A;&#x000A;<code class="prettify">    public String buildPhrase(String id, Object... args) {&#x000A;        return MessageFormat.format(templates.get(id), args);&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @PostConstruct&#x000A;    public void initialize() {&#x000A;        templates = new HashMap&lt;String, String&gt;();&#x000A;        templates.put("hello", "Hello, {0}!");&#x000A;    }&#x000A;}</code></pre>
          <p>次に、 <code>Greeter</code> クラスを開き、コンストラクタインジェクションを使って <code>PhraseBuilder</code> を注入する、新しいコンストラクタを作成します。それから、挨拶を作るタスクを注入されたbeanに移譲します。</p>
          <div class="filename">src/main/java/org/arquillian/example/Greeter.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import java.io.PrintStream;&#x000A;import javax.inject.Inject;</code>&#x000A;&#x000A;<code class="prettify">public class Greeter {</code>&#x000A;&#x000A;<code class="prettify">    private PhraseBuilder phraseBuilder;</code>&#x000A;&#x000A;<code class="prettify">    @Inject&#x000A;    public Greeter(PhraseBuilder phraseBuilder) {&#x000A;        this.phraseBuilder = phraseBuilder;&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    public void greet(PrintStream to, String name) {&#x000A;        to.println(createGreeting(name));&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    public String createGreeting(String name) {&#x000A;        return phraseBuilder.buildPhrase("hello", name);&#x000A;    }&#x000A;}</code></pre>
          <p>さて、テスト実行のために、 <code>PhraseBuilder</code> のインスタンスが作成され、 その <code>@PostConstruct</code> メソッドが実行されなければならず、 <code>Greeter</code> のインスタンスが作成されるときに <code>Greeter</code> のコンストラクタに注入されなければなりません。これらがすべてが起きれば、CDIが動作していることを確認できます。</p>
          <p>最後のステップです。新しいクラスを作ったので、テスト時に <code>@Deployment</code> メソッドが返すアーカイブにそれを加える必要があります。簡単に、以下の行を変更してください：</p>
          <pre class="prettify"><code class="prettify">.addClass(Greeter.class)</code></pre>
          <p>&#8230;このように：</p>
          <pre class="prettify"><code class="prettify">.addClasses(Greeter.class, PhraseBuilder.class)</code></pre>
          <p>もう一度テストを実行してください。また、 <strong class="greenbar">グリーンバー</strong> が表示されます！気持ちいいでしょう？</p>
          <h3 id="&#12486;&#12473;&#12488;&#12434;&#12487;&#12496;&#12483;&#12464;&#12377;&#12427;">テストをデバッグする</h3>
          <p>これは短い章になるでしょう。なぜか？Arquillianのテストは、とても直接的なので、まさにユニットテストをデバッグするようにデバッグします。テストコードでも、アプリケーションコードでも、どこにでもブレークポイントを追加するだけです。それから、ファイルを右クリックして、Debug As &gt; JUnit Testを選択します。これでコンテナでデバッグができます！楽しく見て回ってください！</p>
          <p><img src="/images/guides/arquillian_tutorial_debugging_test.png" alt="" /></p>
          <p class="warning"><span>リモートコンテナを使っている場合、Debug As ではブレークポイントが有効になりません。その代わりに、コンテナをデバッグモードで起動して、デバッガをアタッチする必要があります。これは、テストが元々のテストランナーとは異なるJVM上で実行されているためです。</span></p>
          <p>いま経験したように、ArquillianはCDIアプリケーションのテストには理想的なツールです。それはCDI環境のロードを行い、テストに直接、beanを注入します。もっとも良い点は、エンベデッドCDIコンテナを使っていると、ユニットテストのように素早く実行することです。これで要望が満たせたら、このチュートリアルを抜けてテストを書き始めてもかまいません。</p>
          <p><strong>でもちょっと待って！</strong> エンベデッドコンテナはすべてのストーリーを語ってくれるでしょうか？コンポーネントは、完全なコンテナ上で実行しても動作するでしょうか？</p>
          <p>Arquillianの恩恵の一つは、同じテストを互換性のある異なるコンテナ上で実行できることです。別のエンベデッドコンテナや、スタンドアロンのコンテナであっても。実際のコンテナを使いたいなら、読み進めてください。</p>
          <h3 id="&#12373;&#12425;&#12395;&#12467;&#12531;&#12486;&#12490;&#12434;&#36861;&#21152;&#12377;&#12427;">さらにコンテナを追加する</h3>
          <p>以前に学んだように、Arquillianはクラスパス上のコンテナアダプタを元に、コンテナを選択します。別のコンテナに切り替えるには、クラスパス上のコンテナアダプタをテストの前に変更するだけです。</p>
          <p class="important"><span>テスト実行の時点では、クラスパス上にコンテナアダプタは一つだけ存在できます。Arquillianは、複数のアダプタを見つけたら、テストの実行を中止します。</span></p>
          <p>クラスパス上のライブラリを切り替える一つの方法は、毎回手動で <code>pom.xml</code> に依存の定義を編集することです。でもそれは退屈なだけです。おすすめのアプローチは、Mavenのプロファイルを使うことです。</p>
          <h4>Mavenのプロファイルを設定する</h4>
          <p>Mavenのプロファイルを使えば、依存をグループに入れて区別することができます。コンテナアダプタと関連するアーティファクト毎に、一つのグループです。テスト実行時に、対象のコンテナを選択するためにグループのうちの一つを有効化します。そのプロファイルはコマンドラインフラグ（-P）や、IDEのプリファレンスから、有効化されます。</p>
          <p><code>pom.xml</code> を開き、以下のXMLを <code>&lt;dependencies&gt;</code> 要素直下に追加して、Weld EEエンベデッド用の新しいプロファイルを作ります：</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;profiles&gt;&#x000A;    &lt;profile&gt;&#x000A;        &lt;id&gt;arquillian-weld-ee-embedded&lt;/id&gt;&#x000A;        &lt;dependencies&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.0.3.Final&lt;/version&gt;&#x000A;                &lt;type&gt;pom&lt;/type&gt;&#x000A;                &lt;scope&gt;provided&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.arquillian.container&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;arquillian-weld-ee-embedded-1.1&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.0.0.CR9&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.weld&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;weld-core&lt;/artifactId&gt;&#x000A;                &lt;version&gt;2.3.5.Final&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.6.4&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;        &lt;/dependencies&gt;&#x000A;    &lt;/profile&gt;&#x000A;&lt;/profiles&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>次に、 <code>jboss-javaee-7.0</code> への依存とWeld EEエンベデッドコンテナアダプタへの依存をメインの <code>&lt;dependencies&gt;</code> セクションから <strong>削除します</strong> 。編集後に、 <code>&lt;dependencies&gt;</code> と <code>&lt;profiles&gt;</code> セクションがどうなっているかを以下に示します：</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependencies&gt;&#x000A;    &lt;dependency&gt;&#x000A;        &lt;groupId&gt;junit&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;junit&lt;/artifactId&gt;&#x000A;        &lt;version&gt;4.12&lt;/version&gt;&#x000A;        &lt;scope&gt;test&lt;/scope&gt;&#x000A;    &lt;/dependency&gt;&#x000A;    &lt;dependency&gt;&#x000A;        &lt;groupId&gt;org.jboss.arquillian.junit&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;arquillian-junit-container&lt;/artifactId&gt;&#x000A;        &lt;scope&gt;test&lt;/scope&gt;&#x000A;    &lt;/dependency&gt;&#x000A;&lt;/dependencies&gt;&#x000A;&lt;profiles&gt;&#x000A;    &lt;profile&gt;&#x000A;        &lt;id&gt;arquillian-weld-ee-embedded&lt;/id&gt;&#x000A;        &lt;dependencies&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.0.3.Final&lt;/version&gt;&#x000A;                &lt;type&gt;pom&lt;/type&gt;&#x000A;                &lt;scope&gt;provided&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.arquillian.container&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;arquillian-weld-ee-embedded-1.1&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.0.0.CR9&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.weld&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;weld-core&lt;/artifactId&gt;&#x000A;                &lt;version&gt;2.3.5.Final&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.6.4&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;        &lt;/dependencies&gt;&#x000A;    &lt;/profile&gt;&#x000A;&lt;/profiles&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p class="info"><span>エンベデッドGlassFishなどいくつかのコンテナは、Java EE APIを提供しているので、これらのライブラリへの依存はプロファイル以下に移動しました。同時に両方が同じクラスパス上にあると、コンフリクトを引き起こします。それで、このクラスパスのダンスをしなければなりません。</span></p>
          <p>ここで2つのプロファイルを <code>pom.xml</code> の <code>&lt;profiles&gt;</code> 要素内に追加します。一つ目は、 <a href="http://embedded-glassfish.java.net">Embedded GlassFish</a> ：</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;profile&gt;&#x000A;    &lt;id&gt;arquillian-glassfish-embedded&lt;/id&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.arquillian.container&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;arquillian-glassfish-embedded-3.1&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.0.0.CR4&lt;/version&gt;&#x000A;            &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.glassfish.main.extras&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;glassfish-embedded-all&lt;/artifactId&gt;&#x000A;            &lt;version&gt;3.1.2&lt;/version&gt;&#x000A;            &lt;scope&gt;provided&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/profile&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>もう一つは、JBoss AS マネージド：</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;profile&gt;&#x000A;    &lt;id&gt;arquillian-jbossas-managed&lt;/id&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.0.3.Final&lt;/version&gt;&#x000A;            &lt;type&gt;pom&lt;/type&gt;&#x000A;            &lt;scope&gt;provided&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.as&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;jboss-as-arquillian-container-managed&lt;/artifactId&gt;&#x000A;            &lt;version&gt;7.1.1.Final&lt;/version&gt;&#x000A;            &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.arquillian.protocol&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;arquillian-protocol-servlet&lt;/artifactId&gt;&#x000A;            &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/profile&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p class="info"><span>デフォルトでは、JBoss AS 7はテストアーカイブをJMXプロトコルを使ってデプロイします。すでに、今後必要になったときのために、このサーブレットプロトコルの依存性を <code>arquillian-jbossas-managed</code> プロファイルに追加しています。こちらに変更する方法は、&quot;このFAQ&quot;:https://community.jboss.org/wiki/WhyDoIGetNoActiveContextsForScopeTypeWhenTestingOnJBossAS7 を参照してください。</span></p>
          <p>これで、このテストは3つのコンテナの中から一つを選んで実行できるようになりました。</p>
          <p>ここまでで、pom.xmlになにか問題があれば、 <a href="https://raw.github.com/arquillian/arquillian-examples/master/arquillian-tutorial/pom.xml">pom.xml</a> ファイルを <a href="https://github.com/arquillian/arquillian-examples/tree/master/arquillian-tutorial">サンプルプロジェクト</a> からダウンロードできます。</p>
          <h3 id="&#12467;&#12531;&#12486;&#12490;&#12434;&#36234;&#12360;&#12390;&#12486;&#12473;&#12488;&#12377;&#12427;">コンテナを越えてテストする</h3>
          <p>Eclipseでプロジェクトをリフレッシュしたら、ビルドされないことに気づくでしょう。これは、コンテナプロファイルのどれかを有効にする必要があるからです。前の状態を復元するためにWeld EEエンベデッドプロファイルを有効にしましょう。</p>
          <p>EclipseでMavenプロファイルを有効にするには、2つのやり方があります（ <a href="http://www.eclipse.org/m2e">Maven Integration for Eclipse</a> を前提としています）：</p>
          <ol>
          	<li>手動で設定（標準的なやり方）</li>
          	<li>Maven profile selector (JBoss Tools)</li>
          </ol>
          <h4>有効なMavenプロファイルのセット：手動で設定</h4>
          <p>手動で有効なプロファイルをセットするには、以下のステップに従います：</p>
          <ol>
          	<li>プロジェクトを右クリックして、Propertiesを選択する</li>
          	<li>Maven propertiesを選択する</li>
          	<li>Active Maven Profilesフィールドに、プロファイルIDを入力する（例えば、 <code>arquillian-weld-ee-embedded</code> ）</li>
          	<li>OKボタンをクリックし、プロジェクトの変更を承諾する</li>
          </ol>
          <p>以下が、プロファイルを有効にしたMaven properties画面です：</p>
          <p><img src="/images/guides/arquillian_tutorial_maven_properties.png" alt="" /></p>
          <h4>有効なMavenプロファイルのセット：Maven profile selector</h4>
          <p>JBoss Toolsがインストール済みなら、有効なプロファイルの選択はより簡単です：</p>
          <ol>
          	<li>プロジェクトを右クリックし、 Maven &gt; Select Active Profiles&#8230; を選択する<br />
          （あるいは、 Ctrl+Shift+P のキーバインディングか、ツールバーのボタンも使えます）</li>
          	<li>有効化したいプロファイルの隣のチェックボックスをチェックする（例えば、 <code>arquillian-weld-ee-embedded</code> ）</li>
          	<li>OKボタンをクリックする</li>
          </ol>
          <p>次が、有効化したプロファイルを表示しているMaven profile selectorダイアログです：</p>
          <p><img src="/images/guides/arquillian_tutorial_maven_profile_selector.png" alt="" /></p>
          <p>一度プロファイルを有効化したら、コンパイラのエラーは消え、テストはまた成功するはずです。</p>
          <p>プロファイルを有功にする別の方法としては、どれかのプロファイルをデフォルトで有効になるように設定します。 プロファイル定義に <code>&lt;activation&gt;</code> エレメントを追加して、Weld EE Embeddedプロファイルをデフォルトにしてみましょう：</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;profile&gt;&#x000A;    &lt;id&gt;arquillian-weld-ee-embedded&lt;/id&gt;&#x000A;    &lt;activation&gt;&#x000A;        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;&#x000A;    &lt;/activation&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;!-- hidden --&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/profile&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>自動的にプロファイルが選択されるようになったので、もうIDEでプロファイルを選択する必要はなくなりました。しかし、他のプロファイル（だけ）を使う場合、まずこのプロファイルをデフォルトからの解除が必要です。</p>
          <h4>コンテナを切り替える</h4>
          <p>すでにこのテストがWeld EEエンベデッドで成功することはおわかりですね。上のステップを繰り返してGlassFishエンベデッドに切り替え、今回は <code>arquillian-glassfish-embedded</code> だけを有効にします。</p>
          <p class="info"><span>Weld EEエンベデッドをデフォルトにする場合、他のプロファイルを確実に無効にしてください。Mave Profle selectorで、エントリを右クリックして、コンテキストメニューからDeactiveを選択すると、プロファイルを無効にできます。これで、プロファイル名の前にエクスクラメーションマークが表示されます（例えば、 <code>!arquillian-weld-ee-embedded</code> ）。複数のファイルが選択されている（または無効化されている）のは、コンマで分けられています。</span></p>
          <p>テストをまた実行。GlassFishがコンソールで起動するのが見えて…今度も <strong class="greenbar">グリーンバー</strong> です！</p>
          <p>これで、同じテストを異なる二つのエンベデッドコンテナで実行しました。CDIコンテナ（Weld）とJava EEコンテナ（GlassFish）です。どちらも実行はプロセス内です。純粋な環境でコンポーネントが正常に動作するか本当に確認するには、スタンドアロンのコンテナが必要です。JBoss ASを使うよう切り替えましょう。</p>
          <p>スタンドアロンのJBoss ASインスタンスでテストするには、まず初めに次のどちらかのセットアップが必要です：</p>
          <ol>
          	<li>ダウンロードしてプロジェクト外の場所に展開する</li>
          	<li>ビルド中にMavenでダウンロード、展開する</li>
          </ol>
          <p>プロジェクト外でJBoss AS 7をセットアップするには、以下の手順に従ってください：</p>
          <ol>
          	<li><a href="http://jboss.org/jbossas/downloads">JBoss AS 7をダウンロードする</a><br />
          （選んだバージョンが、 <code>pom.xml</code> の <code>&lt;artifactId&gt;jboss-as-arquillian-container-managed&lt;/artifactId&gt;</code> で定義しているバージョンとあっていることを確認してください）</li>
          	<li>アーカイブを展開する</li>
          	<li>（オプション）展開したディレクトリのパスを <code>JBOSS_HOME</code> 環境変数にセット</li>
          </ol>
          <p>もしJBoss ASがインストール済み（つまり、展開済み）で、 <code>JBOSS_HOME</code> 環境変数がその場所を指し示しているなら、 <code>arquillian-jbossas-managed</code> プロファイルを有効にして、テストを実行できます。コンソールではJBoss ASが起動しているのが見えて…また <strong class="greenbar">グリーンバー</strong> です！</p>
          <p class="info"><span>標準出力に出力されるメッセージは、コンソールではなくサーバーログに出力されるので、そちらで見てください。</span></p>
          <p>Mavenでこのタスクを実行したい場合（オプション）、 <code>arquillian-jbossas-managed</code> プロファイルの <code>&lt;id&gt;</code> 要素の後に、以下のXMLフラグメントを追加してください：</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;build&gt;&#x000A;    &lt;plugins&gt;&#x000A;        &lt;plugin&gt;&#x000A;            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;&#x000A;            &lt;executions&gt;&#x000A;                &lt;execution&gt;&#x000A;                    &lt;id&gt;unpack&lt;/id&gt;&#x000A;                    &lt;phase&gt;process-test-classes&lt;/phase&gt;&#x000A;                    &lt;goals&gt;&#x000A;                        &lt;goal&gt;unpack&lt;/goal&gt;&#x000A;                    &lt;/goals&gt;&#x000A;                    &lt;configuration&gt;&#x000A;                        &lt;artifactItems&gt;&#x000A;                            &lt;artifactItem&gt;&#x000A;                                &lt;groupId&gt;org.jboss.as&lt;/groupId&gt;&#x000A;                                &lt;artifactId&gt;jboss-as-dist&lt;/artifactId&gt;&#x000A;                                &lt;version&gt;7.1.1.Final&lt;/version&gt;&#x000A;                                &lt;type&gt;zip&lt;/type&gt;&#x000A;                                &lt;overWrite&gt;false&lt;/overWrite&gt;&#x000A;                                &lt;outputDirectory&gt;target&lt;/outputDirectory&gt;&#x000A;                            &lt;/artifactItem&gt;&#x000A;                        &lt;/artifactItems&gt;&#x000A;                    &lt;/configuration&gt;&#x000A;                &lt;/execution&gt;&#x000A;            &lt;/executions&gt;&#x000A;        &lt;/plugin&gt;&#x000A;    &lt;/plugins&gt;&#x000A;&lt;/build&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>MavenでダウンロードしたJBoss AS 7マネージドインスタンスをターゲットにするには、もう少しArquillianに設定が必要です。以下の設定ファイルを作成し、 <code>jbossHome</code> プロパティの値を、JBoss AS 7がインストールされた場所にします。Maven依存プラグインを使っている場合は、場所は、 <code>target/jboss-as-7.1.1.Final</code> です。</p>
          <div class="filename">src/test/resources/arquillian.xml</div>
          <pre class="prettify"><code class="prettify">&lt;arquillian xmlns="http://jboss.org/schema/arquillian"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#x000A;    xsi:schemaLocation="&#x000A;        http://jboss.org/schema/arquillian&#x000A;        http://jboss.org/schema/arquillian/arquillian_1_0.xsd"&gt;&#x000A;    &lt;container qualifier="jbossas-managed" default="true"&gt;&#x000A;        &lt;configuration&gt;&#x000A;            &lt;property name="jbossHome"&gt;target/jboss-as-7.1.1.Final&lt;/property&gt;&#x000A;        &lt;/configuration&gt;&#x000A;    &lt;/container&gt;&#x000A;&lt;/arquillian&gt;</code></pre>
          <p>さて、有効なMavenプロファイルを <code>arquillian-jbossas-managed</code> に変更して、またテストを実行します。コンソールでJBoss ASの起動が見えて…またもや <strong class="greenbar">グリーンバー</strong> です！</p>
          <p>これは <em>同じ</em> テストです。今回は完全なJava EEコンテナで実行しました。Arquillianはテストをパッケージ化して、Java EEアーカイブとしてコンテナにデプロイし、リモートでテストを実行し、結果を取得したのち、EclipseのJUnitビュー（またはMavenのsurefire results）に伝えます。</p>
          <p>Arquillianをより深く知りたい場合は、 <a href="/guides/getting_started_rinse_and_repeat">Getting Started: Rinse and Repeat</a> ガイドへどうぞ。Arquillianを自動的に設定するためのForgeの使い方については、 <a href="/guides/get_started_faster_with_forge">Get Started Faster with Forge</a> を読んでください。</p>
          <h3 id="share">Share the Knowledge</h3>
          <p>Find this guide useful?</p>
          <p class="post_to_twitter"><a href="http://twitter.com/home/?status=Just%20read%20the%20%23Arquillian%20Getting%20Started%20guide%20and%20got%20a%20%23greenbar!%20Get%20yours.%20http://arquillian.org/guides/getting_started_ja/"><img src="/images/post_to_twitter.png" alt="" /></a></p>
          <div class="g-plusone" data-size="tall"></div>
          <p>There&#8217;s a lot more about Arquillian to cover. If you&#8217;re ready to learn more, check out the <a href="/guides">other available guides</a>.</p>
          <h4>Feedback</h4>
          <p>Find a bug in the guide? Something missing? You can fix it by <a href="http://github.com/arquillian/arquillian.github.com">forking this website</a>, making the correction and <a href="http://help.github.com/send-pull-requests">sending a pull request</a>. If you&#8217;re just plain stuck, feel free to ask a question in the <a href="http://community.jboss.org/en/arquillian?view=discussions">user discussion forum</a>.</p>
          <h4>Recent Changelog</h4>
          <ul>
            <li>
              Feb 21, 2017:
              Adds announcement for cube 1.0.0.alpha18
              <em>by Alex Soto</em>
            </li>
          </ul>
          <p>
            <a href="https://github.com/arquillian/arquillian.github.io/commits/develop/guides/getting_started_ja.textile">See full history &raquo;</a>
          </p>
        </div>
        <div id="sidebar">
          <div id="toc">
            <h3 class="chapter_header">Chapters</h3>
            <ol class="chapters">
              <li>
                <a href="#&#21069;&#25552;" id="前提_link">前提</a>
              </li>
              <li>
                <a href="#&#26032;&#12375;&#12356;&#12503;&#12525;&#12472;&#12455;&#12463;&#12488;&#12434;&#20316;&#25104;&#12377;&#12427;" id="新しいプロジェクトを作成する_link">新しいプロジェクトを作成する</a>
              </li>
              <li>
                <a href="#&#12503;&#12525;&#12472;&#12455;&#12463;&#12488;&#12434;eclipse&#12391;&#38283;&#12367;" id="プロジェクトをeclipseで開く_link">プロジェクトをEclipseで開く</a>
              </li>
              <li>
                <a href="#&#12467;&#12531;&#12509;&#12540;&#12493;&#12531;&#12488;&#12434;&#20316;&#12427;" id="コンポーネントを作る_link">コンポーネントを作る</a>
              </li>
              <li>
                <a href="#arquillian_api&#12434;&#36861;&#21152;&#12377;&#12427;" id="arquillian_apiを追加する_link">Arquillian APIを追加する</a>
              </li>
              <li>
                <a href="#arquillian&#12486;&#12473;&#12488;&#12434;&#26360;&#12367;" id="arquillianテストを書く_link">Arquillianテストを書く</a>
              </li>
              <li>
                <a href="#&#12467;&#12531;&#12486;&#12490;&#12450;&#12480;&#12503;&#12479;&#12434;&#36861;&#21152;&#12377;&#12427;" id="コンテナアダプタを追加する_link">コンテナアダプタを追加する</a>
              </li>
              <li>
                <a href="#arquillian&#12486;&#12473;&#12488;&#12398;&#23455;&#34892;" id="arquillianテストの実行_link">Arquillianテストの実行</a>
              </li>
              <li>
                <a href="#&#35443;&#12375;&#12367;&#35211;&#12427;" id="詳しく見る_link">詳しく見る</a>
              </li>
              <li>
                <a href="#&#12486;&#12473;&#12488;&#12434;&#12487;&#12496;&#12483;&#12464;&#12377;&#12427;" id="テストをデバッグする_link">テストをデバッグする</a>
              </li>
              <li>
                <a href="#&#12373;&#12425;&#12395;&#12467;&#12531;&#12486;&#12490;&#12434;&#36861;&#21152;&#12377;&#12427;" id="さらにコンテナを追加する_link">さらにコンテナを追加する</a>
              </li>
              <li>
                <a href="#&#12467;&#12531;&#12486;&#12490;&#12434;&#36234;&#12360;&#12390;&#12486;&#12473;&#12488;&#12377;&#12427;" id="コンテナを越えてテストする_link">コンテナを越えてテストする</a>
              </li>
              <li>
                <a href="#share" id="share_link">Share the Knowledge</a>
              </li>
            </ol>
          </div>
        </div>
        <script>
          $(window).load(function() { activateScrollingToc(['前提', '新しいプロジェクトを作成する', 'プロジェクトをeclipseで開く', 'コンポーネントを作る', 'arquillian_apiを追加する', 'arquillianテストを書く', 'コンテナアダプタを追加する', 'arquillianテストの実行', '詳しく見る', 'テストをデバッグする', 'さらにコンテナを追加する', 'コンテナを越えてテストする', 'share']) })
        </script>
      </div>
    </div>
    <footer>
      <div class="container">
        <div class="project">
          <img src="/images/arquillian_logo_200px.png" />
          <p class="bottom">
            &#169;
            Copyright 2009-2017 Red Hat, Inc.
            <br />
            <i class="icon-fire"></i>
            Mixed with <a href="http://twitter.github.com/bootstrap">Bootstrap</a>. Baked by <a href="http://awestruct.org">Awestruct</a>.
            <br />
            <i class="icon-share-alt"></i>
            Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.
            <br />
            Code released under <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, v2.0</a>.
          </p>
        </div>
        <div class="footer-nav">
          <h4>Learn</h4>
          <ul>
            <li>
              <a href="/invasion">Mission</a>
            </li>
            <li>
              <a href="/features">Features</a>
            </li>
            <li>
              <a href="/docs">Documentation</a>
            </li>
            <li>
              <a href="/guides">Guides</a>
            </li>
            <li>
              <a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Manual</a>
            </li>
            <li>
              <a href="http://community.jboss.org/en/arquillian/faq">FAQs</a>
            </li>
          </ul>
        </div>
        <div class="footer-nav">
          <h4>Get Involved</h4>
          <ul>
            <li>
              <a href="http://community.jboss.org/en/arquillian?view=discussions">Forums</a>
            </li>
            <li>
              <a href="https://issues.jboss.org/browse/ARQ">Issue Tracker</a>
            </li>
            <li>
              <a href="https://github.com/arquillian">Source Code</a>
            </li>
            <li>
              <a href="/community/contributors">Contributors</a>
            </li>
            <li>
              <a href="https://community.jboss.org/groups/testing">Testing SIG</a>
            </li>
          </ul>
        </div>
        <div class="sponser">
          <div class="follow-us">
            <h4>Stay Informed</h4>
            <ul>
              <li>
                <a href="https://plus.google.com/100660127586085393031?rel=author"><img alt="Google+" src="/images/social/googleplus-16.png" title="Follow Arquillian on Google+" /></a>
              </li>
              <li>
                <a href="https://twitter.com/#!/search/%23arquillian"><img alt="Twitter" src="/images/social/twitter-16.png" title="Browse the #arquillian hashtag on Twitter" /></a>
              </li>
              <li>
                <a href="http://www.linkedin.com/groups?gid=3120340"><img alt="LinkedIn" src="/images/social/linkedin-16.png" title="Join the Arquillian group on LinkedIn" /></a>
              </li>
              <li>
                <a href="http://vimeo.com/channels/arquillian"><img alt="Vimeo" src="/images/social/vimeo-16.png" title="Follow the Arquillian channel on Vimeo" /></a>
              </li>
            </ul>
          </div>
          <p>This website is open source! If you want to improve it, <a href="http://github.com/arquillian/arquillian.github.com">fork the project</a>, hack on it, then send a <a href="https://help.github.com/articles/using-pull-requests">pull request</a>. You can also view the <a href="http://www.seethestats.com/site/arquillian.org">visitor stats</a>.</p>
          <p class="image"><a href="http://jboss.org"><img src="/images/jboss_redhat_branding.png" class="branding" title="Red Hat, Inc." alt="Red Hat, Inc." /></a></p>
          <p>Arquillian is a <a href="http://jboss.org">JBoss Community</a> project and development is sponsored by Red Hat, Inc.</p>
          <p class="bottom"><a href="http://www.redhat.com/legal/legal_statement.html">Terms of Use</a> | <a href="http://www.redhat.com/legal/privacy_statement.html">Privacy Policy</a></p>
        </div>
        <a class="visible-desktop" href="#" id="toTop">Top</a>
      </div>
    </footer>
    <script>
      $(function() {
        $('html').addClass('ready');
        prettify();
        activateFooterGravity();
        activateTooltips();
        activateToTopControl();
      });
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.0.2/bootstrap.min.js"></script>
    <script src="/javascripts/prettify.js"></script>
    <script src="/javascripts/site.js?0e37e0c96bdb29499b3d12aff4b9a4b3f556c4da"></script>
    <script src="/javascripts/jquery-scroll.js"></script>
    <script src="http://apis.google.com/js/plusone.js"></script>
    <script>
      (function() {
        var po = document.createElement('script'); po.async = true; po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount','UA-18727998-3']);
    _gaq.push(['_trackPageview']);
    (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
