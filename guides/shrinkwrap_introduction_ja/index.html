<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Creating Deployable Archives with ShrinkWrap &#183; Arquillian Guides</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="Arquillianのデプロイメントを宣言するために、どのようにShrinkWrapを利用するか学びます。" name="description" />
    <link href="/blog/atom.xml" rel="alternate" title="Arquillian blog Atom feed" type="application/atom+xml" />
    <link href="/stylesheets/screen.css?8a3e00e1dd9ad771d3e80c1df9a06836cebe947b" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/r29/html5.js"></script>
    <![endif]-->
    <link href="/favicon.ico" rel="shortcut icon" />
  </head>
  <body class="guide">
    <header class="navbar navbar-fixed-top" id="banner" role="banner">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <div class="g-plusone-slot">
            <div class="g-plusone" data-annotation="none"></div>
          </div>
          <a class="brand" href="/">
            <span class="logo"></span>
            <span class="name">Arquillian</span>
          </a>
          <nav class="nav-collapse" role="navigation">
            <ul class="nav">
              <li><a href="/invasion/">Invasion!</a></li>
              <li><a href="/features/">Features</a></li>
              <li class="active"><a href="/guides/">Guides</a></li>
              <li><a href="/docs/">Docs</a></li>
              <li><a href="/blog/">Blog</a></li>
              <li><a href="/community/">Community</a></li>
              <li><a href="/modules/">Modules</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </header>
    <div id="main" role="main">
      <div id="content-header">
        <div class="container">
          <div class="headline">
            <h1>
              <a href="/guides/">Arquillian Guides</a>
              <small>Designed exclusively to teach you how to use Arquillian to write real tests.</small>
            </h1>
            <div class="directory">
              <a class="guides_menu" href="./" id="guides_menu">
                Guides Index
                <i class="icon-menu-closed"></i>
              </a>
              <div id="guides" style="display: none">
                <a class="guides_menu" href="./">
                  Guides Index
                  <i class="icon-menu-open"></i>
                </a>
                <hr class="clear" />
                <dl class="beg">
                  <dt>First Steps</dt>
                  <dd><a href="/guides/getting_started/">Getting Started</a>
                  <br />
                  <a href="/guides/getting_started/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/getting_started_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/getting_started_el_gr/"><img class="flag" rel="tooltip" src="/images/flags/el_gr.png" title="Ελληνικά (el_gr)" /></a>
                  <a href="/guides/getting_started_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/getting_started_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/getting_started_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/getting_started_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/getting_started_nl/"><img class="flag" rel="tooltip" src="/images/flags/nl.png" title="Nederlands (nl)" /></a>
                  <a href="/guides/getting_started_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/getting_started_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/getting_started_sk/"><img class="flag" rel="tooltip" src="/images/flags/sk.png" title="Slovenčina (sk)" /></a>
                  <a href="/guides/getting_started_sv_se/"><img class="flag" rel="tooltip" src="/images/flags/sv_se.png" title="Svenska (sv_se)" /></a>
                  <a href="/guides/getting_started_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/getting_started_rinse_and_repeat/">Getting Started: Rinse and Repeat</a>
                  <br />
                  <a href="/guides/getting_started_rinse_and_repeat/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/get_started_faster_with_forge/">Get Started Faster with Forge</a></dd>
                  <dd><a href="/guides/shrinkwrap_introduction/">Creating Deployable Archives with ShrinkWrap</a>
                  <br />
                  <a href="/guides/shrinkwrap_introduction/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/shrinkwrap_introduction_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/shrinkwrap_introduction_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/shrinkwrap_introduction_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/shrinkwrap_introduction_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/shrinkwrap_introduction_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/shrinkwrap_introduction_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/shrinkwrap_introduction_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                </dl>
                <dl class="int">
                  <dt>More Coverage</dt>
                  <dd><a href="/guides/testing_java_persistence/">Testing Java Persistence</a>
                  <br />
                  <a href="/guides/testing_java_persistence/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/testing_java_persistence_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/testing_java_persistence_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/testing_java_persistence_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/testing_java_persistence_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/testing_java_persistence_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/functional_testing_using_graphene/">Functional Testing using Drone and Graphene</a></dd>
                  <dd><a href="/guides/testing_in_the_cloud/">Testing in the Cloud</a></dd>
                </dl>
                <dl class="adv">
                  <dt>Enhance</dt>
                  <dd><a href="/guides/developing_a_container_adapter/">Developing a Container Adapter</a></dd>
                </dl>
                <dl class="ref">
                  <dt>Reference</dt>
                  <dd><a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Reference Guide</a></dd>
                  <dd><a href="http://docs.jboss.org/arquillian/aggregate/latest">API &amp; SPI Docs</a></dd>
                  <dd><a href="http://community.jboss.org/wiki/ArquillianMigrationGuides">Migration Guides</a></dd>
                  <dd><a href="http://community.jboss.org/en/arquillian/faq">FAQs</a></dd>
                </dl>
              </div>
            </div>
            <script>$(function() { activateGuideMenuControl() })</script>
          </div>
        </div>
      </div>
      <div class="container" id="guide">
        <div id="content" lang="ja">
            <div class="header">
            <div class="titlebar">
            <h2>Creating Deployable Archives with ShrinkWrap</h2>
            <div class="btn-group">
              <a class="btn" href="https://github.com/arquillian/arquillian.github.io/edit/develop/guides/shrinkwrap_introduction_ja.textile">Edit this file</a>
            </div>
          </div>
            <div class="authors"><strong>Author:</strong>
          <a href="/community/alrubinger">Andrew Lee Rubinger</a>  <strong style="padding-left: 10px;">Translator:</strong>
          <a href="/community/leathersole">Takayuki Konishi</a>  <strong style="padding-left: 10px;">Language:</strong>
          <img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" />
          <br />
          <strong style="padding-left: 0px;">Tags:</strong>
          shrinkwrap, arquillian  <strong style="padding-left: 10px;">Last Update:</strong>Feb 15, 2017</div>
            <p>ShrinkWrapは、Javaでアーカイブを作成する、もっとも簡単な方法で、Arquillianのデプロイメントメカニズムに力を与えます。このガイドでは、デプロイメントを表すことになるオブジェクト作成の速習コースを提供します。以下を含みます：</p>
            <ul>
          	<li>伝統的なファイルベースのアーカイブを越えた、ShrinkWrapの背後にある動機と利益</li>
          	<li>スクラッチからの新しいアーカイブ作成</li>
          	<li>コンテンツを追加するための様々なメカニズム</li>
          	<li>既存のファイル構成からアーカイブをインポートする</li>
          </ul>
            </div>
            <h3 id="&#29702;&#30001;">理由</h3>
          <p>当初、ShrinkWrapは、Javaエンタープライズデプロイメントをより簡単にテストするために生まれました。ZIPの標準に従ったフラットファイルのアーカイブという伝統的な定義は、アプリケーションリソースをすべてまとめるビルドの手順で必要とされてきました。そしてビルドステップは時間を要します：</p>
          <pre class="output"><code class="output">[alr@alr-laptop shrinkwrap]$ mvn clean install&#x000A;... terrifying output trace ...&#x000A;[INFO] ------------------------------------------------------------------------&#x000A;[INFO] BUILD SUCCESS&#x000A;[INFO] ------------------------------------------------------------------------&#x000A;[INFO] Total time: 1:13.492s&#x000A;[INFO] ------------------------------------------------------------------------</code></pre>
          <p>しかしデベロッパーとして、私達はコーディング環境で生活しています。マインドセットをビルド実行に切り替えるのは無駄です。</p>
          <p>それで、問いかけました：“Javaにおいて、オブジェクトをアーカイブとして表せたらどうなる？”</p>
          <p>その結果は、“jar”ツールに似た、Java APIで、直感的な書式を持つ仮想的なファイルシステムでした。</p>
          <div class="filename">ShrinkWrapアーカイブを作成する</div>
          <pre class="prettify"><code class="prettify">JavaArchive archive = ShrinkWrap.create(JavaArchive.class,"myarchive.jar") &#x000A;   .addClasses(MyClass.class, MyOtherClass.class)&#x000A;   .addResource("mystuff.properties");</code></pre>
          <p>その結果は、IDEの継続的なコンパイル機能の利点を享受するための方法で、ビルドをスキップできます。</p>
          <p><img src="/images/guides/shrinkwrap_incremental_compilation.png" alt="" /></p>
          <p>その結果は、テストをIDEから直接実行するやり方でした。</p>
          <p><img src="/images/guides/shrinkwrap_runas_junit.png" alt="" /></p>
          <p>その結果は、ShrinkWrapでした。</p>
          <h3 id="&#12473;&#12479;&#12540;&#12488;">スタート</h3>
          <p>最初のステップは、ShrinkWrapのバイナリを入手することです。コアは3つのピースからなります：</p>
          <table>
          	<tr>
          		<th>名称</th>
          		<th>Mavenコーディネート</th>
          	</tr>
          	<tr>
          		<td>API</td>
          		<td>org.jboss.shrinkwrap:shrinkwrap-api</td>
          	</tr>
          	<tr>
          		<td>SPI</td>
          		<td>org.jboss.shrinkwrap:shrinkwrap-spi</td>
          	</tr>
          	<tr>
          		<td>Implementation</td>
          		<td>org.jboss.shrinkwrap:shrinkwrap-impl-base</td>
          	</tr>
          </table>
          <p>APIは、コンパイル時のクラスパスでのみ、利用できるべきで、SPIと実装モジュールは、実行時に必要です。これは、直接使用することを目的としたクラスと、プロジェクト内部で使用することを目的としたクラスの良好な分離を強制するためです。</p>
          <p>Mavenでは、ShrinkWrap依存チェーンPOMを利用することで簡単に適切なスコープの元で、利用できます。これは、Maven Centralで入手できます：</p>
          <div class="filename">ユーザーのプロジェクトのpom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;project xmlns="http://maven.apache.org/POM/4.0.0"&#x000A;  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#x000A;  xsi:schemaLocation="&#x000A;  http://maven.apache.org/POM/4.0.0&#x000A;  http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;&#x000A;  &lt;!-- snip --&gt;</code>&#x000A;  &#x000A;<code class="prettify">  &lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.shrinkwrap&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;shrinkwrap-depchain&lt;/artifactId&gt;&#x000A;    &lt;version&gt;${version.shrinkwrap}&lt;/version&gt;&#x000A;    &lt;type&gt;pom&lt;/type&gt;&#x000A;  &lt;/dependency&gt;</code>&#x000A;&#x000A;<code class="prettify">  &lt;!-- snip --&gt;&#x000A;&lt;/project&gt;</code></pre>
          <p>Mavenリポジトリシステムを使用しないプロジェクトのためにShrinkWrapディストリビューションでは、すべてのモジュールをダウンロードできるようになっていて、ユーザーは必要に応じて手動で依存性を設定できます。</p>
          <h4>必須条件</h4>
          <ul>
          	<li>JRE5以上のランタイム</li>
          	<li>他の依存性は無し</li>
          </ul>
          <p>ShrinkWrapはJava5以上のランタイムであれば実行できますが、コンパイルには少なくともJDK6が必要です。</p>
          <h4>APIドキュメント</h4>
          <p>各リリースのJavaDocは、 <a href="http://docs.jboss.org/shrinkwrap">ここ</a> にあります。</p>
          <h4>オープンソースコーディング</h4>
          <p>フォークして <a href="http://github.com/shrinkwrap/shrinkwrap">開発</a> に参加してください。</p>
          <h3 id="&#12450;&#12540;&#12459;&#12452;&#12502;&#12398;&#20316;&#25104;">アーカイブの作成</h3>
          <p>ShrinkWrapライブラリの最初の入り口は、 <code>org.jboss.shrinkwrap.api.ShrinkWrap</code> クラスです。ここから、新しい <code>Archive</code> を作るために、 <code>create</code> メソッドを呼べます。 <code>Archive</code> はアセットと呼ばれるコンテンツをArchivePathと呼ばれる場所への追加を許可する仮想ファイル・システムについての一般的なビューです。以下の表では、ShrinkWrapの用語とより一般的な用語を、より簡単に示します：</p>
          <table>
          	<tr>
          		<th>一般用語</th>
          		<th>ShrinkWrapクラス</th>
          		<th>定義</th>
          	</tr>
          	<tr>
          		<td>アーカイブ</td>
          		<td><code>org.jboss.shrinkwrap.api.Archive</code></td>
          		<td>リソースのコレクション。本質的には、仮想ファイルシステム</td>
          	</tr>
          	<tr>
          		<td>ファイル</td>
          		<td><code>org.jboss.shrinkwrap.api.Node</code></td>
          		<td><code>Archive</code> に登録されたもの。コンテンツまたはディレクトリ</td>
          	</tr>
          	<tr>
          		<td>パス</td>
          		<td><code>org.jboss.shrinkwrap.api.ArchivePath</code></td>
          		<td><code>Archive</code> 内で、 <code>Node</code> がある場所</td>
          	</tr>
          	<tr>
          		<td>アセット</td>
          		<td><code>org.jboss.shrinkwrap.api.Asset</code></td>
          		<td><code>Node</code> 内のバイトベースのコンテンツ</td>
          	</tr>
          </table>
          <p>これに加えて、 <code>Archive</code> にはたくさんのビューがあります。そして、一般的には、 <code>Archive</code> クラスを直接扱うのは好まれません。その代わり、ShrinkWrapは、それらのタイプに応じてコンテンツを操作する便利な方法である、いくつかの <code>Archive</code> 拡張を提供しています。</p>
          <table>
          	<tr>
          		<th>アーカイブタイプ</th>
          		<th>定義</th>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.GenericArchive</code></td>
          		<td>もっとも簡単な <code>Archive</code> の具象的なユーザービューの型です。一般的な操作をサポートします。</td>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.spec.JavaArchive</code></td>
          		<td>JAR型で、 <code>Class</code> や <code>Package</code> の追加やマニフェストの操作が許可されています。</td>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.spec.EnterpriseArchive</code></td>
          		<td>Java EE EAR型で、マニフェストと関連する規格の操作をサポートします。</td>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.spec.WebArchive</code></td>
          		<td>Java EE WAR型で、ウェブアプリケーションのデプロイメントに一般的な操作をサポートします。</td>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.spec.ResourceAdaptorArchive</code></td>
          		<td>Java EE RAR型で、リソースアダプタのデプロイメントに一般的な操作をサポートします。</td>
          	</tr>
          </table>
          <p><code>Archive</code> を作成するには、シンプルに <code>ShrinkWrap:create</code> スタティックメソッドに必要なアーカイブ型と、オプションで名前を渡します：</p>
          <pre class="prettify"><code class="prettify">GenericArchive myArchive = ShrinkWrap.create(GenericArchive.class,"myArchive.jar");</code></pre>
          <p>これだけです！最初のShrinkWrapアーカイブができました！</p>
          <h3 id="&#12467;&#12531;&#12486;&#12531;&#12484;&#12398;&#36861;&#21152;">コンテンツの追加</h3>
          <p>もちろん、空のアーカイブとしてのオブジェクトはほとんど無意味です。それでは、コンテンツの追加を見てみましょう。前述のように、コンテンツは、 <code>Asset</code> クラスとしてモデル化されているので、最初にShrinkWrapが提供している <code>Asset</code> 実装を調べてみましょう：</p>
          <table>
          	<tr>
          		<th>アセット</th>
          		<th>表すもの</th>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.asset.ArchiveAsset</code></td>
          		<td>ネストした <code>Archive</code> コンテンツ</td>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.asset.ByteArrayAsset</code></td>
          		<td><code>byte[]</code> または <code>InputStream</code> コンテンツ</td>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.asset.ClassAsset</code></td>
          		<td>Java <code>Class</code> コンテンツ</td>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.asset.ClassLoaderAsset</code></td>
          		<td>オプションで設定された <code>ClassLoader</code> でロードされるリソース</td>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.asset.FileAsset</code></td>
          		<td><code>File</code> コンテンツ</td>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.asset.StringAsset</code></td>
          		<td><code>String</code> コンテンツ</td>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.asset.UrlAsset</code></td>
          		<td>与えられた <code>URL</code> によって指し示されるコンテンツ</td>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.asset.EmptyAsset</code></td>
          		<td>空(0バイト)のコンテンツ</td>
          	</tr>
          </table>
          <p>これに加えて、 <code>Asset</code> はインターフェースなので、ユーザーが <code>InputStream</code> として表せるバイトベースとのコンテンツを追加するための、独自の実装を提供できます。例えば、以下のスニペットは、 <code>DataSource</code> のアクティベーションフレームワークをどのようにを <code>Asset</code> として提供できるか、示します：</p>
          <pre class="prettify"><code class="prettify">final DataSource dataSource = null; // すでにこれは持っていると仮定します&#x000A;  Asset asset = new Asset() {&#x000A;  @Override&#x000A;  public InputStream openStream() {&#x000A;    try {&#x000A;      return dataSource.getInputStream();&#x000A;    } catch (final IOException e) {&#x000A;      throw new RuntimeException(e);&#x000A;    }&#x000A;  }&#x000A;};</code></pre>
          <p><code>Archive:add</code> メソッドを使うと、 <code>Asset</code> コンテンツを渡して、 <code>ArchivePath</code> 以下に追加することができます。</p>
          <pre class="prettify"><code class="prettify">myArchive.add(myAsset,"path/to/content");&#x000A;System.out.println(myArchive.toString(true));</code></pre>
          <p><code>true</code> 冗長化フラグを <code>Archive</code> の <code>toString</code> メソッドに渡すと、再帰的に <code>"ls -l"</code> スタイルで出力します：</p>
          <pre class="output"><code class="output">myArchive.jar:&#x000A;/path/&#x000A;/path/to/&#x000A;/path/to/content</code></pre>
          <p>また、以前に触れた <code>Archive</code> ビューは、ユーザーが利用しているコンテンツの種類に応じて、とても有用です。たとえば、標準のJARファイルは、通常、 <code>.class</code> ファイルや他のリソースが含まれており、JavaArchiveタイプは、これらを追加することができるように。</p>
          <p>ShrinkWrapは、アーカイブのビューを変更する単純なメカニズムをサポートし、それは <code>org.jboss.shrinkwrap.api.Assignable</code> インターフェースの <code>as</code> メソッドとして提供されます。 それぞれのビューは、 <code>Assignable</code> を継承しています。それで、簡単に <code>Class</code> リソースを追加するために、アーカイブを <code>JavaArchive</code> として使うためには、単純に以下のようにできます：</p>
          <pre class="prettify"><code class="prettify">myArchive.as(JavaArchive.class).addClasses(String.class, Integer.class);&#x000A;System.out.println(myArchive.toString(true));</code></pre>
          <pre class="output"><code class="output">archive.jar:&#x000A;/java/&#x000A;/java/lang/&#x000A;/java/lang/String.class&#x000A;/java/lang/Integer.class</code></pre>
          <p>このメカニズムを使うことは、一般的に真の多重継承言語に見られる多様性を提供しながら、ShrinkWrapの使い方をクリーンで直感的な状態のまま保つための核心部です。</p>
          <h3 id="&#12501;&#12449;&#12452;&#12523;&#12467;&#12531;&#12486;&#12531;&#12484;&#12434;&#25201;&#12358;">ファイルコンテンツを扱う</h3>
          <p>ShrinkWrapはそのルーツをJava EEに持ち、Arquillianテストプラットフォームと強く結びついているものの、これらのドメインには確実に限定されていません。実際、ShrinkWrapは意図的にアーカイブ用の仮想ファイルシステムを越えません。そのように、それはフラットファイル構成でうまく遊べる、単純なメカニズムを提供します。</p>
          <p>上のサンプルから借りてくると、おそらくShrinkWrapには現在のパッケージのすべての <code>.class</code> ファイルをまとめて、ZIPフォーマットの標準的なJARとして出力してもらいたいでしょう。そのためのコードは実際にはとても簡単です：</p>
          <pre class="prettify"><code class="prettify">JavaArchive archive = ShrinkWrap.create(JavaArchive.class,&#x000A;  "myPackage.jar").addPackage(this.getClass().getPackage());&#x000A;  System.out.println(archive.toString(true));&#x000A;  archive.as(ZipExporter.class).exportTo(&#x000A;    new File("/home/alr/Desktop/myPackage.jar"), true);</code></pre>
          <pre class="output"><code class="output">javalang.jar:&#x000A;/org/&#x000A;/org/alr/&#x000A;/org/alr/test/&#x000A;/org/alr/test/TestClass.class</code></pre>
          <p>ここで何が起きているのか見てみましょう。初めに、 <code>JavaArchive</code> を作成し、現在の <code>Class</code> が属する <code>Package</code> のすべてのコンテンツを加えます。それからなにが含まれているかちょっと見るために、コンソールに出力をダンプします。最後の行で、新しいビュー、一つの出力可能な形式であるZIPフォーマット、を得るために、また <code>JavaArchive</code> ビューの <code>Assignable</code> ファシリティを使います。今回は、 <code>ZipExporter</code> という名前のものを使います。これは、 <code>File</code> や <code>OutputStream</code> として出力したり、あるいはコンテンツを <code>InputStream</code> として受け取り、それ自身をバイト列として操作することもできます。</p>
          <p>3種類のエクスポーターがShrinkWrapには含まれています：</p>
          <table>
          	<tr>
          		<th>エクスポーター</th>
          		<th>出力フォーマット</th>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.exporter.TarExporter</code></td>
          		<td>TAR</td>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.exporter.TarGzExporter</code></td>
          		<td>TAR.GZ</td>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.exporter.ZipExporter</code></td>
          		<td>ZIP</td>
          	</tr>
          </table>
          <p>もちろん、標準のインポーターを使って同じ形式のフラットファイルから、ShrinkWrapアーカイブを得ることもできます：</p>
          <table>
          	<tr>
          		<th>インポーター</th>
          		<th>出力フォーマット</th>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.importer.TarImporter</code></td>
          		<td>TAR</td>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.importer.TarGzImporter</code></td>
          		<td>TAR.GZ</td>
          	</tr>
          	<tr>
          		<td><code>org.jboss.shrinkwrap.api.importer.ZipImporter</code></td>
          		<td>ZIP</td>
          	</tr>
          </table>
          <p>前の例の <code>JavaArchive</code> に戻すコードは、以下のようになるでしょう：</p>
          <pre class="prettify"><code class="prettify">JavaArchive roundtrip = ShrinkWrap&#x000A;  .create(ZipImporter.class, "myPackageRoundtrip.jar")&#x000A;  .importFrom(new File("/home/alr/Desktop/myPackage.jar"))&#x000A;  .as(JavaArchive.class);</code></pre>
          <p>どのように <code>ZipImporter</code> を <code>ShrinkWrap.create</code> に渡すかという点が、 <code>Assignable</code> と同様であることに注意してください！ここのテーマに気づき始めましたか？</p>
          <p>これで、シュリンクラップでアーカイブの内容を操作する、簡単な紹介を終わります。APIが直感的で一貫性があるとユーザーが判断してくれることを期待し、我々のコミュニティに歓迎します。</p>
          <h3 id="share">Share the Knowledge</h3>
          <p>Find this guide useful?</p>
          <p class="post_to_twitter"><a href="http://twitter.com/home/?status=Just%20read%20the%20%23Arquillian%20Creating%20Deployable%20Archives%20with%20ShrinkWrap%20guide%20and%20got%20a%20%23greenbar!%20Get%20yours.%20http://arquillian.org/guides/shrinkwrap_introduction_ja/"><img src="/images/post_to_twitter.png" alt="" /></a></p>
          <div class="g-plusone" data-size="tall"></div>
          <p>There&#8217;s a lot more about Arquillian to cover. If you&#8217;re ready to learn more, check out the <a href="/guides">other available guides</a>.</p>
          <h4>Feedback</h4>
          <p>Find a bug in the guide? Something missing? You can fix it by <a href="http://github.com/arquillian/arquillian.github.com">forking this website</a>, making the correction and <a href="http://help.github.com/send-pull-requests">sending a pull request</a>. If you&#8217;re just plain stuck, feel free to ask a question in the <a href="http://community.jboss.org/en/arquillian?view=discussions">user discussion forum</a>.</p>
          <h4>Recent Changelog</h4>
          <ul>
            <li>
              Feb 15, 2017:
              Arquillian universe 1.1.12.0 announcement
              <em>by Alex Soto</em>
            </li>
          </ul>
          <p>
            <a href="https://github.com/arquillian/arquillian.github.io/commits/develop/guides/shrinkwrap_introduction_ja.textile">See full history &raquo;</a>
          </p>
        </div>
        <div id="sidebar">
          <div id="toc">
            <h3 class="chapter_header">Chapters</h3>
            <ol class="chapters">
              <li>
                <a href="#&#29702;&#30001;" id="理由_link">理由</a>
              </li>
              <li>
                <a href="#&#12473;&#12479;&#12540;&#12488;" id="スタート_link">スタート</a>
              </li>
              <li>
                <a href="#&#12450;&#12540;&#12459;&#12452;&#12502;&#12398;&#20316;&#25104;" id="アーカイブの作成_link">アーカイブの作成</a>
              </li>
              <li>
                <a href="#&#12467;&#12531;&#12486;&#12531;&#12484;&#12398;&#36861;&#21152;" id="コンテンツの追加_link">コンテンツの追加</a>
              </li>
              <li>
                <a href="#&#12501;&#12449;&#12452;&#12523;&#12467;&#12531;&#12486;&#12531;&#12484;&#12434;&#25201;&#12358;" id="ファイルコンテンツを扱う_link">ファイルコンテンツを扱う</a>
              </li>
              <li>
                <a href="#share" id="share_link">Share the Knowledge</a>
              </li>
            </ol>
          </div>
        </div>
        <script>
          $(window).load(function() { activateScrollingToc(['理由', 'スタート', 'アーカイブの作成', 'コンテンツの追加', 'ファイルコンテンツを扱う', 'share']) })
        </script>
      </div>
    </div>
    <footer>
      <div class="container">
        <div class="project">
          <img src="/images/arquillian_logo_200px.png" />
          <p class="bottom">
            &#169;
            Copyright 2009-2017 Red Hat, Inc.
            <br />
            <i class="icon-fire"></i>
            Mixed with <a href="http://twitter.github.com/bootstrap">Bootstrap</a>. Baked by <a href="http://awestruct.org">Awestruct</a>.
            <br />
            <i class="icon-share-alt"></i>
            Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.
            <br />
            Code released under <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, v2.0</a>.
          </p>
        </div>
        <div class="footer-nav">
          <h4>Learn</h4>
          <ul>
            <li>
              <a href="/invasion">Mission</a>
            </li>
            <li>
              <a href="/features">Features</a>
            </li>
            <li>
              <a href="/docs">Documentation</a>
            </li>
            <li>
              <a href="/guides">Guides</a>
            </li>
            <li>
              <a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Manual</a>
            </li>
            <li>
              <a href="http://community.jboss.org/en/arquillian/faq">FAQs</a>
            </li>
          </ul>
        </div>
        <div class="footer-nav">
          <h4>Get Involved</h4>
          <ul>
            <li>
              <a href="http://community.jboss.org/en/arquillian?view=discussions">Forums</a>
            </li>
            <li>
              <a href="https://issues.jboss.org/browse/ARQ">Issue Tracker</a>
            </li>
            <li>
              <a href="https://github.com/arquillian">Source Code</a>
            </li>
            <li>
              <a href="/community/contributors">Contributors</a>
            </li>
            <li>
              <a href="https://community.jboss.org/groups/testing">Testing SIG</a>
            </li>
          </ul>
        </div>
        <div class="sponser">
          <div class="follow-us">
            <h4>Stay Informed</h4>
            <ul>
              <li>
                <a href="https://plus.google.com/100660127586085393031?rel=author"><img alt="Google+" src="/images/social/googleplus-16.png" title="Follow Arquillian on Google+" /></a>
              </li>
              <li>
                <a href="https://twitter.com/#!/search/%23arquillian"><img alt="Twitter" src="/images/social/twitter-16.png" title="Browse the #arquillian hashtag on Twitter" /></a>
              </li>
              <li>
                <a href="http://www.linkedin.com/groups?gid=3120340"><img alt="LinkedIn" src="/images/social/linkedin-16.png" title="Join the Arquillian group on LinkedIn" /></a>
              </li>
              <li>
                <a href="http://vimeo.com/channels/arquillian"><img alt="Vimeo" src="/images/social/vimeo-16.png" title="Follow the Arquillian channel on Vimeo" /></a>
              </li>
            </ul>
          </div>
          <p>This website is open source! If you want to improve it, <a href="http://github.com/arquillian/arquillian.github.com">fork the project</a>, hack on it, then send a <a href="https://help.github.com/articles/using-pull-requests">pull request</a>. You can also view the <a href="http://www.seethestats.com/site/arquillian.org">visitor stats</a>.</p>
          <p class="image"><a href="http://jboss.org"><img src="/images/jboss_redhat_branding.png" class="branding" title="Red Hat, Inc." alt="Red Hat, Inc." /></a></p>
          <p>Arquillian is a <a href="http://jboss.org">JBoss Community</a> project and development is sponsored by Red Hat, Inc.</p>
          <p class="bottom"><a href="http://www.redhat.com/legal/legal_statement.html">Terms of Use</a> | <a href="http://www.redhat.com/legal/privacy_statement.html">Privacy Policy</a></p>
        </div>
        <a class="visible-desktop" href="#" id="toTop">Top</a>
      </div>
    </footer>
    <script>
      $(function() {
        $('html').addClass('ready');
        prettify();
        activateFooterGravity();
        activateTooltips();
        activateToTopControl();
      });
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.0.2/bootstrap.min.js"></script>
    <script src="/javascripts/prettify.js"></script>
    <script src="/javascripts/site.js?8a3e00e1dd9ad771d3e80c1df9a06836cebe947b"></script>
    <script src="/javascripts/jquery-scroll.js"></script>
    <script src="http://apis.google.com/js/plusone.js"></script>
    <script>
      (function() {
        var po = document.createElement('script'); po.async = true; po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount','UA-18727998-3']);
    _gaq.push(['_trackPageview']);
    (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
