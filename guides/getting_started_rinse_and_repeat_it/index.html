<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Guida Introduttiva: Rispolveriamo e Ripetiamo &#183; Arquillian Guides</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="Parte 2 della Guida Introduttiva. Rivediamo i nostri progressi esplorando un esempio più complesso e impariamo a usare container remoti." name="description" />
    <link href="/blog/atom.xml" rel="alternate" title="Arquillian blog Atom feed" type="application/atom+xml" />
    <link href="/stylesheets/screen.css?0e37e0c96bdb29499b3d12aff4b9a4b3f556c4da" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/r29/html5.js"></script>
    <![endif]-->
    <link href="/favicon.ico" rel="shortcut icon" />
  </head>
  <body class="guide">
    <header class="navbar navbar-fixed-top" id="banner" role="banner">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <div class="g-plusone-slot">
            <div class="g-plusone" data-annotation="none"></div>
          </div>
          <a class="brand" href="/">
            <span class="logo"></span>
            <span class="name">Arquillian</span>
          </a>
          <nav class="nav-collapse" role="navigation">
            <ul class="nav">
              <li><a href="/invasion/">Invasion!</a></li>
              <li><a href="/features/">Features</a></li>
              <li class="active"><a href="/guides/">Guides</a></li>
              <li><a href="/docs/">Docs</a></li>
              <li><a href="/blog/">Blog</a></li>
              <li><a href="/community/">Community</a></li>
              <li><a href="/modules/">Modules</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </header>
    <div id="main" role="main">
      <div id="content-header">
        <div class="container">
          <div class="headline">
            <h1>
              <a href="/guides/">Arquillian Guides</a>
              <small>Designed exclusively to teach you how to use Arquillian to write real tests.</small>
            </h1>
            <div class="directory">
              <a class="guides_menu" href="./" id="guides_menu">
                Guides Index
                <i class="icon-menu-closed"></i>
              </a>
              <div id="guides" style="display: none">
                <a class="guides_menu" href="./">
                  Guides Index
                  <i class="icon-menu-open"></i>
                </a>
                <hr class="clear" />
                <dl class="beg">
                  <dt>First Steps</dt>
                  <dd><a href="/guides/getting_started/">Getting Started</a>
                  <br />
                  <a href="/guides/getting_started/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/getting_started_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/getting_started_el_gr/"><img class="flag" rel="tooltip" src="/images/flags/el_gr.png" title="Ελληνικά (el_gr)" /></a>
                  <a href="/guides/getting_started_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/getting_started_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/getting_started_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/getting_started_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/getting_started_nl/"><img class="flag" rel="tooltip" src="/images/flags/nl.png" title="Nederlands (nl)" /></a>
                  <a href="/guides/getting_started_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/getting_started_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/getting_started_sk/"><img class="flag" rel="tooltip" src="/images/flags/sk.png" title="Slovenčina (sk)" /></a>
                  <a href="/guides/getting_started_sv_se/"><img class="flag" rel="tooltip" src="/images/flags/sv_se.png" title="Svenska (sv_se)" /></a>
                  <a href="/guides/getting_started_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/getting_started_rinse_and_repeat/">Getting Started: Rinse and Repeat</a>
                  <br />
                  <a href="/guides/getting_started_rinse_and_repeat/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/get_started_faster_with_forge/">Get Started Faster with Forge</a></dd>
                  <dd><a href="/guides/shrinkwrap_introduction/">Creating Deployable Archives with ShrinkWrap</a>
                  <br />
                  <a href="/guides/shrinkwrap_introduction/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/shrinkwrap_introduction_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/shrinkwrap_introduction_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/shrinkwrap_introduction_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/shrinkwrap_introduction_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/shrinkwrap_introduction_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/shrinkwrap_introduction_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/shrinkwrap_introduction_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                </dl>
                <dl class="int">
                  <dt>More Coverage</dt>
                  <dd><a href="/guides/testing_java_persistence/">Testing Java Persistence</a>
                  <br />
                  <a href="/guides/testing_java_persistence/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/testing_java_persistence_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/testing_java_persistence_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/testing_java_persistence_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/testing_java_persistence_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/testing_java_persistence_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/functional_testing_using_graphene/">Functional Testing using Drone and Graphene</a></dd>
                  <dd><a href="/guides/testing_in_the_cloud/">Testing in the Cloud</a></dd>
                </dl>
                <dl class="adv">
                  <dt>Enhance</dt>
                  <dd><a href="/guides/developing_a_container_adapter/">Developing a Container Adapter</a></dd>
                </dl>
                <dl class="ref">
                  <dt>Reference</dt>
                  <dd><a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Reference Guide</a></dd>
                  <dd><a href="http://docs.jboss.org/arquillian/aggregate/latest">API &amp; SPI Docs</a></dd>
                  <dd><a href="http://community.jboss.org/wiki/ArquillianMigrationGuides">Migration Guides</a></dd>
                  <dd><a href="http://community.jboss.org/en/arquillian/faq">FAQs</a></dd>
                </dl>
              </div>
            </div>
            <script>$(function() { activateGuideMenuControl() })</script>
          </div>
        </div>
      </div>
      <div class="container" id="guide">
        <div id="content" lang="it">
            <div class="header">
            <div class="titlebar">
            <h2>Guida Introduttiva: Rispolveriamo e Ripetiamo</h2>
            <div class="btn-group">
              <a class="btn" href="https://github.com/arquillian/arquillian.github.io/edit/develop/guides/getting_started_rinse_and_repeat_it.textile">Edit this file</a>
            </div>
          </div>
            <div class="authors"><strong>Author:</strong>
          <a href="/community/mojavelinux">Dan Allen</a>  <strong style="padding-left: 10px;">Translator:</strong>
          <a href="/community/flashboss">Luca Stancapiano</a>  <strong style="padding-left: 10px;">Language:</strong>
          <img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" />
          <br />
          <strong style="padding-left: 0px;">Last Update:</strong>Feb 21, 2017</div>
            <p>In questa seconda parte della <a href="/guides/getting_started_it">Guida Introduttiva</a>, proseguiremo il lavoro visto su Arquillian esplorando un esempio leggermente più complesso. Terminata la lettura di questa guida saremo in grado di:</p>
            <ul>
          	<li>Scrivere un test Arquillian che usa insieme <acronym title="Contexts and Dependency Injection">CDI</acronym> e <acronym title="Enterprise JavaBeans">EJB</acronym></li>
          	<li>Eseguire un test Arquillian in un container remoto</li>
          	<li>Fare il debugging di un test dentro un container remoto</li>
          </ul>
            <p>Per ottenere ciò, dobbiamo aggiungere dei nuovi profili al nostro build. Una volta attivi, permetteranno di usare Arquillian in un container remoto (p.es., application server). Testeremo quindi la <em>situazione reale</em> senza i mock. E a runtime! E dal momento che la maggiorparte del lavoro è stata fatta nella prima guida, non impiegheremo molto tempo a farlo.</p>
            </div>
            <h3 id="prerequisiti">Prerequisiti</h3>
          <p>La guida richiede che sia già stata aggiunta l&#8217;infrastruttura di Arquillian nel progetto e che sia stato aggiunto ed eseguito almeno un test con Arquillian. Se non è ancora stato fatto, guardate prima la <a href="/guides/getting_started_it">Guida Introduttiva</a> per ottenere familiarità con le basi di Arquillian. Assicuratevi anche di avere già tutto il software menzionato in quella guida.</p>
          <h3 id="creare_i_componenti">Creare i Componenti</h3>
          <p>In questa guida, creeremo un backend molto basilare per un&#8217;applicazione di shopping. Useremo un componente carrello per registrare gli oggetti selezionati dal visitatore e un componente repository per registrare e ricevere gli ordini fatti. Implementeremo questi componenti usando CDI ed EJB rispettivamente. Possiamo iniziare subito usando questi due modelli dal momento che abbiamo già la Java EE 6 API nel classpath. (Riferitevi alla <a href="/guides/getting_started_it">Guida Introduttiva</a> per le istruzioni su come aggiungere queste API nel progetto).</p>
          <p>Iniziamo con il componente che mette gli ordini nello storage di persistenza. Seguendo le best practice per scrivere un buon software, e per rendere più semplici i test, iniziamo a definire un&#8217;interfaccia di contratto. Nel nostro IDE, creiamo una nuova interfaccia locale per l&#8217;EJB chiamata <code>OrderRepository</code> e popoliamola con i seguenti contenuti:</p>
          <div class="filename">src/main/java/org/arquillian/example/OrderRepository.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import java.util.List;&#x000A;import javax.ejb.Local;</code>&#x000A;&#x000A;<code class="prettify">@Local&#x000A;public interface OrderRepository {&#x000A;    void addOrder(List&lt;String&gt; order);&#x000A;    List&lt;List&lt;String&gt;&gt; getOrders();&#x000A;    int getOrderCount();&#x000A;}</code></pre>
          <p>Ci preoccuperemo dell&#8217;implementazione più tardi. Vediamo ora in che modo useremo il contratto.</p>
          <p>Quando i visitatori navigheranno nel sito, dovranno poter fare le compere con il carrello. Per questo scenario, useremo un bean CDI associato alla sessione HTTP del visitatore. Questo componente delegherà le operazioni all&#8217;EJB <code>OrderRepository</code> durante le compere.</p>
          <p>Nel nostro IDE, creiamo una classe con nome <code>Basket</code> e agganciamola al contesto della sessione tramite l&#8217;annotazione <code>@SessionScoped</code>, come mostrato in basso:</p>
          <div class="filename">src/main/java/org/arquillian/example/Basket.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import java.io.Serializable;&#x000A;import java.util.ArrayList;&#x000A;import java.util.Collections;&#x000A;import java.util.List;</code>&#x000A;&#x000A;<code class="prettify">import javax.annotation.PostConstruct;&#x000A;import javax.ejb.EJB;&#x000A;import javax.enterprise.context.SessionScoped;</code>&#x000A;&#x000A;<code class="prettify">@SessionScoped&#x000A;public class Basket implements Serializable {&#x000A;    private static final long serialVersionUID = 1L;&#x000A;    private List&lt;String&gt; items;</code>&#x000A;    &#x000A;<code class="prettify">    @EJB&#x000A;    private OrderRepository repo;</code>&#x000A;    &#x000A;<code class="prettify">    public void addItem(String item) {&#x000A;        items.add(item);&#x000A;    }</code>&#x000A;    &#x000A;<code class="prettify">    public List&lt;String&gt; getItems() {&#x000A;        return Collections.unmodifiableList(items);&#x000A;    }</code>&#x000A;    &#x000A;<code class="prettify">    public int getItemCount() {&#x000A;        return items.size();&#x000A;    }</code>&#x000A;    &#x000A;<code class="prettify">    public void placeOrder() {&#x000A;        repo.addOrder(items);&#x000A;        items.clear();&#x000A;    }</code>&#x000A;    &#x000A;<code class="prettify">    @PostConstruct&#x000A;    void initialize() {&#x000A;        items = new ArrayList&lt;String&gt;();&#x000A;    }&#x000A;}</code></pre>
          <p>Come si può vedere, abbiamo agganciato l&#8217;EJB a un bean CDI, precisamente l&#8217;integrazione che vogliamo testare!</p>
          <h3 id="fase_di_implementazione">Fase di implementazione</h3>
          <p>Non possiamo ancora scrivere il test visto che ancora non abbiamo l&#8217;implementazione del <code>OrderRepository</code>.</p>
          <p>Supponiamo che l&#8217; <code>OrderRepository</code> sia stato implementato da un&#8217;altro team (o in una fase differente). La funzionalità di micro-deploy di Arquillian sarà assolutamente estranea a questa parte. Possiamo per esempio creare un&#8217;implementazione in-memory sotto forma di singleton EJB e impacchetarlo nell&#8217;archivio di test per ottenere un&#8217;applicazione funzionante in brevissimo tempo. (Possiamo anche decidere di mantenere questa nostra implementazione utilizzabile solo per i test)</p>
          <p>Creiamo la classe <code>SingletonOrderRepository</code> nel nostro <em>classpath di test</em> e popoliamola con il codice mostrato in basso:</p>
          <div class="filename">src/test/java/org/arquillian/example/SingletonOrderRepository.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import java.util.ArrayList;&#x000A;import java.util.Collections;&#x000A;import java.util.List;</code>&#x000A;&#x000A;<code class="prettify">import javax.annotation.PostConstruct;&#x000A;import javax.ejb.Lock;&#x000A;import javax.ejb.LockType;&#x000A;import javax.ejb.Singleton;</code>&#x000A;&#x000A;<code class="prettify">@Singleton&#x000A;@Lock(LockType.READ)&#x000A;public class SingletonOrderRepository implements OrderRepository {&#x000A;    private List&lt;List&lt;String&gt;&gt; orders;</code>&#x000A;    &#x000A;<code class="prettify">    @Override&#x000A;    @Lock(LockType.WRITE)&#x000A;    public void addOrder(List&lt;String&gt; order) {&#x000A;        orders.add(order);&#x000A;    }</code>&#x000A;    &#x000A;<code class="prettify">    @Override&#x000A;    public List&lt;List&lt;String&gt;&gt; getOrders() {&#x000A;        return Collections.unmodifiableList(orders);&#x000A;    }</code>&#x000A;    &#x000A;<code class="prettify">    @Override&#x000A;    public int getOrderCount() {&#x000A;        return orders.size();&#x000A;    }</code>&#x000A;    &#x000A;<code class="prettify">    @PostConstruct&#x000A;    void initialize() {&#x000A;        orders = new ArrayList&lt;List&lt;String&gt;&gt;();&#x000A;    }&#x000A;}</code></pre>
          <p>Una buona cosa di quest&#8217;esempio è che possiamo giocare con le nuove funzionalità degli EJB 3.1 (la Singleton) dentro la sandbox di Arquillian. Ci piace ribadire che Arquillian è un ottimo ambiente per studiare e imparare oltre che per testare.</p>
          <p>Ora siamo pronti per scrivere il test Arquillian.</p>
          <h3 id="scrivere_un_test">Scrivere un Test</h3>
          <p>Stiamo per scrivere un test che simula l&#8217;aggiunta degli oggetti in un&#8217;istanza di <code>Basket</code> sotto forma di ordini e che verifica che l&#8217;ordine sia processato e registrato nell&#8217;istanza dell&#8217; <code>OrderRepository</code>.</p>
          <p class="info"><span>Naturalmente, testeremo soltanto l&#8217;implementazione in-memory. Se volete vedere come testare un&#8217;applicazione che usi il database potete consultare la guida <a href="/guides/testing_java_persistence">Testare la Persistenza Java</a> guide. Potrete poi tornare in questa guida e modificarne l&#8217;implementazione.</span></p>
          <p>Creiamo la classe <code>BasketTest</code> e annotiamola con <code>@RunWith(Arquillian.class)</code> per trasformarla in un test Arquillian:</p>
          <div class="filename">src/test/java/org/arquillian/example/BasketTest.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import org.jboss.arquillian.junit.Arquillian;&#x000A;import org.junit.runner.RunWith;</code>&#x000A;&#x000A;<code class="prettify">@RunWith(Arquillian.class)&#x000A;public class BasketTest {&#x000A;}</code></pre>
          <p>Definiamo poi un archivio di test che include il carrello, l&#8217;interfaccia order repository e l&#8217;implementazione singleton. Abbiamo anche bisogno di un file beans.xml vuoto per attivare la parte CDI (L&#8217;EJB è attivato automaticamente). Da notare come abbiamo il controllo completo del classpath definendo esplicitamente cosa mettere nell&#8217;archivio.</p>
          <div class="filename">src/test/java/org/arquillian/example/BasketTest.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import org.jboss.arquillian.container.test.api.Deployment;&#x000A;import org.jboss.arquillian.junit.Arquillian;&#x000A;import org.jboss.shrinkwrap.api.ShrinkWrap;&#x000A;import org.jboss.shrinkwrap.api.asset.EmptyAsset;&#x000A;import org.jboss.shrinkwrap.api.spec.JavaArchive;&#x000A;import org.junit.runner.RunWith;</code>&#x000A;&#x000A;<code class="prettify">@RunWith(Arquillian.class)&#x000A;public class BasketTest {&#x000A;    @Deployment&#x000A;    public static JavaArchive createDeployment() {&#x000A;        return ShrinkWrap.create(JavaArchive.class, "test.jar")&#x000A;            .addClasses(Basket.class, OrderRepository.class, SingletonOrderRepository.class)&#x000A;            .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");&#x000A;    }&#x000A;}</code></pre>
          <p>Ora rimane da fare fare l&#8217;injection del carrello e dell&#8217;order repository nel test ed eseguirlo. Eseguiremo l&#8217;injection dell&#8217;interfaccia EJB, non dell&#8217;implementazione. Il container EJB automaticamente troverà l&#8217;implementazione dell&#8217;interfaccia da usare.</p>
          <p>Per default in JUnit, i metodi <code>@Test</code> sono eseguiti in un ordine non definito. L&#8217;integrazione di JUnit su Arquillian prevede un&#8217;annotazione <code>@InSequence</code> che può essere usata per definire l&#8217;ordine di esecuzione. Noi useremo il <code>@InSequence</code> in questo test per eseguire prima l&#8217;inserimento di due ordini nel primo metodo di test, e poi assicurarsi che il repository conterrà questi due oggetti nel secondo metodo di test.</p>
          <div class="filename">src/test/java/org/arquillian/example/BasketTest.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import javax.ejb.EJB;&#x000A;import javax.inject.Inject;</code>&#x000A;&#x000A;<code class="prettify">import org.jboss.arquillian.container.test.api.Deployment;&#x000A;import org.jboss.arquillian.junit.Arquillian;&#x000A;import org.jboss.arquillian.junit.InSequence;&#x000A;import org.jboss.shrinkwrap.api.ShrinkWrap;&#x000A;import org.jboss.shrinkwrap.api.asset.EmptyAsset;&#x000A;import org.jboss.shrinkwrap.api.spec.JavaArchive;&#x000A;import org.junit.Assert;&#x000A;import org.junit.Test;&#x000A;import org.junit.runner.RunWith;</code>&#x000A;&#x000A;<code class="prettify">@RunWith(Arquillian.class)&#x000A;public class BasketTest {&#x000A;    @Deployment&#x000A;    public static JavaArchive createDeployment() {&#x000A;        return ShrinkWrap.create(JavaArchive.class, "test.jar")&#x000A;            .addClasses(Basket.class, OrderRepository.class, SingletonOrderRepository.class)&#x000A;            .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");&#x000A;    }</code>&#x000A;    &#x000A;<code class="prettify">    @Inject&#x000A;    Basket basket;</code>&#x000A;    &#x000A;<code class="prettify">    @EJB&#x000A;    OrderRepository repo;</code>&#x000A;    &#x000A;<code class="prettify">    @Test&#x000A;    @InSequence(1)&#x000A;    public void place_order_should_add_order() {&#x000A;        basket.addItem("sunglasses");&#x000A;        basket.addItem("suit");&#x000A;        basket.placeOrder();&#x000A;        Assert.assertEquals(1, repo.getOrderCount());&#x000A;        Assert.assertEquals(0, basket.getItemCount());</code>&#x000A;        &#x000A;<code class="prettify">        basket.addItem("raygun");&#x000A;        basket.addItem("spaceship");&#x000A;        basket.placeOrder();&#x000A;        Assert.assertEquals(2, repo.getOrderCount());&#x000A;        Assert.assertEquals(0, basket.getItemCount());&#x000A;    }</code>&#x000A;    &#x000A;<code class="prettify">    @Test&#x000A;    @InSequence(2)&#x000A;    public void order_should_be_persistent() {&#x000A;        Assert.assertEquals(2, repo.getOrderCount());&#x000A;    }&#x000A;}</code></pre>
          <p>Il test è stato scritto. Ora dobbiamo configurarlo e lanciarlo.</p>
          <h3 id="aggiungere_i_container_remoti">Aggiungere i Container remoti</h3>
          <p>Il test che abbiamo scritto usa sia CDI che EJB. Questa combinazione è utilizzabile in un ambiente integrato (come per esempio Weld Embedded o OpenEJB Embedded). È comunque più semplice usare direttamente un container EE compliant. In più, ci permette di eseguire test più realistici. Quindi al momento mettiamo da parte i container integrati.</p>
          <p>Nella guida precedente, abbiamo usato sia i container di tipo embedded che managed. In entrambi i casi, Arquillian deve lanciare il container quando viene eseguita la suite di test e deve fermarlo quando i test sono terminati. Cosa fare se abbiamo già un container attivo (o vogliamo lanciarne uno a scopo di test)? Quello è sicuramente il modo più rapido per lanciare i test. Anche se il container è molto veloce a partire, un container già avviato è sicuramente più rapido.</p>
          <p>I container remoti forniscono un ambiente di sviluppo ideale per i test di integrazione. Permettono anche di eseguire il debug in modo molto semplice, come vedremo più avanti. Dal momento che non ci sono referenze al container direttamente nel test, è possibile usare un container remoto durante gli sviluppi. In questo caso configureremo il container managed che è tralaltro la soluzione migliore negli ambienti di continous integration.</p>
          <p class="warning"><span>Il termine <em>remoto</em> si riferisce ad un processo separato, non necessariamente a una macchina separata, sebbene siano supportati entrambi gli scenari.</span></p>
          <p>Un container remoto è un processo standalone in cui Arquillian esegue il deploy tramite delle API client. Perciò abbiamo bisogno delle seguenti librerie:</p>
          <ul>
          	<li>API dei modelli (che possono semplicemnete essere aggiunti al pacchetto se il container non le fornisce già)</li>
          	<li>Il remote container adapter di Arquillian</li>
          	<li>Le API client per il deploy per comunicare con il processo del container</li>
          </ul>
          <p>Nel nostro file pom.xml, aggiungiamo due nuovi profili all&#8217;interno dell&#8217;elemento <code>&lt;profiles&gt;</code>. Il primo profilo usa il container remoto di Boss AS 7.1:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;profile&gt;&#x000A;    &lt;id&gt;arquillian-jbossas-remote&lt;/id&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;jboss-javaee-6.0&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.0.0.Final&lt;/version&gt;&#x000A;            &lt;type&gt;pom&lt;/type&gt;&#x000A;            &lt;scope&gt;provided&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.as&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;jboss-as-arquillian-container-remote&lt;/artifactId&gt;&#x000A;            &lt;version&gt;7.1.1.Final&lt;/version&gt;&#x000A;            &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.arquillian.protocol&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;arquillian-protocol-servlet&lt;/artifactId&gt;&#x000A;            &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/profile&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p class="info"><span>Di default, JBoss AS 7 usa il protocollo JMX per ricevere gli archivi di test. Noi siamo andati oltre e abbiamo aggiunto una dipendenza al protocollo Servlet nel profilo <code>arquillian-jbossas-managed</code> che potrà essere usato in futuro. Per istruzioni su come passare da JMX a Servlet rimandiamo a <a href="https://community.jboss.org/wiki/WhyDoIGetNoActiveContextsForScopeTypeWhenTestingOnJBossAS7">queste FAQ</a>.</span></p>
          <p>Il secondo profilo usa il container remoto di GlassFish 3.1.2:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;profile&gt;&#x000A;    &lt;id&gt;arquillian-glassfish-remote&lt;/id&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;jboss-javaee-6.0&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.0.0.Final&lt;/version&gt;&#x000A;            &lt;type&gt;pom&lt;/type&gt;&#x000A;            &lt;scope&gt;provided&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.weld&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;weld-api&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.1.Final&lt;/version&gt;&#x000A;            &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.arquillian.container&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;arquillian-glassfish-remote-3.1&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.0.0.CR3&lt;/version&gt;&#x000A;            &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/profile&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p class="info"><span>L&#8217;adapter remoto di GlassFish usa Jersey per comunicare con il container tramite JAX-RS (REST), che è integrato come dipendenza transitiva. Sono richieste le API Weld per gestire le eccezioni dei test all&#8217;interno del container.</span></p>
          <p>Una volta aggiunti i profili nel pom.xml, clicchiamo con il tasto destro sul progetto in Eclipse e selezioniamo Maven &gt; Update Project Configuration. Se il progetto mostra errori di compilazione, dobbiamo attivare uno dei due profili.</p>
          <p>Ricordiamoci che ci sono due modi per attivare un profilo Maven in Eclipse (presupponendo che stiamo usando il plugin <a href="http://www.eclipse.org/m2e">Maven Integration for Eclipse</a>):</p>
          <ol>
          	<li>Configurazione manuale (approccio standard)</li>
          	<li>selettore del profilo Maven (JBoss Tools)</li>
          </ol>
          <p>Riferitevi alla <a href="/guides/getting_started_it#test_across_containers">Guida Introduttiva</a> per istruzioni su come attivare un profilo. Una volta che il profilo è attivato, il progetto dovrebbe compilare con successo.</p>
          <p>Gli adapter per il container remoto si aspettano che il container sia avviato. Perciò, diamo un&#8217;occhiata alla configurazione dei container in modo che possiamo lanciarli comodamente dal nostro IDE prima di far partire i test.</p>
          <h3 id="configurazione_dei_server">Configurazione dei Server</h3>
          <p>Il modo più semplice per gestire i container remoti è di configurarli all&#8217;interno dell&#8217;IDE. Se vi sentite più a vostro agio con la riga di comando, potete saltare questo passaggio e lanciare il server utilizzando il rispettivo script di lancio.</p>
          <p>Mostriamo ora come aggiungere i controlli del server (container) in Eclipse. Il processo è simile per gli altri IDE. Con Eclipse, abbiamo bisogno sia di <a href="http://jboss.org/tools">JBoss Tools</a> che di <a href="http://marketplace.eclipse.org/content/glassfish-java-ee-application-server-plugin-eclipse/metrics">GlassFish Java EE Application Server Plugin</a>, entrambi disponibili nel MarketPlace di Eclipse.</p>
          <p>Da Eclipse, selezioniamo Window &gt; Show View &gt; Servers dalla barra principale. Una volta aperta la finestra, tasto destro e selezioniamo New &gt; Server. Creiamo un controllore del server per JBoss AS 7.1:</p>
          <p><img src="/images/guides/arquillian_tutorial_2_new_jbossas_server.png" alt="" /></p>
          <p>e un&#8217;altro per GlassFish 3.1.2:</p>
          <p><img src="/images/guides/arquillian_tutorial_2_new_glassfish_server.png" alt="" /></p>
          <p class="info"><span>Il wizard per JBoss AS richiede di selezionare un&#8217;installazione già esistente. Il wizard di Glassfish 3.1.2 fornisce un&#8217;opzione automatica per il download e l&#8217;estrazione della distribuzione.</span></p>
          <p>Una volta completato il wizard per il container, dovrebbe comparire questo nella finestra dei server:</p>
          <p><img src="/images/guides/arquillian_tutorial_2_servers_view.png" alt="" /></p>
          <p>Per lanciare un server, selezioniamo il blocco (mostrato graficamente) e clicchiamo sul tasto di play nella toolbar.</p>
          <p class="info"><span>Arquillian presuppone che i container vengano lanciati sulle porte di default. Se avete cambiato le porte, si può configurare il file arquillian.xml per specificare le porte usate per ogni container. Consultate la <a href="https://docs.jboss.org/author/display/ARQ/Container+adapters">reference guide</a> per maggiori dettagli.</span></p>
          <p>Ora che i container sono pronti e in attesa, è tempo di lanciare il test.</p>
          <h3 id="lanciare_il_test_arquillian">Lanciare il Test Arquillian</h3>
          <p>Per lanciare il test Arquillian, sono necessari tre passaggi:</p>
          <ol>
          	<li>Lanciare il container remoto</li>
          	<li>Attivare il profilo Maven che aggiunge il corrispondente container adapter al classpath</li>
          	<li>Lanciare il test</li>
          </ol>
          <p>Eseguiamo un test con JBoss AS.</p>
          <h4>Eseguire il Test su JBoss AS</h4>
          <p>Per lanciare il test su JBoss AS, dobbiamo lanciare prima il container JBoss AS. Apriamo la finestra Servers, selezioniamo JBoss AS 7.1, e clicchiamo sul bottone verde play. Attendiamo che finisca lo start (non dovrebbe impiegare molto tempo).</p>
          <p>Una volta che JBoss è avviato, attiviamo il profilo Maven <code>arquillian-jbossas-remote</code> tramite le proprietà di Maven o il selettore del profilo di JBoss Tools. L&#8217;editor del profilo in basso mostra la selezione corretta.</p>
          <p><img src="/images/guides/arquillian_tutorial_2_jbossas_profile_selection.png" alt="" /></p>
          <p>Infine, tasto destro sulla classe <code>BasketTest</code> e selezioniamo Run As &gt; JUnit Test. Si dovrebbe vedere una serie di attività nella Console e poi&#8230;una <strong class="greenbar">barra verde</strong> nella vista di JUnit!</p>
          <p>È anche possibile lanciare il test dalla riga di comando con Maven:</p>
          <pre class="command"><code class="command">$ mvn test -Parquillian-jbossas-remote -Dtest=BasketTest</code></pre>
          <p>Vedremo le seguenti righe stampate nella console:</p>
          <pre class="output"><code class="output">-------------------------------------------------------&#x000A;T E S T S&#x000A;-------------------------------------------------------&#x000A;Running org.arquillian.example.BasketTest&#x000A;...&#x000A;Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.844 sec</code></pre>
          <p><strong>Congratulazioni!</strong> È stata eseguita la nostra prima  <strong class="greenbar">barra verde</strong> con Arquillian usando un container remoto.</p>
          <p class="info"><span>È possibile ereditare l&#8217;EJB <code>OrderRepository</code> usando l&#8217;annotazione <code>@Inject</code> oltre che la <code>@EJB</code>. Provate!.</span></p>
          <p>Se vogliamo verificare che il singleton stia facendo il suo lavoro, andiamo avanti e rimuoviamo l&#8217;annotazione <code>@Singleton</code> dalla classe <code>SingletonOrderRepository</code> e sostituiamolo con uno <code>@Stateful</code>. Si dovrebbe vedere un&#8217;errore di asserzione durante l&#8217;esecuzione del test. Rimettiamo la vecchia annotazione e la barra ritornerà verde.</p>
          <p>Abbiamo terminato la prova con JBoss AS, ora clicchiamo sulla finestra Servers per fermare il server. Eseguiamo ora il test su GlassFish 3.1.2.</p>
          <h4>Lanciare il Test su GlassFish</h4>
          <p>Per lanciare il test sul server standalone GlassFish, lanciamo per prima cosa il server. Apriamo la finestra Servers, selezioniamo GlassFish 3.1.2 e clicchiamo sul bottone verde play. Attendiamo la fine dello start.</p>
          <p>Una volta che GlassFish è avviato, attiviamo il profilo Maven <code>arquillian-glassfish-remote</code> tramite le proprietà di Maven o il selettore del profilo di JBoss Tools. L&#8217;editor del profilo in basso mostra la selezione corretta.</p>
          <p><img src="/images/guides/arquillian_tutorial_2_glassfish_profile_selection.png" alt="" /></p>
          <p>Infine, tasto destro sulla classe <code>BasketTest</code> e selezioniamo Run As &gt; JUnit Test. Si dovrebbe vedere una serie di attività nella Console e poi&#8230; una <strong class="greenbar">barra verde</strong> nella vista di JUnit!</p>
          <p>È anche possibile lanciare il test dalla riga di comando con Maven:</p>
          <pre class="command"><code class="command">$ mvn test -Parquillian-glassfish-remote -Dtest=BasketTest</code></pre>
          <p>Vedremo le seguenti righe stampate nella console:</p>
          <pre class="output"><code class="output">-------------------------------------------------------&#x000A;T E S T S&#x000A;-------------------------------------------------------&#x000A;Running org.arquillian.example.BasketTest&#x000A;...&#x000A;Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3.549 sec</code></pre>
          <p><strong>Congratulazioni!</strong> Ecco un&#8217;altra <strong class="greenbar">barra verde</strong></p>
          <p>Dovremmo aver modo di lanciare il test anche sul profilo Embedded GlassFish configurato nella guida precedente. Proviamo ad eseguirlo. È anche possibile eseguire il debug molto facilmente.</p>
          <p>Naturalmente, il debug di un test in un container integrato è semplice perché gira all&#8217;interno dello stesso processo del test. Ma come fare con un container remoto?</p>
          <h3 id="debug_del_test_arquillian">Debug del Test Arquillian</h3>
          <p>Eseguire il debug del test in un container remoto? Sembra arduo. Sorpresa! Non lo è. Bisogna solo fare una correzione al debug visto nella guida precedente e aggiungerne uno nuovo:</p>
          <ol>
          	<li><strong>Debug del container remoto</strong></li>
          	<li>Attivare il profilo Maven che aggiunge il corrispondente container adapter al classpath</li>
          	<li><strong>Mettere un breakpoint</strong></li>
          	<li>Lanciare il test</li>
          </ol>
          <p>Nella finestra Servers, noteremo che c&#8217;è un&#8217;icona di un insetto subito accanto al bottone verde play. Clicchiamo sul bottone per lanciare il server in modalità debug. Eclipse automaticamente connettterà il suo debugger al container.</p>
          <p>Mettiamo un breakpoint sul metodo <code>addOrder()</code> del bean <code>SingletonOrderRepository</code>. Lanciamo nuovamente il test cliccando col tasto destro e selezionando Run As &gt; JUnit Test.</p>
          <p class="warning"><span>Non c&#8217;è bisogno di usare Debug As &gt; JUnit Test. Il codice del test è eseguito dentro al container, che si trova già in modalità debug.</span></p>
          <p>Il test dovrebbe fermarsi al breakpoint. Se si sta usando JBoss AS, si può aprire la console di amministrazione e verificare che l&#8217;applicazione di test sia correntemente installata sul server.</p>
          <p>Se usiamo il browser dello stack trace nella finestra di Debug di Eclipse, noteremo che il server è controllato con un protocollo remoto (JMX o Servlet) e che JUnit è stato lanciato dentro il container.</p>
          <p><img src="/images/guides/arquillian_tutorial_2_debug_remote_test.png" alt="" /></p>
          <p>Stiamo usando il server dal nostro IDE.</p>
          <p class="warning"><span>Se vedete il messaggio &#8220;Source not found&#8221; nell&#8217;editor quando il debugger si ferma al breakpoint, è necessario aggiungere il progetto alla configurazione del debug. Clicchiamo su &#8220;Edit Source Lookup Path&#8230;&#8221;, poi su &#8220;Add&#8230;&#8221;, selezioniamo il progetto Java, mettiamo il check sul box vicino al progetto e clicchiamo su &#8220;OK&#8221;. Voilà! Codice sorgente.</span></p>
          <h4>Sorgenti prelevabili da Librerie Esterne</h4>
          <p>Se nel nostro test usiamo delle classi fornite da una libreria esterna (codice fuori dall&#8217;applicazione), abbiamo bisogno di aggiungere il codice sorgente della libreria.</p>
          <p class="info"><span>Questa configurazione non è necessaria se usiamo un progetto Maven e i sorgenti della libreria sono disponibili in un repository Maven. Quando arriviamo ad un breakpoint su di una libreria non ancora disponibile localmente, attendiamo un pò di tempo per il download e il codice sorgente apparirà. Se non appare, probabilmente il sorgente non è nel repository e ci sarà bisogno di aggiungerlo a mano .</span></p>
          <p>Qui i passi necessari per aggiungere il sorgente della libreria nella configurazione del debug:</p>
          <ol>
          	<li>Selezioniamo <code>Run &gt; Debug Configurations...</code> dalla barra principale</li>
          	<li>Selezioniamo il nome della classe di test nella categoria JUnit (o TestNG)</li>
          	<li>Selezioniamo il tab Source</li>
          	<li>Clicchiamo sul bottonr Add&#8230; a destra</li>
          	<li>Se il codice sorgente è in un altro progetto:
          	<ol>
          		<li>Selezioniamo Java Project</li>
          		<li>Selezioniamo il progetto che contiene la classe su cui eseguire il debug</li>
          		<li>Clicchiamo su OK sulla finestra di Selezine del Progetto</li>
          	</ol></li>
          	<li>Se il codice sorgente è in una Libreria:
          	<ol>
          		<li>Selezioniamo External Archive</li>
          		<li>Navighiamo fino all&#8217;archivio che contiene il codice sorgente (che naturalmente deve essere già stato scaricato)</li>
          	</ol></li>
          	<li>Clicchiamo su Close dalla finestra di Configurazione del Debug</li>
          </ol>
          <p>Dovranno essere eseguiti questi passi per ogni classe di test che vogliamo usare per il debug, sebbene nel nostro caso lo facciamo solo una volta (la configurazione del debug va raffinata pezzo per pezzo).</p>
          <h3 id="debug_di_un_managed_server">Debug di un Managed Server</h3>
          <p>È possibile eseguire il debug su un managed container? Sì! Abbiamo solo bisogno di una configurazione extra.</p>
          <p>Dal momento che Arquillian interagisce sullo start e stop del container, dobbiamo istruire Arquillian per lanciare il container in modalità debug. Si tratta di configurazioni della JVM che Arquillian dovrà passare al server, che noi faremo tramite le proprietà di configurazione del container.</p>
          <p>Prima di fare ciò, dobbiamo pensare a come connetterci al debugger. A meno che siamo superveloci a usare il mouse, è una vera impresa connettersi al debugger prima che Arquillian inizia il lancio dei test. Fortunatamente, possiamo dire alla JVM di attendere il connettore del debug prima di eseguire l&#8217;applicazione, nel nostro caso JBoss AS. Questo ci darà il tempo di cliccare sul bottone debug dell&#8217;IDE per connetterci al processo.</p>
          <p>Qui c&#8217;è la configurazione che dobbiamo aggiungere al descrittore di Arquillian, arquillian.xml, per far sì che Arquillian lanci il server in modalità debug: (Assicuriamoci che non ci siano spazi subito dopo i tag <code>&lt;property&gt;</code>)</p>
          <div class="filename">src/test/resources/arquillian.xml</div>
          <pre class="prettify"><code class="prettify">&lt;arquillian xmlns="http://jboss.org/schema/arquillian"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#x000A;    xsi:schemaLocation="&#x000A;        http://jboss.org/schema/arquillian&#x000A;        http://jboss.org/schema/arquillian/arquillian_1_0.xsd"&gt;&#x000A;    &lt;container qualifier="jbossas-managed" default="true"&gt;&#x000A;        &lt;configuration&gt;&#x000A;            &lt;property name="jbossHome"&gt;target/jboss-as-7.1.1.Final&lt;/property&gt;&#x000A;            &lt;property name="javaVmArguments"&gt;-Xmx512m -XX:MaxPermSize=128m&#x000A;                -Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=y&#x000A;            &lt;/property&gt;&#x000A;        &lt;/configuration&gt;&#x000A;    &lt;/container&gt;&#x000A;&lt;/arquillian&gt;</code></pre>
          <p>Da notare il flag <code>suspend=y</code>. Dice al processo di attendere che il debugger si connetta. Abbiamo configurato la porta su 8787, che dovremo poi mettere nella configurazione del debugger. Ecco i passi per lanciare il test:</p>
          <ol>
          	<li>Attiviamo il profilo Maven <code>arquillian-jbossas-managed</code> (riferitevi alla <a href="/guides/getting_started_it">Guida Introduttiva</a>)</li>
          	<li>Lanciamo il test</li>
          </ol>
          <p>Nella Console, dovremmo vedere che Arquillian ha lanciato un&#8217;istanza di JBoss AS e che sta in attesa che il debugger si connetta:</p>
          <pre class="output"><code class="output">Listening for transport dt_socket at address: 8787</code></pre>
          <p>Tutto quello che ora dobbiamo fare è connettere il debugger. Qui vediamo come configurare e lanciare il debugger su Eclipse:</p>
          <ol>
          	<li>Selezioniamo <code>Run &gt; Debug Configurations...</code> dal menù principale</li>
          	<li>Tasto destro su Remote Java Application e selezioniamo New</li>
          	<li>Nel campo Name, inseriamo &#8220;Debug JBoss AS&#8221;</li>
          	<li>Nel campo Port mettiamo &#8220;8787&#8221;</li>
          	<li>Clicchiamo sul bottone Debug</li>
          </ol>
          <p>Questo è lo screenshot della configurazione che abbiamo creato:</p>
          <p><img src="/images/guides/arquillian_tutorial_2_eclipse_debug_configuration.png" alt="" /></p>
          <p>Una volta cliccato sul bottone Debug, JBoss AS dovrebbe continuare l&#8217;esecuzione, e si fermerà una volta raggiunto il breakpoint del test. Voilà! Abbiamo eseguito il debug del managed container!</p>
          <h3 id="esportazione_del_deployment">Esportazione del Deployment</h3>
          <p>A volte è necessario avere fisicamente il pacchetto di deploy disponibile per processi di deploy più elaborati o soltanto per avere un maggior controllo sulle risorse inserite. Fortunatamente, Arquillian fornisce un modo per esportare l&#8217;archivio prima di eseguire il deploy. È sufficiente assegnare una directory assoluta o relativa nella proprietà <code>deploymentExportPath</code> dell&#8217;elemento <code>&lt;engine&gt;</code> nel arquillian.xml e Arquillian esporterà l&#8217;archivio in quella directory ad ogni avvio del test.</p>
          <div class="filename">src/test/resources/arquillian.xml</div>
          <pre class="prettify"><code class="prettify">&lt;arquillian xmlns="http://jboss.org/schema/arquillian"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#x000A;    xsi:schemaLocation="&#x000A;        http://jboss.org/schema/arquillian&#x000A;        http://jboss.org/schema/arquillian/arquillian_1_0.xsd"&gt;&#x000A;    &lt;engine&gt;&#x000A;        &lt;property name="deploymentExportPath"&gt;target/deployments&lt;/property&gt;&#x000A;    &lt;/engine&gt;&#x000A;&lt;/arquillian&gt;</code></pre>
          <p>Per attivare l&#8217;esportazione su un singolo test, si può usare l&#8217;argomento <code>arquillian.deploymentExportPath</code> da passare alla VM. Per esempio: <code>-Darquillian.deploymentExportPath=target/deployments/</code>.</p>
          <p>Ora avviamo un test e verifichiamo la directory target/deployments. Si dovrebbe vedere un file con estensione .jar, .war o .ear. (Arquillian potrebbe mettere un archivio definito nel test dentro qualche altro archivio se lo si desidera). Possiamo vedere il contenuto di questi file usando un qualunque gestore di archivi. Sperando che in questo modo sia più facile risolvere eventuali problemi di classi non trovate o risorse mancanti.</p>
          <p>Giunti a questo punto, abbiamo imparato come lanciare e fare il debug su container integrati, remoti e managed. Non c&#8217;è altro da vedere per ora. Divertitevi a scrivere <em>test reali</em> e siatene orgogliosi!</p>
          <h3 id="share">Share the Knowledge</h3>
          <p>Find this guide useful?</p>
          <p class="post_to_twitter"><a href="http://twitter.com/home/?status=Just%20read%20the%20%23Arquillian%20Guida%20Introduttiva:%20Rispolveriamo%20e%20Ripetiamo%20guide%20and%20got%20a%20%23greenbar!%20Get%20yours.%20http://arquillian.org/guides/getting_started_rinse_and_repeat_it/"><img src="/images/post_to_twitter.png" alt="" /></a></p>
          <div class="g-plusone" data-size="tall"></div>
          <p>There&#8217;s a lot more about Arquillian to cover. If you&#8217;re ready to learn more, check out the <a href="/guides">other available guides</a>.</p>
          <h4>Feedback</h4>
          <p>Find a bug in the guide? Something missing? You can fix it by <a href="http://github.com/arquillian/arquillian.github.com">forking this website</a>, making the correction and <a href="http://help.github.com/send-pull-requests">sending a pull request</a>. If you&#8217;re just plain stuck, feel free to ask a question in the <a href="http://community.jboss.org/en/arquillian?view=discussions">user discussion forum</a>.</p>
          <h4>Recent Changelog</h4>
          <ul>
            <li>
              Feb 21, 2017:
              Adds announcement for cube 1.0.0.alpha18
              <em>by Alex Soto</em>
            </li>
          </ul>
          <p>
            <a href="https://github.com/arquillian/arquillian.github.io/commits/develop/guides/getting_started_rinse_and_repeat_it.textile">See full history &raquo;</a>
          </p>
        </div>
        <div id="sidebar">
          <div id="toc">
            <h3 class="chapter_header">Chapters</h3>
            <ol class="chapters">
              <li>
                <a href="#prerequisiti" id="prerequisiti_link">Prerequisiti</a>
              </li>
              <li>
                <a href="#creare_i_componenti" id="creare_i_componenti_link">Creare i Componenti</a>
              </li>
              <li>
                <a href="#fase_di_implementazione" id="fase_di_implementazione_link">Fase di implementazione</a>
              </li>
              <li>
                <a href="#scrivere_un_test" id="scrivere_un_test_link">Scrivere un Test</a>
              </li>
              <li>
                <a href="#aggiungere_i_container_remoti" id="aggiungere_i_container_remoti_link">Aggiungere i Container remoti</a>
              </li>
              <li>
                <a href="#configurazione_dei_server" id="configurazione_dei_server_link">Configurazione dei Server</a>
              </li>
              <li>
                <a href="#lanciare_il_test_arquillian" id="lanciare_il_test_arquillian_link">Lanciare il Test Arquillian</a>
              </li>
              <li>
                <a href="#debug_del_test_arquillian" id="debug_del_test_arquillian_link">Debug del Test Arquillian</a>
              </li>
              <li>
                <a href="#debug_di_un_managed_server" id="debug_di_un_managed_server_link">Debug di un Managed Server</a>
              </li>
              <li>
                <a href="#esportazione_del_deployment" id="esportazione_del_deployment_link">Esportazione del Deployment</a>
              </li>
              <li>
                <a href="#share" id="share_link">Share the Knowledge</a>
              </li>
            </ol>
          </div>
        </div>
        <script>
          $(window).load(function() { activateScrollingToc(['prerequisiti', 'creare_i_componenti', 'fase_di_implementazione', 'scrivere_un_test', 'aggiungere_i_container_remoti', 'configurazione_dei_server', 'lanciare_il_test_arquillian', 'debug_del_test_arquillian', 'debug_di_un_managed_server', 'esportazione_del_deployment', 'share']) })
        </script>
      </div>
    </div>
    <footer>
      <div class="container">
        <div class="project">
          <img src="/images/arquillian_logo_200px.png" />
          <p class="bottom">
            &#169;
            Copyright 2009-2017 Red Hat, Inc.
            <br />
            <i class="icon-fire"></i>
            Mixed with <a href="http://twitter.github.com/bootstrap">Bootstrap</a>. Baked by <a href="http://awestruct.org">Awestruct</a>.
            <br />
            <i class="icon-share-alt"></i>
            Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.
            <br />
            Code released under <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, v2.0</a>.
          </p>
        </div>
        <div class="footer-nav">
          <h4>Learn</h4>
          <ul>
            <li>
              <a href="/invasion">Mission</a>
            </li>
            <li>
              <a href="/features">Features</a>
            </li>
            <li>
              <a href="/docs">Documentation</a>
            </li>
            <li>
              <a href="/guides">Guides</a>
            </li>
            <li>
              <a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Manual</a>
            </li>
            <li>
              <a href="http://community.jboss.org/en/arquillian/faq">FAQs</a>
            </li>
          </ul>
        </div>
        <div class="footer-nav">
          <h4>Get Involved</h4>
          <ul>
            <li>
              <a href="http://community.jboss.org/en/arquillian?view=discussions">Forums</a>
            </li>
            <li>
              <a href="https://issues.jboss.org/browse/ARQ">Issue Tracker</a>
            </li>
            <li>
              <a href="https://github.com/arquillian">Source Code</a>
            </li>
            <li>
              <a href="/community/contributors">Contributors</a>
            </li>
            <li>
              <a href="https://community.jboss.org/groups/testing">Testing SIG</a>
            </li>
          </ul>
        </div>
        <div class="sponser">
          <div class="follow-us">
            <h4>Stay Informed</h4>
            <ul>
              <li>
                <a href="https://plus.google.com/100660127586085393031?rel=author"><img alt="Google+" src="/images/social/googleplus-16.png" title="Follow Arquillian on Google+" /></a>
              </li>
              <li>
                <a href="https://twitter.com/#!/search/%23arquillian"><img alt="Twitter" src="/images/social/twitter-16.png" title="Browse the #arquillian hashtag on Twitter" /></a>
              </li>
              <li>
                <a href="http://www.linkedin.com/groups?gid=3120340"><img alt="LinkedIn" src="/images/social/linkedin-16.png" title="Join the Arquillian group on LinkedIn" /></a>
              </li>
              <li>
                <a href="http://vimeo.com/channels/arquillian"><img alt="Vimeo" src="/images/social/vimeo-16.png" title="Follow the Arquillian channel on Vimeo" /></a>
              </li>
            </ul>
          </div>
          <p>This website is open source! If you want to improve it, <a href="http://github.com/arquillian/arquillian.github.com">fork the project</a>, hack on it, then send a <a href="https://help.github.com/articles/using-pull-requests">pull request</a>. You can also view the <a href="http://www.seethestats.com/site/arquillian.org">visitor stats</a>.</p>
          <p class="image"><a href="http://jboss.org"><img src="/images/jboss_redhat_branding.png" class="branding" title="Red Hat, Inc." alt="Red Hat, Inc." /></a></p>
          <p>Arquillian is a <a href="http://jboss.org">JBoss Community</a> project and development is sponsored by Red Hat, Inc.</p>
          <p class="bottom"><a href="http://www.redhat.com/legal/legal_statement.html">Terms of Use</a> | <a href="http://www.redhat.com/legal/privacy_statement.html">Privacy Policy</a></p>
        </div>
        <a class="visible-desktop" href="#" id="toTop">Top</a>
      </div>
    </footer>
    <script>
      $(function() {
        $('html').addClass('ready');
        prettify();
        activateFooterGravity();
        activateTooltips();
        activateToTopControl();
      });
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.0.2/bootstrap.min.js"></script>
    <script src="/javascripts/prettify.js"></script>
    <script src="/javascripts/site.js?0e37e0c96bdb29499b3d12aff4b9a4b3f556c4da"></script>
    <script src="/javascripts/jquery-scroll.js"></script>
    <script src="http://apis.google.com/js/plusone.js"></script>
    <script>
      (function() {
        var po = document.createElement('script'); po.async = true; po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount','UA-18727998-3']);
    _gaq.push(['_trackPageview']);
    (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
