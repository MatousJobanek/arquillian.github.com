<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Guida Introduttiva &#183; Arquillian Guides</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="Impariamo come aggiungere Arquillian alla suite di test del nostro progetto e scrivere il nostro primo test." name="description" />
    <link href="/blog/atom.xml" rel="alternate" title="Arquillian blog Atom feed" type="application/atom+xml" />
    <link href="/stylesheets/screen.css?db72fb4a28d6da962db69350e86fd27246e1be4c" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/r29/html5.js"></script>
    <![endif]-->
    <link href="/favicon.ico" rel="shortcut icon" />
  </head>
  <body class="guide">
    <header class="navbar navbar-fixed-top" id="banner" role="banner">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <div class="g-plusone-slot">
            <div class="g-plusone" data-annotation="none"></div>
          </div>
          <a class="brand" href="/">
            <span class="logo"></span>
            <span class="name">Arquillian</span>
          </a>
          <nav class="nav-collapse" role="navigation">
            <ul class="nav">
              <li><a href="/invasion/">Invasion!</a></li>
              <li><a href="/features/">Features</a></li>
              <li class="active"><a href="/guides/">Guides</a></li>
              <li><a href="/docs/">Docs</a></li>
              <li><a href="/blog/">Blog</a></li>
              <li><a href="/community/">Community</a></li>
              <li><a href="/modules/">Modules</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </header>
    <div id="main" role="main">
      <div id="content-header">
        <div class="container">
          <div class="headline">
            <h1>
              <a href="/guides/">Arquillian Guides</a>
              <small>Designed exclusively to teach you how to use Arquillian to write real tests.</small>
            </h1>
            <div class="directory">
              <a class="guides_menu" href="./" id="guides_menu">
                Guides Index
                <i class="icon-menu-closed"></i>
              </a>
              <div id="guides" style="display: none">
                <a class="guides_menu" href="./">
                  Guides Index
                  <i class="icon-menu-open"></i>
                </a>
                <hr class="clear" />
                <dl class="beg">
                  <dt>First Steps</dt>
                  <dd><a href="/guides/getting_started/">Getting Started</a>
                  <br />
                  <a href="/guides/getting_started/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/getting_started_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/getting_started_el_gr/"><img class="flag" rel="tooltip" src="/images/flags/el_gr.png" title="Ελληνικά (el_gr)" /></a>
                  <a href="/guides/getting_started_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/getting_started_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/getting_started_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/getting_started_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/getting_started_nl/"><img class="flag" rel="tooltip" src="/images/flags/nl.png" title="Nederlands (nl)" /></a>
                  <a href="/guides/getting_started_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/getting_started_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/getting_started_sk/"><img class="flag" rel="tooltip" src="/images/flags/sk.png" title="Slovenčina (sk)" /></a>
                  <a href="/guides/getting_started_sv_se/"><img class="flag" rel="tooltip" src="/images/flags/sv_se.png" title="Svenska (sv_se)" /></a>
                  <a href="/guides/getting_started_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/getting_started_rinse_and_repeat/">Getting Started: Rinse and Repeat</a>
                  <br />
                  <a href="/guides/getting_started_rinse_and_repeat/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/getting_started_rinse_and_repeat_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/get_started_faster_with_forge/">Get Started Faster with Forge</a></dd>
                  <dd><a href="/guides/shrinkwrap_introduction/">Creating Deployable Archives with ShrinkWrap</a>
                  <br />
                  <a href="/guides/shrinkwrap_introduction/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/shrinkwrap_introduction_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/shrinkwrap_introduction_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/shrinkwrap_introduction_it/"><img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" /></a>
                  <a href="/guides/shrinkwrap_introduction_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/shrinkwrap_introduction_pl/"><img class="flag" rel="tooltip" src="/images/flags/pl.png" title="Polski (pl)" /></a>
                  <a href="/guides/shrinkwrap_introduction_pt/"><img class="flag" rel="tooltip" src="/images/flags/pt.png" title="Português (pt)" /></a>
                  <a href="/guides/shrinkwrap_introduction_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                </dl>
                <dl class="int">
                  <dt>More Coverage</dt>
                  <dd><a href="/guides/testing_java_persistence/">Testing Java Persistence</a>
                  <br />
                  <a href="/guides/testing_java_persistence/"><img class="flag" rel="tooltip" src="/images/flags/en.png" title="English (en)" /></a>
                  <a href="/guides/testing_java_persistence_de/"><img class="flag" rel="tooltip" src="/images/flags/de.png" title="Deutsch (de)" /></a>
                  <a href="/guides/testing_java_persistence_es/"><img class="flag" rel="tooltip" src="/images/flags/es.png" title="Español (es)" /></a>
                  <a href="/guides/testing_java_persistence_fr/"><img class="flag" rel="tooltip" src="/images/flags/fr.png" title="Française (fr)" /></a>
                  <a href="/guides/testing_java_persistence_ja/"><img class="flag" rel="tooltip" src="/images/flags/ja.png" title="日本 (ja)" /></a>
                  <a href="/guides/testing_java_persistence_zh_cn/"><img class="flag" rel="tooltip" src="/images/flags/zh_cn.png" title="简体中文 (zh_cn)" /></a></dd>
                  <dd><a href="/guides/functional_testing_using_graphene/">Functional Testing using Drone and Graphene</a></dd>
                  <dd><a href="/guides/testing_in_the_cloud/">Testing in the Cloud</a></dd>
                </dl>
                <dl class="adv">
                  <dt>Enhance</dt>
                  <dd><a href="/guides/developing_a_container_adapter/">Developing a Container Adapter</a></dd>
                </dl>
                <dl class="ref">
                  <dt>Reference</dt>
                  <dd><a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Reference Guide</a></dd>
                  <dd><a href="http://docs.jboss.org/arquillian/aggregate/latest">API &amp; SPI Docs</a></dd>
                  <dd><a href="http://community.jboss.org/wiki/ArquillianMigrationGuides">Migration Guides</a></dd>
                  <dd><a href="http://community.jboss.org/en/arquillian/faq">FAQs</a></dd>
                </dl>
              </div>
            </div>
            <script>$(function() { activateGuideMenuControl() })</script>
          </div>
        </div>
      </div>
      <div class="container" id="guide">
        <div id="content" lang="it">
            <div class="header">
            <div class="titlebar">
            <h2>Guida Introduttiva</h2>
            <div class="btn-group">
              <a class="btn" href="https://github.com/arquillian/arquillian.github.io/edit/develop/guides/getting_started_it.textile">Edit this file</a>
            </div>
          </div>
            <div class="authors"><strong>Author:</strong>
          <a href="/community/mojavelinux">Dan Allen</a>  <strong style="padding-left: 10px;">Translator:</strong>
          <a href="/community/flashboss">Luca Stancapiano</a>  <strong style="padding-left: 10px;">Language:</strong>
          <img class="flag" rel="tooltip" src="/images/flags/it.png" title="Italiano (it)" />
          <br />
          <strong style="padding-left: 0px;">Tags:</strong>
          cdi, weld, maven, forge, eclipse  <strong style="padding-left: 10px;">Last Update:</strong>May 18, 2017</div>
            <p>Questa guida introduce Arquillian. Alla fine della lettura, potrete:</p>
            <ul>
          	<li>Aggiungere l&#8217;infrastruttura di Arquillian ad un progetto basato su Maven</li>
          	<li>Scrivere un test di Arquillian che lavora su un bean <acronym title="Contexts and Dependency Injection">CDI</acronym></li>
          	<li>Eseguire i test di Arquillian su container multipli tramite Maven ed Eclipse</li>
          </ul>
            <p>Queste conoscenze verranno apprese inserendo Arquillian in una suite di test di un&#8217;applicazione Java EE basata su Maven. Abbiamo ideato questa guida in modo da essere di <em>semplice lettura</em> per poter iniziare subito a lavorare!</p>
            </div>
            <h3 id="presupposti">Presupposti</h3>
          <p>Il modo più semplice di usare Arquillian è incorporarlo nella suite di test di un progetto usando un tool di build basato su dipendenze. Oggi, il più usato è <a href="http://maven.apache.org">Apache Maven</a>. Questa guida permetterà di ottenere la vostra prima <strong class="greenbar">green bar</strong> usando un progetto Maven.</p>
          <p class="info"><span>Arquillian non è legato nè a Maven, nè ad alcun altro tool di building. Può essere integrato anche&#8212;forse anche portando migliori prestazioni&#8212;su progetti basati su Ant o Gradle. E&#8217; preferibile un tool di dependency management poichè semplifica l&#8217;inclusione delle librerie di Arquillian. Per quanto riguarda Maven sono già distribuite nel <a href="http://search.maven.org">Maven Central repository</a>.</span></p>
          <p>Questa guida presuppone che abbiate Maven disponibile nella shell dei comandi oppure nell&#8217;IDE(Integrated Development Environment). Altrimenti, eseguite il <a href="http://maven.apache.org/download.html">download e installazione di Maven</a>. Avrete bisogno della <a href="http://www.oracle.com/technetwork/java/javase/downloads"><acronym title="Java Development Kit">JDK</acronym> 1.5</a> o superiore installata nella vostra macchina, sebbene sia preferibile la JDK 1.6.</p>
          <h3 id="creare_un_nuovo_progetto">Creare un Nuovo Progetto</h3>
          <p>Ci sono due modi che raccomandiamo di usare per creare un nuovo progetto Maven:</p>
          <ol>
          	<li><a href="#generate_project_from_archetype">Generare un progetto da un Archetype di Maven</a></li>
          	<li><a href="#create_project_using_forge">Creare e personalizzare un progetto tramite JBoss Forge</a></li>
          </ol>
          <p><a href="http://jboss.org/forge">JBoss Forge</a> è di gran lunga il più semplice, ma questa guida offre entrambe le opzioni nel caso non vi sentiate pronti a usare JBoss Forge. Scegliete l&#8217;opzione che più vi soddisfa.</p>
          <p class="info"><span>Se avete un progetto Maven già pronto, potete usare questa sezione per confrontarlo e assicurarvi che tutte le dipendenze siano presenti prima di iniziare.</span></p>
          <h4 id="generate_project_from_archetype">Generare un Progetto da un Archetype di Maven</h4>
          <p>Per prima cosa, creiamo un progetto Java basato su Maven con il seguente comando:</p>
          <pre class="command"><code class="command">$ mvn archetype:generate -DarchetypeGroupId=net.avh4.mvn.archetype \&#x000A;-DarchetypeArtifactId=java-1.6-archetype</code></pre>
          <p><em>Copiamo il testo dopo il <code>$</code> e incolliamolo nella shell dei comandi</em>. Al prompt, inseriamo il valore mostrato dopo ogni virgoletta nel pannello in basso. Premiamo Enter dopo ogni valore (come indicato da <code>&lt;ENTER&gt;</code>).</p>
          <pre class="output"><code class="output">Define value for property 'groupId': : org.arquillian.example &lt;ENTER&gt;&#x000A;Define value for property 'artifactId': : arquillian-tutorial &lt;ENTER&gt;&#x000A;Define value for property 'version': : &lt;ENTER&gt;&#x000A;Define value for property 'package': : &lt;ENTER&gt;&#x000A;Confirm properties configuration:&#x000A;groupId: org.arquillian.example&#x000A;artifactId: arquillian-tutorial&#x000A;version: 1.0-SNAPSHOT&#x000A;package: org.arquillian.example&#x000A;Y: : &lt;ENTER&gt;</code></pre>
          <p>Il comando ha creato un progetto Maven dentro la directory corrente in una nuova directory chiamata <code>arquillian-tutorial</code>. Entriamo in questa nuova directory. La struttura dei file del progetto è mostrata in basso.</p>
          <ul class="filetree">
          	<li>src/
          	<ul>
          		<li>main/
          		<ul>
          			<li>java/ &#8211; Qui vanno tutti i file sorgenti Java dell&#8217;applicazione (sotto il package Java)</li>
          			<li>resources/ &#8211; Qui vanno tutti i file di configurazione dell&#8217;applicazione</li>
          		</ul></li>
          		<li>test/
          		<ul>
          			<li>java/ &#8211; Qui vanno tutti i sorgenti Java delle classi di test (sotto il package Java)</li>
          			<li>resources/ &#8211; Qui vanno tutti i file di configurazione dei test (p.es., arquillian.xml)</li>
          		</ul></li>
          	</ul></li>
          	<li>pom.xml &#8211; Il file di build di Maven. Istruisce Maven su come deve essere costruito il progetto.</li>
          </ul>
          <p>Il generatore del progetto ha creato anche un package Java con nome <code>org.arquillian.example</code> sotto le due directory <code>java</code>. Qui dovremo mettere tutti i sorgenti Java invece della root <code>java</code>.</p>
          <p>Andiamo avanti e apriamo il <code>pom.xml</code> nel nostro editor. Dovreste vedere un file XML contenente le informazioni base del progetto, una sezione build e una sezione dependencies.</p>
          <p class="info"><span>Da notare che il progetto è configurato con Java 1.6 e JUnit 4.8, rispettivamente le versioni minime di Java e JUnit raccomandate da Arquillian.</span></p>
          <p class="warning"><span>Arquillian supporta anche TestNG 5 ma in questa guida ci limiteremo a usare JUnit</span></p>
          <p><strong>Tutti gli elementi <code>&lt;dependency&gt;</code> sotto la dependency JUnit possono essere rimossi se non richiesti.</strong> Dopo questa modifica, il file dovrebbe diventare uguale al contenuto qui in basso (leggermente riformattato):</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#x000A;&lt;project xmlns="http://maven.apache.org/POM/4.0.0"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#x000A;    xsi:schemaLocation="&#x000A;        http://maven.apache.org/POM/4.0.0&#x000A;        http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;&#x000A;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</code>&#x000A;&#x000A;<code class="prettify">    &lt;groupId&gt;org.arquillian.example&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;arquillian-tutorial&lt;/artifactId&gt;&#x000A;    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;&#x000A;    &lt;packaging&gt;jar&lt;/packaging&gt;</code>&#x000A;&#x000A;<code class="prettify">    &lt;name&gt;arquillian-tutorial&lt;/name&gt;&#x000A;    &lt;url&gt;http://arquillian.org&lt;/url&gt;</code>&#x000A;&#x000A;<code class="prettify">    &lt;properties&gt;&#x000A;        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;&#x000A;    &lt;/properties&gt;</code>&#x000A;&#x000A;<code class="prettify">    &lt;build&gt;&#x000A;        &lt;plugins&gt;&#x000A;            &lt;plugin&gt;&#x000A;                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#x000A;                &lt;version&gt;2.3.2&lt;/version&gt;&#x000A;                &lt;configuration&gt;&#x000A;                    &lt;source&gt;1.6&lt;/source&gt;&#x000A;                    &lt;target&gt;1.6&lt;/target&gt;&#x000A;                &lt;/configuration&gt;&#x000A;            &lt;/plugin&gt;&#x000A;        &lt;/plugins&gt;&#x000A;    &lt;/build&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;junit&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;junit&lt;/artifactId&gt;&#x000A;            &lt;version&gt;4.12&lt;/version&gt;&#x000A;            &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/project&gt;</code></pre>
          <p>Iniziamo ora a scrivere i componenti Java EE 7. Abbiamo quindi bisogno di aggiungere le API Java EE 7 al classpath in modo da poterle compilare.</p>
          <p>Apriamo nuovamente il file <code>pom.xml</code> e aggiungiamo il seguente frammento XML direttamente dentro l&#8217;elemento <code>&lt;dependencies&gt;</code>. Qui in basso vediamo come dovrebbe diventare l&#8217;elemento <code>&lt;dependencies&gt;</code> una volta terminato:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependencies&gt;&#x000A;    &lt;dependency&gt;&#x000A;        &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;        &lt;version&gt;1.0.3.Final&lt;/version&gt;&#x000A;        &lt;type&gt;pom&lt;/type&gt;&#x000A;        &lt;scope&gt;provided&lt;/scope&gt;&#x000A;    &lt;/dependency&gt;&#x000A;    &lt;dependency&gt;&#x000A;        &lt;groupId&gt;junit&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;junit&lt;/artifactId&gt;&#x000A;        &lt;version&gt;4.12&lt;/version&gt;&#x000A;        &lt;scope&gt;test&lt;/scope&gt;&#x000A;    &lt;/dependency&gt;&#x000A;&lt;/dependencies&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>La base del progetto è pronta! Saltiamo alla sezione, <a href="#open_the_project_in_eclipse">Aprire il Progetto con Eclipse</a>, in modo da iniziare a scrivere codice!</p>
          <h4 id="create_project_using_forge">Creare un Progetto Con Forge</h4>
          <p><a href="http://jboss.org/forge">JBoss Forge</a> è una shell di comandi che permette di creare applicazioni standard in modo rapido. Possiamo considerarlo un Maven Archetypes con gli steroidi.</p>
          <p>L&#8217;installazione di Forge è molto rapida, e questa guida ne spiegherà i passi fondamentali. Seguite questi semplici passi per installare Forge:</p>
          <ol>
          	<li><a href="http://downloads.jboss.org/forge/releases/3.4.0.Final/forge-distribution-3.4.0.Final-offline.zip">Scarichiamo Forge</a></li>
          	<li>Eseguiamo l&#8217;unzip della distribuzione in una directory del nostro harddrive, che chiameremo <code>$FORGE_HOME</code><br />
            Presupponiamo che la distribuzione sia stata estratta in una directory con nome <code>forge</code></li>
          	<li>Aggiungiamo <code>$FORGE_HOME/bin</code> nel nostro path (Windows, Linux o Mac OSX)</li>
          </ol>
          <p>Su sistemi operativi basati su Unix, aggiungere Forge al path implica solitamente di editare i file $HOME/.bashrc o $HOME/.profile; avremo bisogno di aggiungere le seguenti variabili di ambiente:</p>
          <pre class="command"><code class="command">$ export FORGE_HOME=$HOME/forge/&#x000A;$ export PATH=$PATH:$FORGE_HOME/bin</code></pre>
          <p class="info"><span>Su Windows, bisogna aprire il &#8220;Pannello di Controllo&#8221;, cliccare su &#8220;Proprietà di Sistema&#8221;, aprire il tab &#8220;Avanzate&#8221;, cliccare su &#8220;Variabili d&#8217;Ambiente&#8221; e aggiungere visualmente le due variabili. Raccomandiamo di impostare queste variabili per Forge, a meno che non venga fatto l&#8217;unzip della distribuzione in una directory accessibile a tutti gli utenti.</span></p>
          <p>Ora che Forge è installato (o meglio, estratto), accediamo ad un prompt dei comandi della shell e lanciamo il comando <code>forge</code>:</p>
          <pre class="command"><code class="command">$ forge&#x000A;   _____&#x000A;  |  ___|__  _ __ __ _  ___&#x000A;  | |_ / _ \| `__/ _` |/ _ \  \\&#x000A;  |  _| (_) | | | (_| |  __/  //&#x000A;  |_|  \___/|_|  \__, |\___|&#x000A;                  |___/</code>&#x000A;&#x000A;<code class="command">[no project] ~ $</code></pre>
          <p>Questo è tutto! Abbiamo lanciato e attivato Forge. Ora è tempo di creare il progetto.</p>
          <p>Nella shell di Forge, eseguiamo il seguente comando per creare un progetto vuoto, molto simile a come abbiamo creato precedentemente il progetto con Maven Archetype:</p>
          <pre class="command"><code class="command">$ new-project --named arquillian-tutorial --topLevelPackage org.arquillian.example</code></pre>
          <p>Questo comando crea un progetto Maven in una nuova directory con nome <code>arquillian-tutorial</code> sotto la directory corrente.</p>
          <p>La struttura dei file del progetto generato da Forge è mostrato in basso:</p>
          <ul class="filetree">
          	<li>src/
          	<ul>
          		<li>main/
          		<ul>
          			<li>java/ &#8211; Qui vanno tutti i file sorgenti Java dell&#8217;applicazione (sotto il package Java)</li>
          			<li>resources/ &#8211; Qui vanno tutti i file di configurazione dell&#8217;applicazione
          			<ul>
          				<li>META-INF/
          				<ul>
          					<li>forge.xml &#8211; Il file di configurazione di Forge vuoto</li>
          				</ul></li>
          			</ul></li>
          		</ul></li>
          		<li>test/
          		<ul>
          			<li>java/ &#8211; Qui vanno tutti i sorgenti Java delle classi di test (sotto il package Java)</li>
          			<li>resources/ &#8211; Qui vanno tutti i file di configurazione dei test (p.es., arquillian.xml)</li>
          		</ul></li>
          	</ul></li>
          	<li>pom.xml &#8211; Il file di build di Maven. Istruisce Maven su come deve essere costruito il progetto.</li>
          </ul>
          <p>Forge fa in modo che la directory del progetto diventi la directory corrente all&#8217;interno della shell.</p>
          <pre class="command"><code class="command">[arquillian-tutorial] arquillian-tutorial $</code></pre>
          <p>Bisogna ora aggiungere le API di Java EE. Viene fatto tramite il comando <code>project add-dependency</code> mostrato qui in basso:</p>
          <pre class="command"><code class="command">$ project-add-dependencies org.jboss.spec:jboss-javaee-7.0:1.0.3.Final:provided:pom</code></pre>
          <p>Bisogna anche aggiungere la dipendenza di JUnit 4.12, la versione minima richiesta da Arquillian, con scope di tipo test:</p>
          <pre class="command"><code class="command">$ project-add-dependencies junit:junit:4.12:test</code></pre>
          <p>Forge aggiunge il repository della Community JBoss nel file pom.xml. Questo repository non è indispensabile per Arquillian. (E&#8217; preferibile comunque mantenerlo se si necessitano altre librerie della Community JBoss). Se si vuole rimuovere il repository, è sufficiente usare il seguente comando di Forge:</p>
          <pre class="command"><code class="command">$ project-remove-repository --url http://repository.jboss.org/nexus/content/groups/public</code></pre>
          <p>Il risultato del pom.xml generato da Forge è mostrato qui in basso:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#x000A;&lt;project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;&#x000A;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#x000A;    &lt;groupId&gt;org.arquillian.tutorial&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;arquillian-tutorial&lt;/artifactId&gt;&#x000A;    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;&#x000A;    &lt;packaging&gt;war&lt;/packaging&gt;&#x000A;    &lt;properties&gt;&#x000A;    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;&#x000A;    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;&#x000A;    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;&#x000A;    &lt;/properties&gt;&#x000A;    &lt;dependencyManagement&gt;&#x000A;      &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;          &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;          &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;          &lt;version&gt;1.0.3.Final&lt;/version&gt;&#x000A;          &lt;type&gt;pom&lt;/type&gt;&#x000A;          &lt;scope&gt;provided&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;        &lt;dependency&gt;&#x000A;          &lt;groupId&gt;junit&lt;/groupId&gt;&#x000A;          &lt;artifactId&gt;junit&lt;/artifactId&gt;&#x000A;          &lt;version&gt;4.12&lt;/version&gt;&#x000A;          &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;      &lt;/dependencies&gt;&#x000A;    &lt;/dependencyManagement&gt;&#x000A;    &lt;dependencies&gt;&#x000A;      &lt;dependency&gt;&#x000A;        &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;        &lt;type&gt;pom&lt;/type&gt;&#x000A;        &lt;scope&gt;provided&lt;/scope&gt;&#x000A;      &lt;/dependency&gt;&#x000A;      &lt;dependency&gt;&#x000A;        &lt;groupId&gt;junit&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;junit&lt;/artifactId&gt;&#x000A;        &lt;scope&gt;test&lt;/scope&gt;&#x000A;      &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;    &lt;build&gt;&#x000A;      &lt;finalName&gt;arquillian-tutorial&lt;/finalName&gt;&#x000A;      &lt;plugins&gt;&#x000A;        &lt;plugin&gt;&#x000A;          &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;&#x000A;          &lt;version&gt;2.4&lt;/version&gt;&#x000A;          &lt;configuration&gt;&#x000A;            &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;&#x000A;          &lt;/configuration&gt;&#x000A;        &lt;/plugin&gt;&#x000A;      &lt;/plugins&gt;&#x000A;    &lt;/build&gt;&#x000A;&lt;/project&gt;</code></pre>
          <p>Il progetto base è pronto! Apriamo ora il progetto con Eclipse in modo da iniziare a scrivere del codice!</p>
          <h3 id="aprire_il_progetto_con_eclipse">Aprire il Progetto con Eclipse</h3>
          <p>Quando si sviluppa un progetto Java, è preferibile usare un IDE, per esempio Eclipse. Questo perchè Arquillian è progettato per essere IDE friendly. Si possono lanciare i test di Arquillian dall&#8217;IDE senza configurazioni particolari. Diamo subito uno sguardo ai vantaggi forniti dall&#8217;IDE.</p>
          <p>Prima di Lanciare Eclipse, siccome il nostro è un progetto Maven, abbiamo bisogno di installare il plugin <a href="http://eclipse.org/m2e">Maven Integration for Eclipse</a> (m2e), se non presente.</p>
          <h4>Installare il plugin m2e</h4>
          <p>Se il plugin non è ancora installato, è preferibile installare <a href="http://jboss.org/tools">JBoss Tools</a>. Seguite questi passaggi per installarlo tramite l&#8217;Eclipse Marketplace (E&#8217; una specie di app store per Eclipse).</p>
          <ol>
          	<li>Selezionare <code>Help &gt; Eclipse Marketplace...</code> dal menù principale</li>
          	<li>Digitare &#8220;jboss tools&#8221; (senza virgolette) nel campo Find, e premere Enter</li>
          	<li>Cliccare il bottone Install vicino a JBoss Tools (Indigo)</li>
          	<li>Completare il wizard di installazione e riavviare Eclipse appena terminato</li>
          </ol>
          <p>JBoss Tools fornisce un buon ambiente per sviluppare applicazioni Java EE, includendo un buon supporto per CDI. Nonostante sia molto leggero, è un plugin molto potente.</p>
          <p>Comunque, se volete soltanto la parte di integrazione con Maven senza gli extra di JBoss Tools, potete seguire questi passi:</p>
          <ol>
          	<li>Selezionare <code>Help &gt; Eclipse Marketplace...</code> dal menù principale</li>
          	<li>Digitare &#8220;maven&#8221; (senza virgolette) nel campo Find, e premere Enter</li>
          	<li>Cliccare il bottone Install vicino a Maven Integration for Eclipse</li>
          	<li>Completare il wizard di installazione e riavviare Eclipse appena terminato</li>
          	<li>Ripetere gli stessi passaggi per installare il plugin Maven Integration for Eclipse WTP</li>
          </ol>
          <h4>Usare m2e per importare il progetto</h4>
          <p>Una volta che il plugin Maven è installato, seguite questi passi per aprire il progetto:</p>
          <ol>
          	<li>Selezionare <code>Help &gt; Eclipse Marketplace...</code> dal menù principale</li>
          	<li>Digitare &#8220;existing maven&#8221; (senza virgolette) nel campo di import dei sorgenti</li>
          	<li>Selezionare l&#8217;opzione Existing Maven Projects, e cliccare su Next</li>
          	<li>Cliccare sul bottone Browse&#8230;</li>
          	<li>Navigare nella directory del progetto nel file browser, selezionarlo, e cliccare sul bottone OK</li>
          	<li>Cliccare su Finish per aprire il progetto</li>
          </ol>
          <p>Eclipse riconoscerà il progetto Maven e lo aprirà nella finestra del Project Navigator. Se si espande il progetto, avremo un&#8217;ammagine simile:</p>
          <p><img src="/images/guides/arquillian_tutorial_eclipse_project.png" alt="" /></p>
          <p>Ora possiamo tornare al lavoro!</p>
          <h3 id="creare_un_componente">Creare un Componente</h3>
          <p>Per scrivere un test di Arquillian, abbiamo bisogno prima di un componente da testare. Creiamo un componente base in modo da imparare subito il funzionamento di Arquillian senza altre distrazioni. Gradualmente ci muoveremo verso scenari più complessi.</p>
          <p>Nell&#8217;IDE, creiamo una nuova classe Java con nome <code>Greeter</code> nel package <code>org.arquillian.example</code>. Sostituiamo i contenuti del file con la seguente logica del greeter:</p>
          <div class="filename">src/main/java/org/arquillian/example/Greeter.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import java.io.PrintStream;</code>&#x000A;&#x000A;<code class="prettify">/**&#x000A; * A component for creating personal greetings.&#x000A; */&#x000A;public class Greeter {&#x000A;    public void greet(PrintStream to, String name) {&#x000A;        to.println(createGreeting(name));&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    public String createGreeting(String name) {&#x000A;        return "Hello, " + name + "!";&#x000A;    }&#x000A;}</code></pre>
          <p>Lo scopo è di verificare che questa classe si comporti nel modo giusto quando viene invocata tramite un bean <acronym title="Contexts and Dependency Injection">CDI</acronym>. Naturalmente, lo facciamo scrivendo un semplice test unitario. Abbiamo però bisogno che il bean utilizzi i servizi enterprise come la dependency injection e il messaging e che venga usato da dentro un container. (Inoltre gli daremo spazio per crescere ~;))</p>
          <p>Per usare la classe come bean CDI, dobbiamo importarlo dal test con l&#8217;annotazione@@Inject@. E verrà fatto dal test di Arquillian! Ora è tempo di aggiungere le API di Arquillian al progetto!</p>
          <h3 id="aggiungere_le_api_di_arquillian">Aggiungere le API di Arquillian</h3>
          <p>Apriamo nuovamente con l&#8217;editor il <code>pom.xml</code> che si trova nella root del progetto. Dobbiamo istruire Maven sulle versioni degli artifact da usare. Inseriamo il seguente frammento XML direttamente sopra l&#8217;elemento <code>&lt;build&gt;</code> per importare il <acronym title="Bill of Materials">BOM</acronym>. Il BOM si occupa di importare una distribuzione completa del prodotto, stabilendo le versioni compatibili delle dipendenze.</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependencyManagement&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.arquillian&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;arquillian-bom&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.1.13.Final&lt;/version&gt;&#x000A;            &lt;scope&gt;import&lt;/scope&gt;&#x000A;            &lt;type&gt;pom&lt;/type&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/dependencyManagement&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>Aggiungiamo poi il seguente frammento XML direttamente sotto l&#8217;ultimo elemento <code>&lt;dependency&gt;</code> per aggiungere la parte di integrazione con JUnit di Arquillian:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.arquillian.junit&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;arquillian-junit-container&lt;/artifactId&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>L&#8217;artifact per l&#8217;integrazione con JUnit di Arquillian aggiunge anche la Core Arquillian e le API di ShrinkWrap nel classpath dei test. Queste librerie sono necessarie per scrivere e compilare i test.</p>
          <p class="info"><span>Per usare TestNG al posto di JUnit, sostituiamo l&#8217;artifact di integrazione con JUnit con l&#8217;artifact di integrazione con TestNG.</span></p>
          <p>(Optional) E&#8217; raccomandato aggiornare il Maven Surefire Plugin invece di usare la versione di default per i motivi descritti in <a href="https://community.jboss.org/wiki/WhatVersionOfSurefireShouldIUseToRunMyArquillianTestsInAMavenBuild">queste FAQ</a>. Possiamo modificare la versione del Surefire Plugin aggiungendo questo elemento <code>&lt;plugin&gt;</code> all&#8217;elemento <code>&lt;plugins&gt;</code>, subito sotto al Maven Compiler Plugin:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;plugin&gt;&#x000A;    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;&#x000A;    &lt;version&gt;2.17&lt;/version&gt;&#x000A;&lt;/plugin&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>Se si hanno problemi con il pom.xml a questo punto, si può scaricare il file <a href="https://raw.github.com/arquillian/arquillian-examples/master/arquillian-tutorial/pom-no-container-profiles.xml">pom-no-container-profiles.xml</a> dal <a href="https://github.com/arquillian/arquillian-examples/tree/master/arquillian-tutorial">progetto di esempio</a> e rinominarlo in pom.xml.</p>
          <p><strong>Ci sono ora tutti i requisiti per scrivere il primo test di Arquillian!</strong></p>
          <h3 id="scrivere_un_test_con_arquillian">Scrivere un Test con Arquillian</h3>
          <p>Un test Arquillian è identico a un test JUnit, ma con degli extra. Torniamo all&#8217;IDE per crearne uno.</p>
          <p class="warning"><span>Se compare il messaggio &#8220;Project configuration is out of date with pom.xml&#8221; andiamo, cliccando con il tasto destro, su Project &gt; Maven &gt; Update Project Configuration per risincronizzare il progetto.</span></p>
          <p>Creiamo un test JUnit in src/test/java con nome <code>GreeterTest</code> e assegnamogli un package con nome <code>org.arquillian.example</code>. Non ci sarà bisogno dei tipici metodi JUnit di setup e tearDown dal momento che tutto sarà gestito da Arquillian. Qui in basso c&#8217;è tutto quello di cui abbiamo bisogno:</p>
          <div class="filename">src/test/java/org/arquillian/example/GreeterTest.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import org.junit.Assert;&#x000A;import org.junit.Test;</code>&#x000A;&#x000A;<code class="prettify">public class GreeterTest {&#x000A;    @Test&#x000A;    public void should_create_greeting() {&#x000A;        Assert.fail("Not yet implemented");&#x000A;    }&#x000A;}</code></pre>
          <p>Un test Arquillian deve avere necessariamente tre cose:</p>
          <ol>
          	<li>Un&#8217;annotazione <code>@RunWith(Arquillian.class)</code> sulla classe</li>
          	<li>Un metodo statico pubblico annotato con <code>@Deployment</code> che ritorna un archivio di ShrinkWrap</li>
          	<li>Almeno un metodo annotato con <code>@Test</code></li>
          </ol>
          <p>L&#8217;annotazione <code>@RunWith</code> dice a JUnit di usare Arquillian come test controller. Arquillian cerca in seguito un metodo statico pubblico annotato con l&#8217;annotazione <code>@Deployment</code> per ricevere l&#8217;archivio di test (p.es., micro-deployment). Così automaticamente ogni metodo <code>@Test</code> girerà dietro un container.</p>
          <h4>Cos&#8217;è un archivio di test?</h4>
          <p>Lo scopo dell&#8217;archivio di test è di isolare le classi e le risorse necessarie al test dal resto del classpath. Diversamente da un normale test unitario, il test di Arquillian non deve importare tutto il classpath del progetto. Al contrario, verrà incluso soltanto quello che il test necessita (che può essere anche l&#8217;intero classpath, se lo vogliamo). L&#8217;archivio è definito usando <a href="http://jboss.org/shrinkwrap">ShrinkWrap</a>, che è una serie di API Java per creare archivi Java (p.es., jar, war, ear). La strategia del micro-deployment permette di focalizzarsi con precisione sulle classi che vogliamo testare. Come risultato, il test sarà molto leggero e maneggevole.</p>
          <p>L&#8217;archivio ShrinkWrap installato sul server, è archivio reale a tutti gli effetti. Il deployer del container non sa che sta per deployare un archivio ShrinkWrap. Si può pensare a ShrinkWrap come un tool di build basato su Java, con una differenza: nel caso ottimale, passa l&#8217;archivio in stream sul server anzichè scriverlo su disco. Ma l&#8217;archivio è comunque autentico.</p>
          <p class="info"><span>ShrinkWrap supporta anche la risoluzione degli artifact (librerie) e crea i file di configurazione a livello programmatico, che possono essere aggiunti all&#8217;archivio di test. Per una più ampia introduzione a ShrinkWrap, vedete <a href="/guides/shrinkwrap_introduction">ShrinkWrap introduction</a> guide.</span></p>
          <p>Aggiungiamo questo miglioramento al test sostituendo i suoi contenuti con i seguenti:</p>
          <div class="filename">src/test/java/org/arquillian/example/GreeterTest.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import org.jboss.arquillian.container.test.api.Deployment;&#x000A;import org.jboss.arquillian.junit.Arquillian;&#x000A;import org.jboss.shrinkwrap.api.ShrinkWrap;&#x000A;import org.jboss.shrinkwrap.api.asset.EmptyAsset;&#x000A;import org.jboss.shrinkwrap.api.spec.JavaArchive;&#x000A;import org.junit.Assert;&#x000A;import org.junit.Test;&#x000A;import org.junit.runner.RunWith;</code>&#x000A;&#x000A;<code class="prettify">@RunWith(Arquillian.class)&#x000A;public class GreeterTest {</code>&#x000A;&#x000A;<code class="prettify">    @Deployment&#x000A;    public static JavaArchive createDeployment() {&#x000A;        return ShrinkWrap.create(JavaArchive.class)&#x000A;            .addClass(Greeter.class)&#x000A;            .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @Test&#x000A;    public void should_create_greeting() {&#x000A;        Assert.fail("Not yet implemented");&#x000A;    }&#x000A;}</code></pre>
          <p>Con ShrinkWrap, abbiamo definito un archivio Java (jar) come deployment. L&#8217;archvio include la classe <code>Greeter</code> che il test invocherà e un beans.xml vuoto nella directory META-INF per attivare il CDI in quest&#8217;archivio.</p>
          <p>Se volete vedere i contenuti dell&#8217;archivio che ShrinkWrap crea durante l&#8217;esecuzione del test, è possibile stampare l&#8217;archivio nel stdout (p.es., nella console) prima che ritorni.</p>
          <pre class="prettify"><code class="prettify">@Deployment&#x000A;public static JavaArchive createDeployment() {&#x000A;    JavaArchive jar = ShrinkWrap.create(JavaArchive.class)&#x000A;        .addClass(Greeter.class)&#x000A;        .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");&#x000A;    System.out.println(jar.toString(true));&#x000A;    return jar;&#x000A;}</code></pre>
          <p>Il metodo produce il seguente output quando il test viene lanciato:</p>
          <pre class="output"><code class="output">2ac9cd28-a71a-479a-a785-750b40221766.jar:&#x000A;/META-INF/&#x000A;/META-INF/beans.xml&#x000A;/org/&#x000A;/org/arquillian/&#x000A;/org/arquillian/example/&#x000A;/org/arquillian/example/Greeter.class</code></pre>
          <p>ShrinkWrap assegna all&#8217;archivio un nome casuale dal momento che non è stato specificato esplicitamente. Vedremo altri dettagli sugli archivi nella guida successiva, <a href="/guides/getting_started_rinse_and_repeat_it/#export_the_deployment">Guida Introduttiva: Rispolveriamo e Ripetiamo</a>.</p>
          <p>Ora tutto quello di cui si ha bisogno è importare l&#8217;istanza <code>Greeter</code> in un campo direttamente sopra al metodo di test e sostituire il metodo non implementato con uno che testa il comportamento del bean. Per avere qualche emozione in più, stamperemo anche i saluti nella console. Sostituiamo il metodo di test con il codice in basso e aggiungiamo un&#8217;importazione tramite il <code>javax.inject.Inject</code>.</p>
          <div class="filename">src/test/java/org/arquillian/example/GreeterTest.java</div>
          <pre class="prettify"><code class="prettify">// clip&#x000A;import javax.inject.Inject;&#x000A;// clip</code>&#x000A;&#x000A;<code class="prettify">@Inject&#x000A;Greeter greeter;</code>&#x000A;&#x000A;<code class="prettify">@Test&#x000A;public void should_create_greeting() {&#x000A;    Assert.assertEquals("Hello, Earthling!",&#x000A;        greeter.createGreeting("Earthling"));&#x000A;    greeter.greet(System.out, "Earthling");&#x000A;}</code></pre>
          <p>Qui è come il test dovrebbe apparire una volta terminato:</p>
          <div class="filename">src/test/java/org/arquillian/example/GreeterTest.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import javax.inject.Inject;&#x000A;import org.jboss.arquillian.container.test.api.Deployment;&#x000A;import org.jboss.arquillian.junit.Arquillian;&#x000A;import org.jboss.shrinkwrap.api.ShrinkWrap;&#x000A;import org.jboss.shrinkwrap.api.asset.EmptyAsset;&#x000A;import org.jboss.shrinkwrap.api.spec.JavaArchive;&#x000A;import org.junit.Test;&#x000A;import org.junit.Assert;&#x000A;import org.junit.runner.RunWith;</code>&#x000A;&#x000A;<code class="prettify">@RunWith(Arquillian.class)&#x000A;public class GreeterTest {</code>&#x000A;&#x000A;<code class="prettify">    @Deployment&#x000A;    public static JavaArchive createDeployment() {&#x000A;        return ShrinkWrap.create(JavaArchive.class)&#x000A;            .addClass(Greeter.class)&#x000A;            .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @Inject&#x000A;    Greeter greeter;</code>&#x000A;&#x000A;<code class="prettify">    @Test&#x000A;    public void should_create_greeting() {&#x000A;        Assert.assertEquals("Hello, Earthling!",&#x000A;            greeter.createGreeting("Earthling"));&#x000A;        greeter.greet(System.out, "Earthling");&#x000A;    }&#x000A;}</code></pre>
          <p>Abbiamo scritto il nostro primo test di Arquillian!</p>
          <p>Ah, ma ora vi starete chiedendo come lanciarlo ~:S Se state pensando, &#8220;Come un normale test unitario&#8221;, allora siete nel giusto! Tuttavia, abbiamo prima bisogno di aggiungere un container adapter al classpath.</p>
          <h3 id="aggiungere_un_container_adapter">Aggiungere un Container Adapter</h3>
          <p>Abbiamo parlato molto di test dentro un container, ma non di quali container andremo ad usare. La scelta del container viene decisa a runtime.</p>
          <p>Arquillian seleziona il container di destinazione su cui è attivo il container adapter dal classpath del test. Un <em>container adapter</em> è un componente che controlla e comunica con il container (non è lui stesso un container). Questo significa che dobbiamo aggiungere nuove librerie al progetto.</p>
          <p>Un test di Arquillian può essere eseguito in qualunque container compatibile con il modello di programmazione usato nel test (naturalmente, se in Arquillian esiste il corrispettivo adapter per il container). Il nostro test usa il modello di programmazione CDI, e quindi abbiamo bisogno di un container che supporti CDI. Vogliamo garantire velocità a questo test, quindi scegliamo il Weld EE embedded container.</p>
          <p>Apriamo nuovamente il file <code>pom.xml</code> e aggiungiamo il seguente gruppo di dipendenze direttamente sotto gli altri elementi <code>&lt;dependency&gt;</code>:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.arquillian.container&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;arquillian-weld-ee-embedded-1.1&lt;/artifactId&gt;&#x000A;    &lt;version&gt;1.0.0.CR9&lt;/version&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.weld&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;weld-core&lt;/artifactId&gt;&#x000A;    &lt;version&gt;2.3.5.Final&lt;/version&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;&#x000A;    &lt;version&gt;1.6.4&lt;/version&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>Per riassumere, qui in basso abbiamo le tre libreire necessarie ad Arquillian (con JUnit):</p>
          <ol>
          	<li>Arquillian JUnit integration</li>
          	<li>Arquillian container adapter per il target container</li>
          	<li>Container runtime (per un container integrato) o container client (per un container remoto)</li>
          </ol>
          <p>In questo esempio stiamo usando un container integrato, quindi abbiamo bisogno del container runtime, Weld.</p>
          <p>Torniamo ora al test.</p>
          <h3 id="lanciare_il_test_di_arquillian">Lanciare il Test di Arquillian</h3>
          <p>Una volta che tutte le librerie necessarie ad Arquillian sono aggiunte nel classpath, si può lanciare il test sotto forma di test unitario da Eclipse, da uno script di build o da qualunque altro plugin predisposto ai test. Lanciamolo ora da Eclipse.</p>
          <p>Dalla finestra dell&#8217;IDE, tasto destro sul file GreeterTest.java nel Package Explorer (o nell&#8217;editor) e selezioniamo Run As &gt; JUnit Test dal menù.</p>
          <p><img src="/images/guides/arquillian_tutorial_run_junit_test.png" alt="" /></p>
          <p>Quando lanciamo il test, dovremmo vedere le seguenti linee nella console:</p>
          <pre class="output"><code class="output">21 [main] INFO org.jboss.weld.Version - WELD-000900 2.3.5 (Final)&#x000A;Hello, Earthling!</code></pre>
          <p>Dovremmo poi veder apparire la vista di JUnit con una <strong class="greenbar">barra verde</strong>!</p>
          <p><img src="/images/guides/arquillian_tutorial_junit_green_bar.png" alt="" /></p>
          <p>Il test si può lanciare anche con Maven da linea di comando:</p>
          <pre class="command"><code class="command">$ mvn test</code></pre>
          <p>Dovremmo vedere le seguenti linee nella console:</p>
          <pre class="output"><code class="output">-------------------------------------------------------&#x000A;T E S T S&#x000A;-------------------------------------------------------&#x000A;Running org.arquillian.example.GreeterTest&#x000A;19 [main] INFO org.jboss.weld.Version - WELD-000900 2.3.5 (Final)&#x000A;Hello, Earthling!&#x000A;Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.907 sec</code></pre>
          <p><strong>Congratulazioni!</strong> E&#8217; comparsa la prima <strong class="greenbar">barra verde</strong> di Arquillian!</p>
          <h3 id="uno_sguardo_pi&#249;_da_vicino">Uno sguardo più da vicino</h3>
          <p>Come sappiamo che CDI lavora realmente? Per quello che sappiamo ora, Arquillian ha creato un&#8217;istanza della classe <code>Greeter</code> ed importata dentro un test senza alcuna prova che sia stata eseguita un&#8217;implementazione CDI. Verifichiamo.</p>
          <p>Creiamo un nuovo bean CDI con nome <code>PhraseBuilder</code> nel package <code>org.arquillian.example</code>. La nuova classe crea delle frasi partendo da un template.</p>
          <div class="filename">src/main/java/org/arquillian/example/PhraseBuilder.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import java.text.MessageFormat;&#x000A;import java.util.HashMap;&#x000A;import java.util.Map;&#x000A;import javax.annotation.PostConstruct;</code>&#x000A;&#x000A;<code class="prettify">public class PhraseBuilder {&#x000A;    private Map&lt;String, String&gt; templates;</code>&#x000A;&#x000A;<code class="prettify">    public String buildPhrase(String id, Object... args) {&#x000A;        return MessageFormat.format(templates.get(id), args);&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    @PostConstruct&#x000A;    public void initialize() {&#x000A;        templates = new HashMap&lt;String, String&gt;();&#x000A;        templates.put("hello", "Hello, {0}!");&#x000A;    }&#x000A;}</code></pre>
          <p>Ora, apriamo la classe <code>Greeter</code> e creiamo un nuovo costruttore che importerà il <code>PhraseBuilder</code> tramite l&#8217;injection. Deleghiamo poi il compito di creare il saluto al nuovo bean importato.</p>
          <div class="filename">src/main/java/org/arquillian/example/Greeter.java</div>
          <pre class="prettify"><code class="prettify">package org.arquillian.example;</code>&#x000A;&#x000A;<code class="prettify">import java.io.PrintStream;&#x000A;import javax.inject.Inject;</code>&#x000A;&#x000A;<code class="prettify">public class Greeter {</code>&#x000A;&#x000A;<code class="prettify">    private PhraseBuilder phraseBuilder;</code>&#x000A;&#x000A;<code class="prettify">    @Inject&#x000A;    public Greeter(PhraseBuilder phraseBuilder) {&#x000A;        this.phraseBuilder = phraseBuilder;&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    public void greet(PrintStream to, String name) {&#x000A;        to.println(createGreeting(name));&#x000A;    }</code>&#x000A;&#x000A;<code class="prettify">    public String createGreeting(String name) {&#x000A;        return phraseBuilder.buildPhrase("hello", name);&#x000A;    }&#x000A;}</code></pre>
          <p>Ora, per far si che il test funzioni, dobbiamo creare un&#8217;istanza del <code>PhraseBuilder</code>, il suo metodo <code>@PostConstruct</code> deve essere invocato ed importato nel costruttore del <code>Greeter</code> al momento della creazione di un&#8217;istanza del <code>Greeter</code>. Se tutto questo avviene, siamo certi che CDI lavora come dovrebbe.</p>
          <p>Come ultimo passo, dato che abbiamo creato una nuova classe, dobbiamo assicurarci che venga aggiunta all&#8217;archivio di test tramite il metodo <code>@Deployment</code>. Semplicemente dobbiamo cambiare questa linea:</p>
          <pre class="prettify"><code class="prettify">.addClass(Greeter.class)</code></pre>
          <p>&#8230;con:</p>
          <pre class="prettify"><code class="prettify">.addClasses(Greeter.class, PhraseBuilder.class)</code></pre>
          <p>Lanciamo nuovamente il test. Si dovrebbe vedere nuovamente la <strong class="greenbar">barra verde</strong>! Non male, vero?</p>
          <h3 id="debug_del_test">Debug del Test</h3>
          <p>Questo sarà un capitolo molto breve. Perchè? Perchè un test Arquillian si mette in debug esattamente come un qualsiasi test unitario. Semplicemente aggiungiamo un breakpoint nel codice del test o di un altro componente dell&#8217;applicazione. Dopodichè clicchiamo con il tasto destro sul progetto e selezioniamo Debug As &gt; JUnit Test. In questo modo stiamo eseguendo il debug nel container! Provatelo quanto volete!</p>
          <p><img src="/images/guides/arquillian_tutorial_debugging_test.png" alt="" /></p>
          <p class="warning"><span>Se si sta usando un container remoto, il Debug As non attiverà i breakpoint. Sarà invece necessario lanciare il container in modalità debug e agganciare manualmente il debugger. Questo perchè il test viene lanciato da una nuova JVM</span></p>
          <p>Come avete visto, Arquillian è il tool ideale per testare applicazioni CDI. Crea un ambiente CDI ed importa i bean CDI direttamente nei test. O meglio ancora, quando si usa un container CDI integrato, il test gira come un normale test unitario. Se questo è tutto quello di cui avete bisogno, potete uscire dal tutorial e iniziare a scrivere i vostri test.</p>
          <p><strong>Ma un momento!</strong> Parliamo soltanto del container integrato? Il componente girerà dietro un container completo?</p>
          <p>Una delle perle di Arquillian è che il test può girare su differenti container, sia integrati che standalone. Se vogliamo provare un container più realistico, continuiamo a leggere questo documento.</p>
          <h3 id="aggiungere_nuovi_container">Aggiungere nuovi Container</h3>
          <p>Come abbiamo visto in precedenza, Arquilian seleziona il container a seconda dell&#8217;adapter che si trova nel classpath. Per cambiare container, è sufficiente cambiare il container adapter nel classpath prima di lanciare il test.</p>
          <p class="important"><span>Si può usare soltanto un container adapter alla volta. Se ci sono più container adapter nel classpath, Arquillian bloccherà l&#8217;esecuzione del test poichè determinerà un numero eccessivo di container adapter</span></p>
          <p>Un modo per eseguire lo switch del container adapter è quello di modificare le dependencies di Maven viste in precedenza nel <code>pom.xml</code>. Ma è piuttosto faticoso. L&#8217;approccio raccomandatoè di usare i profili Maven.</p>
          <h4>Configurare i profili di Maven</h4>
          <p>I profili di Maven permettono di suddividere le dipendenze in gruppi, un gruppo per ogni container adapter e i suoi artifact correlati. Quando si lanciano i test, verrà attivato uno di questi gruppi, che selezionerà il relativo container. Il profilo può essere attivato sia dalla linea di comando tramite il flag (-P) che dalle preferenze dell&#8217;IDE.</p>
          <p>Apriamo il <code>pom.xml</code> e creiamo un nuovo profilo per il Weld EE embedded inserendo il seguente frammento XML direttamente sotto all&#8217;elemento <code>&lt;dependencies&gt;</code>:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;profiles&gt;&#x000A;    &lt;profile&gt;&#x000A;        &lt;id&gt;arquillian-weld-ee-embedded&lt;/id&gt;&#x000A;        &lt;dependencies&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.0.3.Final&lt;/version&gt;&#x000A;                &lt;type&gt;pom&lt;/type&gt;&#x000A;                &lt;scope&gt;provided&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.arquillian.container&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;arquillian-weld-ee-embedded-1.1&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.0.0.CR9&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.weld&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;weld-core&lt;/artifactId&gt;&#x000A;                &lt;version&gt;2.3.5.Final&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.6.4&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;        &lt;/dependencies&gt;&#x000A;    &lt;/profile&gt;&#x000A;&lt;/profiles&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p><strong>Rimuoviamo</strong> poi la dependency <code>jboss-javaee-7.0</code> e le altre dependency legate al Weld EE embedded container adapter dalla sezione <code>&lt;dependencies&gt;</code>. Una volta rimosse, le sezioni <code>&lt;dependencies&gt;</code> e <code>&lt;profiles&gt;</code> risulteranno simili al codice qui in basso:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;dependencies&gt;&#x000A;    &lt;dependency&gt;&#x000A;        &lt;groupId&gt;junit&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;junit&lt;/artifactId&gt;&#x000A;        &lt;version&gt;4.12&lt;/version&gt;&#x000A;        &lt;scope&gt;test&lt;/scope&gt;&#x000A;    &lt;/dependency&gt;&#x000A;    &lt;dependency&gt;&#x000A;        &lt;groupId&gt;org.jboss.arquillian.junit&lt;/groupId&gt;&#x000A;        &lt;artifactId&gt;arquillian-junit-container&lt;/artifactId&gt;&#x000A;        &lt;scope&gt;test&lt;/scope&gt;&#x000A;    &lt;/dependency&gt;&#x000A;&lt;/dependencies&gt;&#x000A;&lt;profiles&gt;&#x000A;    &lt;profile&gt;&#x000A;        &lt;id&gt;arquillian-weld-ee-embedded&lt;/id&gt;&#x000A;        &lt;dependencies&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.0.3.Final&lt;/version&gt;&#x000A;                &lt;type&gt;pom&lt;/type&gt;&#x000A;                &lt;scope&gt;provided&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.arquillian.container&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;arquillian-weld-ee-embedded-1.1&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.0.0.CR9&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.jboss.weld&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;weld-core&lt;/artifactId&gt;&#x000A;                &lt;version&gt;2.3.5.Final&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;            &lt;dependency&gt;&#x000A;                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;&#x000A;                &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;&#x000A;                &lt;version&gt;1.6.4&lt;/version&gt;&#x000A;                &lt;scope&gt;test&lt;/scope&gt;&#x000A;            &lt;/dependency&gt;&#x000A;        &lt;/dependencies&gt;&#x000A;    &lt;/profile&gt;&#x000A;&lt;/profiles&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p class="info"><span>La dipendenza Java EE API viene spostata nel profilo dal momento che alcuni container, come il GlassFish integrato, già integrano queste librerie. Avere le stesse librerie in entrambi i punti provoca conflitti. Bisogna perciò giocare un pò con il classpath.</span></p>
          <p>Includiamo ora due nuovi profili nel <code>pom.xml</code> dentro l&#8217;elemento <code>&lt;profiles&gt;</code>, il primo per il <a href="http://embedded-glassfish.java.net">GlassFish integrato</a>:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;profile&gt;&#x000A;    &lt;id&gt;arquillian-glassfish-embedded&lt;/id&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.arquillian.container&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;arquillian-glassfish-embedded-3.1&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.0.0.CR4&lt;/version&gt;&#x000A;            &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.glassfish.main.extras&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;glassfish-embedded-all&lt;/artifactId&gt;&#x000A;            &lt;version&gt;3.1.2&lt;/version&gt;&#x000A;            &lt;scope&gt;provided&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/profile&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>e l&#8217;altro per JBoss AS:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;profile&gt;&#x000A;    &lt;id&gt;arquillian-jbossas-managed&lt;/id&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;jboss-javaee-7.0&lt;/artifactId&gt;&#x000A;            &lt;version&gt;1.0.3.Final&lt;/version&gt;&#x000A;            &lt;type&gt;pom&lt;/type&gt;&#x000A;            &lt;scope&gt;provided&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.as&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;jboss-as-arquillian-container-managed&lt;/artifactId&gt;&#x000A;            &lt;version&gt;7.1.1.Final&lt;/version&gt;&#x000A;            &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;        &lt;dependency&gt;&#x000A;            &lt;groupId&gt;org.jboss.arquillian.protocol&lt;/groupId&gt;&#x000A;            &lt;artifactId&gt;arquillian-protocol-servlet&lt;/artifactId&gt;&#x000A;            &lt;scope&gt;test&lt;/scope&gt;&#x000A;        &lt;/dependency&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/profile&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p class="info"><span>Per default, JBoss AS 7 esegue il deploy degli archivi di test tramite il protocollo JMX. Noi siamo andati oltre e abbiamo aggiunto un protocollo Servlet nel profilo <code>arquillian-jbossas-managed</code> nel caso possa essere utile in futuro. Rimandiamo a <a href="https://community.jboss.org/wiki/WhyDoIGetNoActiveContextsForScopeTypeWhenTestingOnJBossAS7">queste FAQ</a> per le istruzioni di utilizzo.</span></p>
          <p>Ora possiamo scegliere di lanciare il test su tre container differenti.</p>
          <p>Se ci sono problemi con il pom.xml a questo punto, si può scaricare il file <a href="https://raw.github.com/arquillian/arquillian-examples/master/arquillian-tutorial/pom.xml">pom.xml</a> dal <a href="https://github.com/arquillian/arquillian-examples/tree/master/arquillian-tutorial">progetto d&#8217;esempio</a>.</p>
          <h3 id="test_attraverso_i_container">Test Attraverso i Container</h3>
          <p>Riaggiornando il progetto da Eclipse noteremo che non compila più. Questo perchè abbiamo bisogno di attivare uno dei profili dei container. Attiviamo il Weld EE embedded per ritornare alla situazione precedente.</p>
          <p>Ci sono due modi per attivare un profilo Maven in Eclipse (presupponendo che stiamo usando il <a href="http://www.eclipse.org/m2e">Maven Integration for Eclipse</a>):</p>
          <ol>
          	<li>Configurazione manuale (approccio standard)</li>
          	<li>Selettore del profilo di Maven (JBoss Tools)</li>
          </ol>
          <h4>Attivare il profilo Maven: Configurazione manuale</h4>
          <p>Per attivare manualmente il profilo, seguite i seguenti passi:</p>
          <ol>
          	<li>Tasto destro sul progetto e selezionare Properties</li>
          	<li>Selezionare il tab Maven properties</li>
          	<li>Inserire l&#8217;id del profilo nel campo Active Maven Profiles (p.es., <code>arquillian-weld-ee-embedded</code>)</li>
          	<li>Cliccare sul bottone OK e accettarele modifiche del progetto</li>
          </ol>
          <p>Qui in basso una finestra delle proprietà di Maven che mostra il profilo attivato:</p>
          <p><img src="/images/guides/arquillian_tutorial_maven_properties.png" alt="" /></p>
          <h4>Attivare il profilo Maven: Selettore del profilo di Maven</h4>
          <p>Se abbiamo JBoss Tools installato, selezionare il profilo attivo diventa molto semplice:</p>
          <ol>
          	<li>Tasto destro sul progetto e selezionare Maven &gt; Select Active Profiles&#8230;<br />
          (in alternativa, si possono usare i tasti chiave Ctrl+Shift+P o il bottone nella toolbar)</li>
          	<li>Mettere un check sul profilo che si desidera attivare (p.es., <code>arquillian-weld-ee-embedded</code>)</li>
          	<li>Cliccare sul bottone OK</li>
          </ol>
          <p>Qui in basso la finesra del selettore del profilo che mostra il profilo attivato:</p>
          <p><img src="/images/guides/arquillian_tutorial_maven_profile_selector.png" alt="" /></p>
          <p>Una volta che il profilo è stato attivato, gli errori di compilazione scompariranno e avremo nuovamente modo di lanciare il test con successo.</p>
          <p>Un&#8217;altra opzione per attivare il profilo è quella di configurare il profilo di default. Supponendo che il default sia il profilo Weld EE Embedded è sufficiente aggiungere l&#8217;elemento <code>&lt;activation&gt;</code> alla definizione del profilo:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;profile&gt;&#x000A;    &lt;id&gt;arquillian-weld-ee-embedded&lt;/id&gt;&#x000A;    &lt;activation&gt;&#x000A;        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;&#x000A;    &lt;/activation&gt;&#x000A;    &lt;dependencies&gt;&#x000A;        &lt;!-- hidden --&gt;&#x000A;    &lt;/dependencies&gt;&#x000A;&lt;/profile&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>In questo modo non è più necessario attivare il profilo dall&#8217;IDE dal momento che verrà selezionato automaticamente. Tuttavia, per usare un profilo differente dall&#8217;IDE sarà necessario disattivarlo.</p>
          <h4>Switch tra i container</h4>
          <p>Abbiamo già visto che il test funziona con il Weld EE Embedded. Eseguiamo una nuova prova facendo uno switch al profilo del GlassFish integrato ripetendo i passi visti sopra, questa volta attivando il profilo <code>arquillian-glassfish-embedded</code>.</p>
          <p class="info"><span>Se attiviamo il profilo Weld EE Embedded come default, dovremo disabilitarlo esplicitamente per passare ad un nuovo profilo. Si può disabilitare nel selettore del profilo di Maven cliccando con il tasto destro sul progetto e selezionando il Deactivate dal menù. Nell&#8217;elenco dei profili si vedrà un punto esclamativo (p.es., <code>!arquillian-weld-ee-embedded</code>). Selezioni o deselezioni multiple sono separate dalla virgola.</span></p>
          <p>Lanciamo nuovamente il test. Vedremo dalla console l&#8217;avvio di GlassFish&#8230;e un&#8217;altra <strong class="greenbar">barra verde</strong>!</p>
          <p>Abbiamo eseguito lo stesso test su due differenti container integrati, un container CDI e un container Java EE (GlassFish). Entrambe le esecuzioni avvengono in un solo processo. Per assicurarci che il componente lavori su un ambiente più realistico, abbiamo bisogno di usare un container standalone. Eseguiamo lo switch a JBoss AS.</p>
          <p>Per lanciare il test su un&#8217;istanza standalone di JBoss AS, per prima cosa va configurata. E&#8217; possibile alternativamente:</p>
          <ol>
          	<li>Scaricarlo e spacchettarlo in una directory fuori dal progetto</li>
          	<li>Usare Maven per il download e lo spacchettamento durante la fase di build</li>
          </ol>
          <p>Seguite i seguenti passaggi per configurare JBoss AS 7 fuori del progetto:</p>
          <ol>
          	<li><a href="http://jboss.org/jbossas/downloads">Scaricare JBoss AS 7</a> (assicurarsi che la versione da scaricare corrisponda alla versione della dipendenza Maven <code>jboss-as-arquillian-container-managed</code> che si trova nel <code>pom.xml</code>))</li>
          	<li>Estrarre l&#8217;archivio</li>
          	<li>(opzionale) Configurare la variabile d&#8217;ambiente <code>JBOSS_HOME</code> con il path della directory estratta</li>
          </ol>
          <p>Una volta installato JBoss AS (per la precisione, estratto) e la nostra variabile d&#8217;ambiente <code>JBOSS_HOME</code> è configurata nel path corretto, possiamo attivare il profilo <code>arquillian-jbossas-managed</code> e lanciare il test. Dovremmo vedere l&#8217;avvio di JBoss AS nella console&#8230;e un&#8217;altra <strong class="greenbar">barra verde</strong>!</p>
          <p class="info"><span>Il messaggio stampato sul System.out viene scritto nel log del server anzichè nella console, quindi è il caso di vedere il file di log di JBoss.</span></p>
          <p>Se vogliamo invece affidare questa parte a Maven (opzionale), aggiungiamo il seguente frammento XML sotto l&#8217;elemento <code>&lt;id&gt;</code> del profilo <code>arquillian-jbossas-managed</code>:</p>
          <div class="filename">pom.xml</div>
          <pre class="prettify"><code class="prettify">&lt;!-- clip --&gt;&#x000A;&lt;build&gt;&#x000A;    &lt;plugins&gt;&#x000A;        &lt;plugin&gt;&#x000A;            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;&#x000A;            &lt;executions&gt;&#x000A;                &lt;execution&gt;&#x000A;                    &lt;id&gt;unpack&lt;/id&gt;&#x000A;                    &lt;phase&gt;process-test-classes&lt;/phase&gt;&#x000A;                    &lt;goals&gt;&#x000A;                        &lt;goal&gt;unpack&lt;/goal&gt;&#x000A;                    &lt;/goals&gt;&#x000A;                    &lt;configuration&gt;&#x000A;                        &lt;artifactItems&gt;&#x000A;                            &lt;artifactItem&gt;&#x000A;                                &lt;groupId&gt;org.jboss.as&lt;/groupId&gt;&#x000A;                                &lt;artifactId&gt;jboss-as-dist&lt;/artifactId&gt;&#x000A;                                &lt;version&gt;7.1.1.Final&lt;/version&gt;&#x000A;                                &lt;type&gt;zip&lt;/type&gt;&#x000A;                                &lt;overWrite&gt;false&lt;/overWrite&gt;&#x000A;                                &lt;outputDirectory&gt;target&lt;/outputDirectory&gt;&#x000A;                            &lt;/artifactItem&gt;&#x000A;                        &lt;/artifactItems&gt;&#x000A;                    &lt;/configuration&gt;&#x000A;                &lt;/execution&gt;&#x000A;            &lt;/executions&gt;&#x000A;        &lt;/plugin&gt;&#x000A;    &lt;/plugins&gt;&#x000A;&lt;/build&gt;&#x000A;&lt;!-- clip --&gt;</code></pre>
          <p>Per far si che venga vista la distribuzione JBoss installata con Maven, abbiamo anche bisogno di una piccola configurazione su Arquillian. Creiamo il seguente file di configurazione e assegnamogli il valore della proprietà <code>jbossHome</code> nel path dove JBoss AS 7 è installato. Se stiamo usando il plugin di Maven, il path è <code>target/jboss-as-7.1.1.Final</code>.</p>
          <div class="filename">src/test/resources/arquillian.xml</div>
          <pre class="prettify"><code class="prettify">&lt;arquillian xmlns="http://jboss.org/schema/arquillian"&#x000A;    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#x000A;    xsi:schemaLocation="&#x000A;        http://jboss.org/schema/arquillian&#x000A;        http://jboss.org/schema/arquillian/arquillian_1_0.xsd"&gt;&#x000A;    &lt;container qualifier="jbossas-managed" default="true"&gt;&#x000A;        &lt;configuration&gt;&#x000A;            &lt;property name="jbossHome"&gt;target/jboss-as-7.1.1.Final&lt;/property&gt;&#x000A;        &lt;/configuration&gt;&#x000A;    &lt;/container&gt;&#x000A;&lt;/arquillian&gt;</code></pre>
          <p>Ora cambiamo il profilo Maven puntandolo a <code>arquillian-jbossas-managed</code>, e rilanciamo il test. Dovremmo vedere l&#8217;avvio di JBoss AS dalla console&#8230;e ancora la <strong class="greenbar">barra verde</strong>!</p>
          <p>E&#8217; lo <em>stesso</em> test, ma questa volta in un container Java EE completo. Arquillian impacchetta i test, esegue il deploy nel container come archivio Java EE, esegue i test remotamente, cattura i risultati e li aggiunge alla vista dei risultati JUnit di Eclipse (oppure nei risultati di Maven surefire).</p>
          <p>Per uno sguardo più approfondito su Arquillian, possiamo passare alla guida <a href="/guides/getting_started_rinse_and_repeat_it">Guida Introduttiva: Rispolveriamo e Ripetiamo</a>. Per vedere come Forge automatizza la configurazione di Arquillian e genera i test, passiamo alla guida <a href="/guides/get_started_faster_with_forge">Rapida Guida Introduttiva a Forge</a>.</p>
          <h3 id="share">Share the Knowledge</h3>
          <p>Find this guide useful?</p>
          <p class="post_to_twitter"><a href="http://twitter.com/home/?status=Just%20read%20the%20%23Arquillian%20Guida%20Introduttiva%20guide%20and%20got%20a%20%23greenbar!%20Get%20yours.%20http://arquillian.org/guides/getting_started_it/"><img src="/images/post_to_twitter.png" alt="" /></a></p>
          <div class="g-plusone" data-size="tall"></div>
          <p>There&#8217;s a lot more about Arquillian to cover. If you&#8217;re ready to learn more, check out the <a href="/guides">other available guides</a>.</p>
          <h4>Feedback</h4>
          <p>Find a bug in the guide? Something missing? You can fix it by <a href="http://github.com/arquillian/arquillian.github.com">forking this website</a>, making the correction and <a href="http://help.github.com/send-pull-requests">sending a pull request</a>. If you&#8217;re just plain stuck, feel free to ask a question in the <a href="http://community.jboss.org/en/arquillian?view=discussions">user discussion forum</a>.</p>
          <h4>Recent Changelog</h4>
          <ul>
            <li>
              May 18, 2017:
              Added vinsguru into the github mapping
              <em>by Matous Jobanek</em>
            </li>
          </ul>
          <p>
            <a href="https://github.com/arquillian/arquillian.github.io/commits/develop/guides/getting_started_it.textile">See full history &raquo;</a>
          </p>
        </div>
        <div id="sidebar">
          <div id="toc">
            <h3 class="chapter_header">Chapters</h3>
            <ol class="chapters">
              <li>
                <a href="#presupposti" id="presupposti_link">Presupposti</a>
              </li>
              <li>
                <a href="#creare_un_nuovo_progetto" id="creare_un_nuovo_progetto_link">Creare un Nuovo Progetto</a>
              </li>
              <li>
                <a href="#aprire_il_progetto_con_eclipse" id="aprire_il_progetto_con_eclipse_link">Aprire il Progetto con Eclipse</a>
              </li>
              <li>
                <a href="#creare_un_componente" id="creare_un_componente_link">Creare un Componente</a>
              </li>
              <li>
                <a href="#aggiungere_le_api_di_arquillian" id="aggiungere_le_api_di_arquillian_link">Aggiungere le API di Arquillian</a>
              </li>
              <li>
                <a href="#scrivere_un_test_con_arquillian" id="scrivere_un_test_con_arquillian_link">Scrivere un Test con Arquillian</a>
              </li>
              <li>
                <a href="#aggiungere_un_container_adapter" id="aggiungere_un_container_adapter_link">Aggiungere un Container Adapter</a>
              </li>
              <li>
                <a href="#lanciare_il_test_di_arquillian" id="lanciare_il_test_di_arquillian_link">Lanciare il Test di Arquillian</a>
              </li>
              <li>
                <a href="#uno_sguardo_pi&#249;_da_vicino" id="uno_sguardo_più_da_vicino_link">Uno sguardo più da vicino</a>
              </li>
              <li>
                <a href="#debug_del_test" id="debug_del_test_link">Debug del Test</a>
              </li>
              <li>
                <a href="#aggiungere_nuovi_container" id="aggiungere_nuovi_container_link">Aggiungere nuovi Container</a>
              </li>
              <li>
                <a href="#test_attraverso_i_container" id="test_attraverso_i_container_link">Test Attraverso i Container</a>
              </li>
              <li>
                <a href="#share" id="share_link">Share the Knowledge</a>
              </li>
            </ol>
          </div>
        </div>
        <script>
          $(window).load(function() { activateScrollingToc(['presupposti', 'creare_un_nuovo_progetto', 'aprire_il_progetto_con_eclipse', 'creare_un_componente', 'aggiungere_le_api_di_arquillian', 'scrivere_un_test_con_arquillian', 'aggiungere_un_container_adapter', 'lanciare_il_test_di_arquillian', 'uno_sguardo_più_da_vicino', 'debug_del_test', 'aggiungere_nuovi_container', 'test_attraverso_i_container', 'share']) })
        </script>
      </div>
    </div>
    <footer>
      <div class="container">
        <div class="project">
          <img src="/images/arquillian_logo_200px.png" />
          <p class="bottom">
            &#169;
            Copyright 2009-2017 Red Hat, Inc.
            <br />
            <i class="icon-fire"></i>
            Mixed with <a href="http://twitter.github.com/bootstrap">Bootstrap</a>. Baked by <a href="http://awestruct.org">Awestruct</a>.
            <br />
            <i class="icon-share-alt"></i>
            Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.
            <br />
            Code released under <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, v2.0</a>.
          </p>
        </div>
        <div class="footer-nav">
          <h4>Learn</h4>
          <ul>
            <li>
              <a href="/invasion">Mission</a>
            </li>
            <li>
              <a href="/features">Features</a>
            </li>
            <li>
              <a href="/docs">Documentation</a>
            </li>
            <li>
              <a href="/guides">Guides</a>
            </li>
            <li>
              <a href="https://docs.jboss.org/author/display/ARQ/Reference+Guide">Manual</a>
            </li>
            <li>
              <a href="http://community.jboss.org/en/arquillian/faq">FAQs</a>
            </li>
          </ul>
        </div>
        <div class="footer-nav">
          <h4>Get Involved</h4>
          <ul>
            <li>
              <a href="http://community.jboss.org/en/arquillian?view=discussions">Forums</a>
            </li>
            <li>
              <a href="https://issues.jboss.org/browse/ARQ">Issue Tracker</a>
            </li>
            <li>
              <a href="https://github.com/arquillian">Source Code</a>
            </li>
            <li>
              <a href="/community/contributors">Contributors</a>
            </li>
            <li>
              <a href="https://community.jboss.org/groups/testing">Testing SIG</a>
            </li>
          </ul>
        </div>
        <div class="sponser">
          <div class="follow-us">
            <h4>Stay Informed</h4>
            <ul>
              <li>
                <a href="https://plus.google.com/100660127586085393031?rel=author"><img alt="Google+" src="/images/social/googleplus-16.png" title="Follow Arquillian on Google+" /></a>
              </li>
              <li>
                <a href="https://twitter.com/#!/search/%23arquillian"><img alt="Twitter" src="/images/social/twitter-16.png" title="Browse the #arquillian hashtag on Twitter" /></a>
              </li>
              <li>
                <a href="http://www.linkedin.com/groups?gid=3120340"><img alt="LinkedIn" src="/images/social/linkedin-16.png" title="Join the Arquillian group on LinkedIn" /></a>
              </li>
              <li>
                <a href="http://vimeo.com/channels/arquillian"><img alt="Vimeo" src="/images/social/vimeo-16.png" title="Follow the Arquillian channel on Vimeo" /></a>
              </li>
            </ul>
          </div>
          <p>This website is open source! If you want to improve it, <a href="http://github.com/arquillian/arquillian.github.com">fork the project</a>, hack on it, then send a <a href="https://help.github.com/articles/using-pull-requests">pull request</a>. You can also view the <a href="http://www.seethestats.com/site/arquillian.org">visitor stats</a>.</p>
          <p class="image"><a href="http://jboss.org"><img src="/images/jboss_redhat_branding.png" class="branding" title="Red Hat, Inc." alt="Red Hat, Inc." /></a></p>
          <p>Arquillian is a <a href="http://jboss.org">JBoss Community</a> project and development is sponsored by Red Hat, Inc.</p>
          <p class="bottom"><a href="http://www.redhat.com/legal/legal_statement.html">Terms of Use</a> | <a href="http://www.redhat.com/legal/privacy_statement.html">Privacy Policy</a></p>
        </div>
        <a class="visible-desktop" href="#" id="toTop">Top</a>
      </div>
    </footer>
    <script>
      $(function() {
        $('html').addClass('ready');
        prettify();
        activateFooterGravity();
        activateTooltips();
        activateToTopControl();
      });
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.0.2/bootstrap.min.js"></script>
    <script src="/javascripts/prettify.js"></script>
    <script src="/javascripts/site.js?db72fb4a28d6da962db69350e86fd27246e1be4c"></script>
    <script src="/javascripts/jquery-scroll.js"></script>
    <script src="http://apis.google.com/js/plusone.js"></script>
    <script>
      (function() {
        var po = document.createElement('script'); po.async = true; po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount','UA-18727998-3']);
    _gaq.push(['_trackPageview']);
    (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
